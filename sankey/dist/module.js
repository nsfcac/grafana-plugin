define(["react","d3","@grafana/ui","lodash","@emotion/css","emotion","@grafana/data","app/core/app_events"],(function(t,e,n,r,i,o,a,u){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=36)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e){t.exports=n},function(t,e){t.exports=r},function(t,e){t.exports=i},function(t,e){t.exports=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(16),o=n(12),a=n(13),u=n(7),s=n(9),c=n(19),f=n(20);function l(t){return void 0!==t.leaves||void 0!==t.groups}!function(t){t[t.start=0]="start",t[t.tick=1]="tick",t[t.end=2]="end"}(r=e.EventType||(e.EventType={}));var h=function(){function t(){var e=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:t.getSourceIndex,getTargetIndex:t.getTargetIndex,setLength:t.setLinkLength,getType:function(t){return"function"==typeof e._linkType?e._linkType(t):0}}}return t.prototype.on=function(t,e){return this.event||(this.event={}),"string"==typeof t?this.event[r[t]]=e:this.event[t]=e,this},t.prototype.trigger=function(t){this.event&&void 0!==this.event[t.type]&&this.event[t.type](t)},t.prototype.kick=function(){for(;!this.tick(););},t.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:r.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var t,e,n=this._nodes.length;this._links.length;for(this._descent.locks.clear(),e=0;e<n;++e)if((t=this._nodes[e]).fixed){void 0!==t.px&&void 0!==t.py||(t.px=t.x,t.py=t.y);var i=[t.px,t.py];this._descent.locks.add(e,i)}var o=this._descent.rungeKutta();return 0===o?this._alpha=0:void 0!==this._lastStress&&(this._alpha=o),this._lastStress=o,this.updateNodePositions(),this.trigger({type:r.tick,alpha:this._alpha,stress:this._lastStress}),!1},t.prototype.updateNodePositions=function(){for(var t,e=this._descent.x[0],n=this._descent.x[1],r=this._nodes.length;r--;)(t=this._nodes[r]).x=e[r],t.y=n[r]},t.prototype.nodes=function(t){if(!t){if(0===this._nodes.length&&this._links.length>0){var e=0;this._links.forEach((function(t){e=Math.max(e,t.source,t.target)})),this._nodes=new Array(++e);for(var n=0;n<e;++n)this._nodes[n]={}}return this._nodes}return this._nodes=t,this},t.prototype.groups=function(t){var e=this;return t?(this._groups=t,this._rootGroup={},this._groups.forEach((function(t){void 0===t.padding&&(t.padding=1),void 0!==t.leaves&&t.leaves.forEach((function(n,r){"number"==typeof n&&((t.leaves[r]=e._nodes[n]).parent=t)})),void 0!==t.groups&&t.groups.forEach((function(n,r){"number"==typeof n&&((t.groups[r]=e._groups[n]).parent=t)}))})),this._rootGroup.leaves=this._nodes.filter((function(t){return void 0===t.parent})),this._rootGroup.groups=this._groups.filter((function(t){return void 0===t.parent})),this):this._groups},t.prototype.powerGraphGroups=function(t){var e=i.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(e.groups),t(e),this},t.prototype.avoidOverlaps=function(t){return arguments.length?(this._avoidOverlaps=t,this):this._avoidOverlaps},t.prototype.handleDisconnected=function(t){return arguments.length?(this._handleDisconnected=t,this):this._handleDisconnected},t.prototype.flowLayout=function(t,e){return arguments.length||(t="y"),this._directedLinkConstraints={axis:t,getMinSeparation:"number"==typeof e?function(){return e}:e},this},t.prototype.links=function(t){return arguments.length?(this._links=t,this):this._links},t.prototype.constraints=function(t){return arguments.length?(this._constraints=t,this):this._constraints},t.prototype.distanceMatrix=function(t){return arguments.length?(this._distanceMatrix=t,this):this._distanceMatrix},t.prototype.size=function(t){return t?(this._canvasSize=t,this):this._canvasSize},t.prototype.defaultNodeSize=function(t){return t?(this._defaultNodeSize=t,this):this._defaultNodeSize},t.prototype.groupCompactness=function(t){return t?(this._groupCompactness=t,this):this._groupCompactness},t.prototype.linkDistance=function(t){return t?(this._linkDistance="function"==typeof t?t:+t,this._linkLengthCalculator=null,this):this._linkDistance},t.prototype.linkType=function(t){return this._linkType=t,this},t.prototype.convergenceThreshold=function(t){return t?(this._threshold="function"==typeof t?t:+t,this):this._threshold},t.prototype.alpha=function(t){return arguments.length?(t=+t,this._alpha?this._alpha=t>0?t:0:t>0&&(this._running||(this._running=!0,this.trigger({type:r.start,alpha:this._alpha=t}),this.kick())),this):this._alpha},t.prototype.getLinkLength=function(t){return"function"==typeof this._linkDistance?+this._linkDistance(t):this._linkDistance},t.setLinkLength=function(t,e){t.length=e},t.prototype.getLinkType=function(t){return"function"==typeof this._linkType?this._linkType(t):0},t.prototype.symmetricDiffLinkLengths=function(t,e){var n=this;return void 0===e&&(e=1),this.linkDistance((function(e){return t*e.length})),this._linkLengthCalculator=function(){return o.symmetricDiffLinkLengths(n._links,n.linkAccessor,e)},this},t.prototype.jaccardLinkLengths=function(t,e){var n=this;return void 0===e&&(e=1),this.linkDistance((function(e){return t*e.length})),this._linkLengthCalculator=function(){return o.jaccardLinkLengths(n._links,n.linkAccessor,e)},this},t.prototype.start=function(e,n,r,i,c,f){var l=this;void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===c&&(c=!0),void 0===f&&(f=!0);var h,d=this.nodes().length,p=d+2*this._groups.length,v=(this._links.length,this._canvasSize[0]),y=this._canvasSize[1],m=new Array(p),g=new Array(p),b=null,_=this._avoidOverlaps;this._nodes.forEach((function(t,e){t.index=e,void 0===t.x&&(t.x=v/2,t.y=y/2),m[e]=t.x,g[e]=t.y})),this._linkLengthCalculator&&this._linkLengthCalculator(),this._distanceMatrix?h=this._distanceMatrix:(h=new s.Calculator(p,this._links,t.getSourceIndex,t.getTargetIndex,(function(t){return l.getLinkLength(t)})).DistanceMatrix(),b=a.Descent.createSquareMatrix(p,(function(){return 2})),this._links.forEach((function(t){"number"==typeof t.source&&(t.source=l._nodes[t.source]),"number"==typeof t.target&&(t.target=l._nodes[t.target])})),this._links.forEach((function(e){var n=t.getSourceIndex(e),r=t.getTargetIndex(e);b[n][r]=b[r][n]=e.weight||1})));var k=a.Descent.createSquareMatrix(p,(function(t,e){return h[t][e]}));if(this._rootGroup&&void 0!==this._rootGroup.groups){var x=d;this._groups.forEach((function(t){!function(t,e,n,r){b[t][e]=b[e][t]=n,k[t][e]=k[e][t]=r}(x,x+1,l._groupCompactness,.1),m[x]=0,g[x++]=0,m[x]=0,g[x++]=0}))}else this._rootGroup={leaves:this._nodes,groups:[]};var w=this._constraints||[];this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,w=w.concat(o.generateDirectedEdgeConstraints(d,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new a.Descent([m,g],k),this._descent.locks.clear();for(x=0;x<d;++x){var E=this._nodes[x];if(E.fixed){E.px=E.x,E.py=E.y;var O=[E.x,E.y];this._descent.locks.add(x,O)}}if(this._descent.threshold=this._threshold,this.initialLayout(e,m,g),w.length>0&&(this._descent.project=new u.Projection(this._nodes,this._groups,this._rootGroup,w).projectFunctions()),this._descent.run(n),this.separateOverlappingComponents(v,y,f),this.avoidOverlaps(_),_&&(this._nodes.forEach((function(t,e){t.x=m[e],t.y=g[e]})),this._descent.project=new u.Projection(this._nodes,this._groups,this._rootGroup,w,!0).projectFunctions(),this._nodes.forEach((function(t,e){m[e]=t.x,g[e]=t.y}))),this._descent.G=b,this._descent.run(r),i){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=d,this._descent.scaleSnapByMaxH=d!=p;var j=a.Descent.createSquareMatrix(p,(function(t,e){return t>=d||e>=d?b[t][e]:0}));this._descent.G=j,this._descent.run(i)}return this.updateNodePositions(),this.separateOverlappingComponents(v,y,f),c?this.resume():this},t.prototype.initialLayout=function(e,n,r){if(this._groups.length>0&&e>0){var i=this._nodes.length,o=this._links.map((function(t){return{source:t.source.index,target:t.target.index}})),a=this._nodes.map((function(t){return{index:t.index}}));this._groups.forEach((function(t,e){a.push({index:t.index=i+e})})),this._groups.forEach((function(t,e){void 0!==t.leaves&&t.leaves.forEach((function(e){return o.push({source:t.index,target:e.index})})),void 0!==t.groups&&t.groups.forEach((function(e){return o.push({source:t.index,target:e.index})}))})),(new t).size(this.size()).nodes(a).links(o).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(e,0,0,0,!1),this._nodes.forEach((function(t){n[t.index]=a[t.index].x,r[t.index]=a[t.index].y}))}else this._descent.run(e)},t.prototype.separateOverlappingComponents=function(t,e,n){var r=this;if(void 0===n&&(n=!0),!this._distanceMatrix&&this._handleDisconnected){var i=this._descent.x[0],o=this._descent.x[1];this._nodes.forEach((function(t,e){t.x=i[e],t.y=o[e]}));var a=f.separateGraphs(this._nodes,this._links);f.applyPacking(a,t,e,this._defaultNodeSize,1,n),this._nodes.forEach((function(t,e){r._descent.x[0][e]=t.x,r._descent.x[1][e]=t.y,t.bounds&&(t.bounds.setXCentre(t.x),t.bounds.setYCentre(t.y))}))}},t.prototype.resume=function(){return this.alpha(.1)},t.prototype.stop=function(){return this.alpha(0)},t.prototype.prepareEdgeRouting=function(t){void 0===t&&(t=0),this._visibilityGraph=new c.TangentVisibilityGraph(this._nodes.map((function(e){return e.bounds.inflate(-t).vertices()})))},t.prototype.routeEdge=function(t,e,n){void 0===e&&(e=5);var r=[],i=new c.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),o={x:t.source.x,y:t.source.y},a={x:t.target.x,y:t.target.y},f=i.addPoint(o,t.source.index),l=i.addPoint(a,t.target.index);i.addEdgeIfVisible(o,a,t.source.index,t.target.index),void 0!==n&&n(i);var h=new s.Calculator(i.V.length,i.E,(function(t){return t.source.id}),(function(t){return t.target.id}),(function(t){return t.length()})).PathFromNodeToNode(f.id,l.id);if(1===h.length||h.length===i.V.length){var d=u.makeEdgeBetween(t.source.innerBounds,t.target.innerBounds,e);r=[d.sourceIntersection,d.arrowStart]}else{for(var p=h.length-2,v=i.V[h[p]].p,y=i.V[h[0]].p,m=(r=[t.source.innerBounds.rayIntersection(v.x,v.y)],p);m>=0;--m)r.push(i.V[h[m]].p);r.push(u.makeEdgeTo(y,t.target.innerBounds,e))}return r},t.getSourceIndex=function(t){return"number"==typeof t.source?t.source:t.source.index},t.getTargetIndex=function(t){return"number"==typeof t.target?t.target:t.target.index},t.linkId=function(e){return t.getSourceIndex(e)+"-"+t.getTargetIndex(e)},t.dragStart=function(e){l(e)?t.storeOffset(e,t.dragOrigin(e)):(t.stopNode(e),e.fixed|=2)},t.stopNode=function(t){t.px=t.x,t.py=t.y},t.storeOffset=function(e,n){void 0!==e.leaves&&e.leaves.forEach((function(e){e.fixed|=2,t.stopNode(e),e._dragGroupOffsetX=e.x-n.x,e._dragGroupOffsetY=e.y-n.y})),void 0!==e.groups&&e.groups.forEach((function(e){return t.storeOffset(e,n)}))},t.dragOrigin=function(t){return l(t)?{x:t.bounds.cx(),y:t.bounds.cy()}:t},t.drag=function(e,n){l(e)?(void 0!==e.leaves&&e.leaves.forEach((function(t){e.bounds.setXCentre(n.x),e.bounds.setYCentre(n.y),t.px=t._dragGroupOffsetX+n.x,t.py=t._dragGroupOffsetY+n.y})),void 0!==e.groups&&e.groups.forEach((function(e){return t.drag(e,n)}))):(e.px=n.x,e.py=n.y)},t.dragEnd=function(e){l(e)?(void 0!==e.leaves&&e.leaves.forEach((function(e){t.dragEnd(e),delete e._dragGroupOffsetX,delete e._dragGroupOffsetY})),void 0!==e.groups&&e.groups.forEach(t.dragEnd)):e.fixed&=-7},t.mouseOver=function(t){t.fixed|=4,t.px=t.x,t.py=t.y},t.mouseOut=function(t){t.fixed&=-5},t}();e.Layout=h},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(14),a=n(17);function u(t){return t.bounds=void 0!==t.leaves?t.leaves.reduce((function(t,e){return e.bounds.union(t)}),s.empty()):s.empty(),void 0!==t.groups&&(t.bounds=t.groups.reduce((function(t,e){return u(e).union(t)}),t.bounds)),t.bounds=t.bounds.inflate(t.padding),t.bounds}e.computeGroupBounds=u;var s=function(){function t(t,e,n,r){this.x=t,this.X=e,this.y=n,this.Y=r}return t.empty=function(){return new t(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},t.prototype.cx=function(){return(this.x+this.X)/2},t.prototype.cy=function(){return(this.y+this.Y)/2},t.prototype.overlapX=function(t){var e=this.cx(),n=t.cx();return e<=n&&t.x<this.X?this.X-t.x:n<=e&&this.x<t.X?t.X-this.x:0},t.prototype.overlapY=function(t){var e=this.cy(),n=t.cy();return e<=n&&t.y<this.Y?this.Y-t.y:n<=e&&this.y<t.Y?t.Y-this.y:0},t.prototype.setXCentre=function(t){var e=t-this.cx();this.x+=e,this.X+=e},t.prototype.setYCentre=function(t){var e=t-this.cy();this.y+=e,this.Y+=e},t.prototype.width=function(){return this.X-this.x},t.prototype.height=function(){return this.Y-this.y},t.prototype.union=function(e){return new t(Math.min(this.x,e.x),Math.max(this.X,e.X),Math.min(this.y,e.y),Math.max(this.Y,e.Y))},t.prototype.lineIntersections=function(e,n,r,i){for(var o=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],a=[],u=0;u<4;++u){var s=t.lineIntersection(e,n,r,i,o[u][0],o[u][1],o[u][2],o[u][3]);null!==s&&a.push({x:s.x,y:s.y})}return a},t.prototype.rayIntersection=function(t,e){var n=this.lineIntersections(this.cx(),this.cy(),t,e);return n.length>0?n[0]:null},t.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y}]},t.lineIntersection=function(t,e,n,r,i,o,a,u){var s=n-t,c=a-i,f=r-e,l=u-o,h=l*s-c*f;if(0==h)return null;var d=t-i,p=e-o,v=(c*p-l*d)/h,y=(s*p-f*d)/h;return v>=0&&v<=1&&y>=0&&y<=1?{x:t+v*s,y:e+v*f}:null},t.prototype.inflate=function(e){return new t(this.x-e,this.X+e,this.y-e,this.Y+e)},t}();e.Rectangle=s,e.makeEdgeBetween=function(t,e,n){var r=t.rayIntersection(e.cx(),e.cy())||{x:t.cx(),y:t.cy()},i=e.rayIntersection(t.cx(),t.cy())||{x:e.cx(),y:e.cy()},o=i.x-r.x,a=i.y-r.y,u=Math.sqrt(o*o+a*a),s=u-n;return{sourceIntersection:r,targetIntersection:i,arrowStart:{x:r.x+s*o/u,y:r.y+s*a/u}}},e.makeEdgeTo=function(t,e,n){var r=e.rayIntersection(t.x,t.y);r||(r={x:e.cx(),y:e.cy()});var i=r.x-t.x,o=r.y-t.y,a=Math.sqrt(i*i+o*o);return{x:r.x-n*i/a,y:r.y-n*o/a}};var c=function(t,e,n){this.v=t,this.r=e,this.pos=n,this.prev=h(),this.next=h()},f=function(t,e,n){this.isOpen=t,this.v=e,this.pos=n};function l(t,e){return t.pos>e.pos?1:t.pos<e.pos||t.isOpen?-1:e.isOpen?1:0}function h(){return new a.RBTree((function(t,e){return t.pos-e.pos}))}var d={getCentre:function(t){return t.cx()},getOpen:function(t){return t.y},getClose:function(t){return t.Y},getSize:function(t){return t.width()},makeRect:function(t,e,n,r){return new s(n-r/2,n+r/2,t,e)},findNeighbours:function(t,e){var n=function(n,r){for(var i,o=e.findIter(t);null!==(i=o[n]());){var a=i.r.overlapX(t.r);if((a<=0||a<=i.r.overlapY(t.r))&&(t[n].insert(i),i[r].insert(t)),a<=0)break}};n("next","prev"),n("prev","next")}},p={getCentre:function(t){return t.cy()},getOpen:function(t){return t.x},getClose:function(t){return t.X},getSize:function(t){return t.height()},makeRect:function(t,e,n,r){return new s(t,e,n-r/2,n+r/2)},findNeighbours:function(t,e){var n=function(n,r){var i=e.findIter(t)[n]();null!==i&&i.r.overlapX(t.r)>0&&(t[n].insert(i),i[r].insert(t))};n("next","prev"),n("prev","next")}};function v(t,e,n,r){void 0===r&&(r=!1);var i=t.padding,o=void 0!==t.groups?t.groups.length:0,a=void 0!==t.leaves?t.leaves.length:0,u=o?t.groups.reduce((function(t,r){return t.concat(v(r,e,n,!0))}),[]):[],s=(r?2:0)+a+o,c=new Array(s),f=new Array(s),l=0,h=function(t,e){f[l]=t,c[l++]=e};if(r){var d=t.bounds,p=e.getCentre(d),m=e.getSize(d)/2,g=e.getOpen(d),b=e.getClose(d),_=p-m+i/2,k=p+m-i/2;t.minVar.desiredPosition=_,h(e.makeRect(g,b,_,i),t.minVar),t.maxVar.desiredPosition=k,h(e.makeRect(g,b,k,i),t.maxVar)}a&&t.leaves.forEach((function(t){return h(t.bounds,t.variable)})),o&&t.groups.forEach((function(t){var n=t.bounds;h(e.makeRect(e.getOpen(n),e.getClose(n),e.getCentre(n),e.getSize(n)),t.minVar)}));var x=y(f,c,e,n);return o&&(c.forEach((function(t){t.cOut=[],t.cIn=[]})),x.forEach((function(t){t.left.cOut.push(t),t.right.cIn.push(t)})),t.groups.forEach((function(t){var n=(t.padding-e.getSize(t.bounds))/2;t.minVar.cIn.forEach((function(t){return t.gap+=n})),t.minVar.cOut.forEach((function(e){e.left=t.maxVar,e.gap+=n}))}))),u.concat(x)}function y(t,e,n,r){var i,a=t.length,u=2*a,s=new Array(u);for(i=0;i<a;++i){var d=t[i],p=new c(e[i],d,n.getCentre(d));s[i]=new f(!0,p,n.getOpen(d)),s[i+a]=new f(!1,p,n.getClose(d))}s.sort(l);var v=new Array,y=h();for(i=0;i<u;++i){var m=s[i];p=m.v;if(m.isOpen)y.insert(p),n.findNeighbours(p,y);else{y.remove(p);var g=function(t,e){var i=(n.getSize(t.r)+n.getSize(e.r))/2+r;v.push(new o.Constraint(t.v,e.v,i))},b=function(t,e,n){for(var r,i=p[t].iterator();null!==(r=i[t]());)n(r,p),r[e].remove(p)};b("prev","next",(function(t,e){return g(t,e)})),b("next","prev",(function(t,e){return g(e,t)}))}}return v}function m(t,e){return y(t,e,d,1e-6)}function g(t,e){return y(t,e,p,1e-6)}function b(t){return v(t,d,1e-6)}function _(t){return v(t,p,1e-6)}e.generateXConstraints=m,e.generateYConstraints=g,e.generateXGroupConstraints=b,e.generateYGroupConstraints=_,e.removeOverlaps=function(t){var e=t.map((function(t){return new o.Variable(t.cx())})),n=m(t,e),r=new o.Solver(e,n);r.solve(),e.forEach((function(e,n){return t[n].setXCentre(e.position())})),e=t.map((function(t){return new o.Variable(t.cy())})),n=g(t,e),(r=new o.Solver(e,n)).solve(),e.forEach((function(e,n){return t[n].setYCentre(e.position())}))};var k=function(t){function e(e,n){var r=t.call(this,0,n)||this;return r.index=e,r}return i(e,t),e}(o.Variable);e.IndexedVariable=k;var x=function(){function t(t,e,n,r,i){var o=this;if(void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=!1),this.nodes=t,this.groups=e,this.rootGroup=n,this.avoidOverlaps=i,this.variables=t.map((function(t,e){return t.variable=new k(e,1)})),r&&this.createConstraints(r),i&&n&&void 0!==n.groups){t.forEach((function(t){if(t.width&&t.height){var e=t.width/2,n=t.height/2;t.bounds=new s(t.x-e,t.x+e,t.y-n,t.y+n)}else t.bounds=new s(t.x,t.x,t.y,t.y)})),u(n);var a=t.length;e.forEach((function(t){o.variables[a]=t.minVar=new k(a++,void 0!==t.stiffness?t.stiffness:.01),o.variables[a]=t.maxVar=new k(a++,void 0!==t.stiffness?t.stiffness:.01)}))}}return t.prototype.createSeparation=function(t){return new o.Constraint(this.nodes[t.left].variable,this.nodes[t.right].variable,t.gap,void 0!==t.equality&&t.equality)},t.prototype.makeFeasible=function(t){var e=this;if(this.avoidOverlaps){var n="x",r="width";"x"===t.axis&&(n="y",r="height");var i=t.offsets.map((function(t){return e.nodes[t.node]})).sort((function(t,e){return t[n]-e[n]})),o=null;i.forEach((function(t){if(o){var e=o[n]+o[r];e>t[n]&&(t[n]=e)}o=t}))}},t.prototype.createAlignment=function(t){var e=this,n=this.nodes[t.offsets[0].node].variable;this.makeFeasible(t);var r="x"===t.axis?this.xConstraints:this.yConstraints;t.offsets.slice(1).forEach((function(t){var i=e.nodes[t.node].variable;r.push(new o.Constraint(n,i,t.offset,!0))}))},t.prototype.createConstraints=function(t){var e=this,n=function(t){return void 0===t.type||"separation"===t.type};this.xConstraints=t.filter((function(t){return"x"===t.axis&&n(t)})).map((function(t){return e.createSeparation(t)})),this.yConstraints=t.filter((function(t){return"y"===t.axis&&n(t)})).map((function(t){return e.createSeparation(t)})),t.filter((function(t){return"alignment"===t.type})).forEach((function(t){return e.createAlignment(t)}))},t.prototype.setupVariablesAndBounds=function(t,e,n,r){this.nodes.forEach((function(i,o){i.fixed?(i.variable.weight=i.fixedWeight?i.fixedWeight:1e3,n[o]=r(i)):i.variable.weight=1;var a=(i.width||0)/2,u=(i.height||0)/2,c=t[o],f=e[o];i.bounds=new s(c-a,c+a,f-u,f+u)}))},t.prototype.xProject=function(t,e,n){(this.rootGroup||this.avoidOverlaps||this.xConstraints)&&this.project(t,e,t,n,(function(t){return t.px}),this.xConstraints,b,(function(t){return t.bounds.setXCentre(n[t.variable.index]=t.variable.position())}),(function(t){var e=n[t.minVar.index]=t.minVar.position(),r=n[t.maxVar.index]=t.maxVar.position(),i=t.padding/2;t.bounds.x=e-i,t.bounds.X=r+i}))},t.prototype.yProject=function(t,e,n){(this.rootGroup||this.yConstraints)&&this.project(t,e,e,n,(function(t){return t.py}),this.yConstraints,_,(function(t){return t.bounds.setYCentre(n[t.variable.index]=t.variable.position())}),(function(t){var e=n[t.minVar.index]=t.minVar.position(),r=n[t.maxVar.index]=t.maxVar.position(),i=t.padding/2;t.bounds.y=e-i,t.bounds.Y=r+i}))},t.prototype.projectFunctions=function(){var t=this;return[function(e,n,r){return t.xProject(e,n,r)},function(e,n,r){return t.yProject(e,n,r)}]},t.prototype.project=function(t,e,n,r,i,o,a,s,c){this.setupVariablesAndBounds(t,e,r,i),this.rootGroup&&this.avoidOverlaps&&(u(this.rootGroup),o=o.concat(a(this.rootGroup))),this.solve(this.variables,o,n,r),this.nodes.forEach(s),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(c),u(this.rootGroup))},t.prototype.solve=function(t,e,n,r){var i=new o.Solver(t,e);i.setStartingPositions(n),i.setDesiredPositions(r),i.solve()},t}();e.Projection=x},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(18),i=function(t,e){this.id=t,this.distance=e},o=function(t){this.id=t,this.neighbours=[]},a=function(t,e,n){this.node=t,this.prev=e,this.d=n},u=function(){function t(t,e,n,r,a){this.n=t,this.es=e,this.neighbours=new Array(this.n);for(var u=this.n;u--;)this.neighbours[u]=new o(u);for(u=this.es.length;u--;){var s=this.es[u],c=n(s),f=r(s),l=a(s);this.neighbours[c].neighbours.push(new i(f,l)),this.neighbours[f].neighbours.push(new i(c,l))}}return t.prototype.DistanceMatrix=function(){for(var t=new Array(this.n),e=0;e<this.n;++e)t[e]=this.dijkstraNeighbours(e);return t},t.prototype.DistancesFromNode=function(t){return this.dijkstraNeighbours(t)},t.prototype.PathFromNodeToNode=function(t,e){return this.dijkstraNeighbours(t,e)},t.prototype.PathFromNodeToNodeWithPrevCost=function(t,e,n){var i=new r.PriorityQueue((function(t,e){return t.d<=e.d})),o=this.neighbours[t],u=new a(o,null,0),s={};for(i.push(u);!i.empty()&&(o=(u=i.pop()).node).id!==e;)for(var c=o.neighbours.length;c--;){var f=o.neighbours[c],l=this.neighbours[f.id];if(!u.prev||l.id!==u.prev.node.id){var h=l.id+","+o.id;if(!(h in s&&s[h]<=u.d)){var d=u.prev?n(u.prev.node.id,o.id,l.id):0,p=u.d+f.distance+d;s[h]=p,i.push(new a(l,u,p))}}}for(var v=[];u.prev;)u=u.prev,v.push(u.node.id);return v},t.prototype.dijkstraNeighbours=function(t,e){void 0===e&&(e=-1);for(var n=new r.PriorityQueue((function(t,e){return t.d<=e.d})),i=this.neighbours.length,o=new Array(i);i--;){var a=this.neighbours[i];a.d=i===t?0:Number.POSITIVE_INFINITY,a.q=n.push(a)}for(;!n.empty();){var u=n.pop();if(o[u.id]=u.d,u.id===e){for(var s=[],c=u;void 0!==c.prev;)s.push(c.prev.id),c=c.prev;return s}for(i=u.neighbours.length;i--;){var f=u.neighbours[i],l=(c=this.neighbours[f.id],u.d+f.distance);u.d!==Number.MAX_VALUE&&c.d>l&&(c.d=l,c.prev=u,n.reduceKey(c.q,c,(function(t,e){return t.q=e})))}}return o},t}();e.Calculator=u},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=a},function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)n[r]={};for(var r in e)n[r]={};return Object.keys(n).length}function i(t,e){var n=0;for(var r in t)void 0!==e[r]&&++n;return n}function o(t,e,n,r){var i=function(t,e){var n={},r=function(t,e){void 0===n[t]&&(n[t]={}),n[t][e]={}};return t.forEach((function(t){var n=e.getSourceIndex(t),i=e.getTargetIndex(t);r(n,i),r(i,n)})),n}(t,r);t.forEach((function(t){var o=i[r.getSourceIndex(t)],a=i[r.getTargetIndex(t)];r.setLength(t,1+e*n(o,a))}))}function a(t,e,n){var r=[],i=0,o=[],a=[];function u(t){t.index=t.lowlink=i++,o.push(t),t.onStack=!0;for(var e=0,n=t.out;e<n.length;e++){var r=n[e];void 0===r.index?(u(r),t.lowlink=Math.min(t.lowlink,r.lowlink)):r.onStack&&(t.lowlink=Math.min(t.lowlink,r.index))}if(t.lowlink===t.index){for(var s=[];o.length&&((r=o.pop()).onStack=!1,s.push(r),r!==t););a.push(s.map((function(t){return t.id})))}}for(var s=0;s<t;s++)r.push({id:s,out:[]});for(var c=0,f=e;c<f.length;c++){var l=f[c],h=r[n.getSourceIndex(l)],d=r[n.getTargetIndex(l)];h.out.push(d)}for(var p=0,v=r;p<v.length;p++){var y=v[p];void 0===y.index&&u(y)}return a}Object.defineProperty(e,"__esModule",{value:!0}),e.symmetricDiffLinkLengths=function(t,e,n){void 0===n&&(n=1),o(t,n,(function(t,e){return Math.sqrt(r(t,e)-i(t,e))}),e)},e.jaccardLinkLengths=function(t,e,n){void 0===n&&(n=1),o(t,n,(function(t,e){return Math.min(Object.keys(t).length,Object.keys(e).length)<1.1?0:i(t,e)/r(t,e)}),e)},e.generateDirectedEdgeConstraints=function(t,e,n,r){var i=a(t,e,r),o={};i.forEach((function(t,e){return t.forEach((function(t){return o[t]=e}))}));var u=[];return e.forEach((function(t){var e=r.getSourceIndex(t),i=r.getTargetIndex(t);o[e]!==o[i]&&u.push({axis:n,left:e,right:i,gap:r.getMinSeparation(t)})})),u},e.stronglyConnectedComponents=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.locks={}}return t.prototype.add=function(t,e){this.locks[t]=e},t.prototype.clear=function(){this.locks={}},t.prototype.isEmpty=function(){for(var t in this.locks)return!1;return!0},t.prototype.apply=function(t){for(var e in this.locks)t(Number(e),this.locks[e])},t}();e.Locks=r;var i=function(){function t(t,e,n){void 0===n&&(n=null),this.D=e,this.G=n,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new o,this.project=null,this.x=t,this.k=t.length;var i=this.n=t[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new r,this.minD=Number.MAX_VALUE;for(var a,u=i;u--;)for(a=i;--a>u;){var s=e[u][a];s>0&&s<this.minD&&(this.minD=s)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),u=this.k;u--;){for(this.g[u]=new Array(i),this.H[u]=new Array(i),a=i;a--;)this.H[u][a]=new Array(i);this.Hd[u]=new Array(i),this.a[u]=new Array(i),this.b[u]=new Array(i),this.c[u]=new Array(i),this.d[u]=new Array(i),this.e[u]=new Array(i),this.ia[u]=new Array(i),this.ib[u]=new Array(i),this.xtmp[u]=new Array(i)}}return t.createSquareMatrix=function(t,e){for(var n=new Array(t),r=0;r<t;++r){n[r]=new Array(t);for(var i=0;i<t;++i)n[r][i]=e(r,i)}return n},t.prototype.offsetDir=function(){for(var t=this,e=new Array(this.k),n=0,r=0;r<this.k;++r){var i=e[r]=this.random.getNextBetween(.01,1)-.5;n+=i*i}return n=Math.sqrt(n),e.map((function(e){return e*(t.minD/n)}))},t.prototype.computeDerivatives=function(t){var e=this,n=this.n;if(!(n<1)){for(var r,i=new Array(this.k),o=new Array(this.k),a=new Array(this.k),u=0,s=0;s<n;++s){for(r=0;r<this.k;++r)a[r]=this.g[r][s]=0;for(var c=0;c<n;++c)if(s!==c){for(var f=n;f--;){var l=0;for(r=0;r<this.k;++r){var h=i[r]=t[r][s]-t[r][c];l+=o[r]=h*h}if(l>1e-9)break;var d=this.offsetDir();for(r=0;r<this.k;++r)t[r][c]+=d[r]}var p=Math.sqrt(l),v=this.D[s][c],y=null!=this.G?this.G[s][c]:1;if(y>1&&p>v||!isFinite(v))for(r=0;r<this.k;++r)this.H[r][s][c]=0;else{y>1&&(y=1);var m=v*v,g=2*y*(p-v)/(m*p),b=p*p*p,_=2*-y/(m*b);for(isFinite(g),r=0;r<this.k;++r)this.g[r][s]+=i[r]*g,a[r]-=this.H[r][s][c]=_*(b+v*(o[r]-l)+p*l)}}for(r=0;r<this.k;++r)u=Math.max(u,this.H[r][s][s]=a[r])}var k=this.snapGridSize/2,x=this.snapGridSize,w=this.snapStrength/(k*k),E=this.numGridSnapNodes;for(s=0;s<E;++s)for(r=0;r<this.k;++r){var O=this.x[r][s],j=O/x,S=j%1,M=j-S;-k<(h=Math.abs(S)<=.5?O-M*x:O>0?O-(M+1)*x:O-(M-1)*x)&&h<=k&&(this.scaleSnapByMaxH?(this.g[r][s]+=u*w*h,this.H[r][s][s]+=u*w):(this.g[r][s]+=w*h,this.H[r][s][s]+=w))}this.locks.isEmpty()||this.locks.apply((function(n,i){for(r=0;r<e.k;++r)e.H[r][n][n]+=u,e.g[r][n]-=u*(i[r]-t[r][n])}))}},t.dotProd=function(t,e){for(var n=0,r=t.length;r--;)n+=t[r]*e[r];return n},t.rightMultiply=function(e,n,r){for(var i=e.length;i--;)r[i]=t.dotProd(e[i],n)},t.prototype.computeStepSize=function(e){for(var n=0,r=0,i=0;i<this.k;++i)n+=t.dotProd(this.g[i],e[i]),t.rightMultiply(this.H[i],e[i],this.Hd[i]),r+=t.dotProd(e[i],this.Hd[i]);return 0!==r&&isFinite(r)?1*n/r:0},t.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var t=this.computeStepSize(this.g),e=0;e<this.k;++e)this.takeDescentStep(this.x[e],this.g[e],t);return this.computeStress()},t.copy=function(t,e){for(var n=t.length,r=e[0].length,i=0;i<n;++i)for(var o=0;o<r;++o)e[i][o]=t[i][o]},t.prototype.stepAndProject=function(e,n,r,i){t.copy(e,n),this.takeDescentStep(n[0],r[0],i),this.project&&this.project[0](e[0],e[1],n[0]),this.takeDescentStep(n[1],r[1],i),this.project&&this.project[1](n[0],e[1],n[1]);for(var o=2;o<this.k;o++)this.takeDescentStep(n[o],r[o],i)},t.mApply=function(t,e,n){for(var r=t;r-- >0;)for(var i=e;i-- >0;)n(r,i)},t.prototype.matrixApply=function(e){t.mApply(this.k,this.n,e)},t.prototype.computeNextPosition=function(t,e){var n=this;this.computeDerivatives(t);var r=this.computeStepSize(this.g);if(this.stepAndProject(t,e,this.g,r),this.project){this.matrixApply((function(r,i){return n.e[r][i]=t[r][i]-e[r][i]}));var i=this.computeStepSize(this.e);i=Math.max(.2,Math.min(i,1)),this.stepAndProject(t,e,this.e,i)}},t.prototype.run=function(t){for(var e=Number.MAX_VALUE,n=!1;!n&&t-- >0;){var r=this.rungeKutta();n=Math.abs(e/r-1)<this.threshold,e=r}return e},t.prototype.rungeKutta=function(){var e=this;this.computeNextPosition(this.x,this.a),t.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),t.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var n=0;return this.matrixApply((function(t,r){var i=(e.a[t][r]+2*e.b[t][r]+2*e.c[t][r]+e.d[t][r])/6,o=e.x[t][r]-i;n+=o*o,e.x[t][r]=i})),n},t.mid=function(e,n,r){t.mApply(e.length,e[0].length,(function(t,i){return r[t][i]=e[t][i]+(n[t][i]-e[t][i])/2}))},t.prototype.takeDescentStep=function(t,e,n){for(var r=0;r<this.n;++r)t[r]=t[r]-n*e[r]},t.prototype.computeStress=function(){for(var t=0,e=0,n=this.n-1;e<n;++e)for(var r=e+1,i=this.n;r<i;++r){for(var o=0,a=0;a<this.k;++a){var u=this.x[a][e]-this.x[a][r];o+=u*u}o=Math.sqrt(o);var s=this.D[e][r];if(isFinite(s)){var c=s-o;t+=c*c/(s*s)}}return t},t.zeroDistance=1e-10,t}();e.Descent=i;var o=function(){function t(t){void 0===t&&(t=1),this.seed=t,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return t.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},t.prototype.getNextBetween=function(t,e){return t+this.getNext()*(e-t)},t}();e.PseudoRandom=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.scale=t,this.AB=0,this.AD=0,this.A2=0}return t.prototype.addVariable=function(t){var e=this.scale/t.scale,n=t.offset/t.scale,r=t.weight;this.AB+=r*e*n,this.AD+=r*e*t.desiredPosition,this.A2+=r*e*e},t.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},t}();e.PositionStats=r;var i=function(){function t(t,e,n,r){void 0===r&&(r=!1),this.left=t,this.right=e,this.gap=n,this.equality=r,this.active=!1,this.unsatisfiable=!1,this.left=t,this.right=e,this.gap=n,this.equality=r}return t.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},t}();e.Constraint=i;var o=function(){function t(t,e,n){void 0===e&&(e=1),void 0===n&&(n=1),this.desiredPosition=t,this.weight=e,this.scale=n,this.offset=0}return t.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},t.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},t.prototype.visitNeighbours=function(t,e){var n=function(n,r){return n.active&&t!==r&&e(n,r)};this.cOut.forEach((function(t){return n(t,t.right)})),this.cIn.forEach((function(t){return n(t,t.left)}))},t}();e.Variable=o;var a=function(){function t(t){this.vars=[],t.offset=0,this.ps=new r(t.scale),this.addVariable(t)}return t.prototype.addVariable=function(t){t.block=this,this.vars.push(t),this.ps.addVariable(t),this.posn=this.ps.getPosn()},t.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var t=0,e=this.vars.length;t<e;++t)this.ps.addVariable(this.vars[t]);this.posn=this.ps.getPosn()},t.prototype.compute_lm=function(t,e,n){var r=this,i=t.dfdv();return t.visitNeighbours(e,(function(e,o){var a=r.compute_lm(o,t,n);o===e.right?(i+=a*e.left.scale,e.lm=a):(i+=a*e.right.scale,e.lm=-a),n(e)})),i/t.scale},t.prototype.populateSplitBlock=function(t,e){var n=this;t.visitNeighbours(e,(function(e,r){r.offset=t.offset+(r===e.right?e.gap:-e.gap),n.addVariable(r),n.populateSplitBlock(r,t)}))},t.prototype.traverse=function(t,e,n,r){var i=this;void 0===n&&(n=this.vars[0]),void 0===r&&(r=null),n.visitNeighbours(r,(function(r,o){e.push(t(r)),i.traverse(t,e,o,n)}))},t.prototype.findMinLM=function(){var t=null;return this.compute_lm(this.vars[0],null,(function(e){!e.equality&&(null===t||e.lm<t.lm)&&(t=e)})),t},t.prototype.findMinLMBetween=function(t,e){this.compute_lm(t,null,(function(){}));var n=null;return this.findPath(t,null,e,(function(t,e){!t.equality&&t.right===e&&(null===n||t.lm<n.lm)&&(n=t)})),n},t.prototype.findPath=function(t,e,n,r){var i=this,o=!1;return t.visitNeighbours(e,(function(e,a){o||a!==n&&!i.findPath(a,t,n,r)||(o=!0,r(e,a))})),o},t.prototype.isActiveDirectedPathBetween=function(t,e){if(t===e)return!0;for(var n=t.cOut.length;n--;){var r=t.cOut[n];if(r.active&&this.isActiveDirectedPathBetween(r.right,e))return!0}return!1},t.split=function(e){return e.active=!1,[t.createSplitBlock(e.left),t.createSplitBlock(e.right)]},t.createSplitBlock=function(e){var n=new t(e);return n.populateSplitBlock(e,null),n},t.prototype.splitBetween=function(e,n){var r=this.findMinLMBetween(e,n);if(null!==r){var i=t.split(r);return{constraint:r,lb:i[0],rb:i[1]}}return null},t.prototype.mergeAcross=function(t,e,n){e.active=!0;for(var r=0,i=t.vars.length;r<i;++r){var o=t.vars[r];o.offset+=n,this.addVariable(o)}this.posn=this.ps.getPosn()},t.prototype.cost=function(){for(var t=0,e=this.vars.length;e--;){var n=this.vars[e],r=n.position()-n.desiredPosition;t+=r*r*n.weight}return t},t}();e.Block=a;var u=function(){function t(t){this.vs=t;var e=t.length;for(this.list=new Array(e);e--;){var n=new a(t[e]);this.list[e]=n,n.blockInd=e}}return t.prototype.cost=function(){for(var t=0,e=this.list.length;e--;)t+=this.list[e].cost();return t},t.prototype.insert=function(t){t.blockInd=this.list.length,this.list.push(t)},t.prototype.remove=function(t){var e=this.list.length-1,n=this.list[e];this.list.length=e,t!==n&&(this.list[t.blockInd]=n,n.blockInd=t.blockInd)},t.prototype.merge=function(t){var e=t.left.block,n=t.right.block,r=t.right.offset-t.left.offset-t.gap;e.vars.length<n.vars.length?(n.mergeAcross(e,t,r),this.remove(e)):(e.mergeAcross(n,t,-r),this.remove(n))},t.prototype.forEach=function(t){this.list.forEach(t)},t.prototype.updateBlockPositions=function(){this.list.forEach((function(t){return t.updateWeightedPosition()}))},t.prototype.split=function(t){var e=this;this.updateBlockPositions(),this.list.forEach((function(n){var r=n.findMinLM();null!==r&&r.lm<s.LAGRANGIAN_TOLERANCE&&(n=r.left.block,a.split(r).forEach((function(t){return e.insert(t)})),e.remove(n),t.push(r))}))},t}();e.Blocks=u;var s=function(){function t(t,e){this.vs=t,this.cs=e,this.vs=t,t.forEach((function(t){t.cIn=[],t.cOut=[]})),this.cs=e,e.forEach((function(t){t.left.cOut.push(t),t.right.cIn.push(t)})),this.inactive=e.map((function(t){return t.active=!1,t})),this.bs=null}return t.prototype.cost=function(){return this.bs.cost()},t.prototype.setStartingPositions=function(t){this.inactive=this.cs.map((function(t){return t.active=!1,t})),this.bs=new u(this.vs),this.bs.forEach((function(e,n){return e.posn=t[n]}))},t.prototype.setDesiredPositions=function(t){this.vs.forEach((function(e,n){return e.desiredPosition=t[n]}))},t.prototype.mostViolated=function(){for(var e=Number.MAX_VALUE,n=null,r=this.inactive,i=r.length,o=i,a=0;a<i;++a){var u=r[a];if(!u.unsatisfiable){var s=u.slack();if((u.equality||s<e)&&(e=s,n=u,o=a,u.equality))break}}return o!==i&&(e<t.ZERO_UPPERBOUND&&!n.active||n.equality)&&(r[o]=r[i-1],r.length=i-1),n},t.prototype.satisfy=function(){null==this.bs&&(this.bs=new u(this.vs)),this.bs.split(this.inactive);for(var e=null;(e=this.mostViolated())&&(e.equality||e.slack()<t.ZERO_UPPERBOUND&&!e.active);){var n=e.left.block;if(n!==e.right.block)this.bs.merge(e);else{if(n.isActiveDirectedPathBetween(e.right,e.left)){e.unsatisfiable=!0;continue}var r=n.splitBetween(e.left,e.right);if(null===r){e.unsatisfiable=!0;continue}this.bs.insert(r.lb),this.bs.insert(r.rb),this.bs.remove(n),this.inactive.push(r.constraint),e.slack()>=0?this.inactive.push(e):this.bs.merge(e)}}},t.prototype.solve=function(){this.satisfy();for(var t=Number.MAX_VALUE,e=this.bs.cost();Math.abs(t-e)>1e-4;)this.satisfy(),t=e,e=this.bs.cost();return e},t.LAGRANGIAN_TOLERANCE=-1e-4,t.ZERO_UPPERBOUND=-1e-10,t}();e.Solver=s,e.removeOverlapInOneDimension=function(t,e,n){for(var r=t.map((function(t){return new o(t.desiredCenter)})),a=[],u=t.length,c=0;c<u-1;c++){var f=t[c],l=t[c+1];a.push(new i(r[c],r[c+1],(f.size+l.size)/2))}var h=r[0],d=r[u-1],p=t[0].size/2,v=t[u-1].size/2,y=null,m=null;return e&&(y=new o(e,1e3*h.weight),r.push(y),a.push(new i(y,h,p))),n&&(m=new o(n,1e3*d.weight),r.push(m),a.push(new i(d,m,v))),new s(r,a).solve(),{newCenters:r.slice(0,t.length).map((function(t){return t.position()})),lowerBound:y?y.position():h.position()-p,upperBound:m?m.position():d.position()+v}}},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e,n){this.source=t,this.target=e,this.type=n};e.PowerEdge=r;var i=function(){function t(t,e,n,r){var i=this;if(this.linkAccessor=n,this.modules=new Array(t),this.roots=[],r)this.initModulesFromGroup(r);else{this.roots.push(new u);for(var a=0;a<t;++a)this.roots[0].add(this.modules[a]=new o(a))}this.R=e.length,e.forEach((function(t){var e=i.modules[n.getSourceIndex(t)],r=i.modules[n.getTargetIndex(t)],o=n.getType(t);e.outgoing.add(o,r),r.incoming.add(o,e)}))}return t.prototype.initModulesFromGroup=function(t){var e=new u;this.roots.push(e);for(var n=0;n<t.leaves.length;++n){var r=t.leaves[n],i=new o(r.id);this.modules[r.id]=i,e.add(i)}if(t.groups)for(var a=0;a<t.groups.length;++a){var c=t.groups[a],f={};for(var l in c)"leaves"!==l&&"groups"!==l&&c.hasOwnProperty(l)&&(f[l]=c[l]);e.add(new o(-1-a,new s,new s,this.initModulesFromGroup(c),f))}return e},t.prototype.merge=function(t,e,n){void 0===n&&(n=0);var r=t.incoming.intersection(e.incoming),i=t.outgoing.intersection(e.outgoing),a=new u;a.add(t),a.add(e);var s=new o(this.modules.length,i,r,a);this.modules.push(s);var c=function(n,r,i){n.forAll((function(n,o){n.forAll((function(n){var a=n[r];a.add(o,s),a.remove(o,t),a.remove(o,e),t[i].remove(o,n),e[i].remove(o,n)}))}))};return c(i,"incoming","outgoing"),c(r,"outgoing","incoming"),this.R-=r.count()+i.count(),this.roots[n].remove(t),this.roots[n].remove(e),this.roots[n].add(s),s},t.prototype.rootMerges=function(t){void 0===t&&(t=0);for(var e=this.roots[t].modules(),n=e.length,r=new Array(n*(n-1)),i=0,o=0,a=n-1;o<a;++o)for(var u=o+1;u<n;++u){var s=e[o],c=e[u];r[i]={id:i,nEdges:this.nEdges(s,c),a:s,b:c},i++}return r},t.prototype.greedyMerge=function(){for(var t=0;t<this.roots.length;++t)if(!(this.roots[t].modules().length<2)){var e=this.rootMerges(t).sort((function(t,e){return t.nEdges==e.nEdges?t.id-e.id:t.nEdges-e.nEdges}))[0];if(!(e.nEdges>=this.R))return this.merge(e.a,e.b,t),!0}},t.prototype.nEdges=function(t,e){var n=t.incoming.intersection(e.incoming),r=t.outgoing.intersection(e.outgoing);return this.R-n.count()-r.count()},t.prototype.getGroupHierarchy=function(t){var e=this,n=[];return function t(e,n,r){e.forAll((function(e){if(e.isLeaf())n.leaves||(n.leaves=[]),n.leaves.push(e.id);else{var i=n;if(e.gid=r.length,!e.isIsland()||e.isPredefined()){if(i={id:e.gid},e.isPredefined())for(var o in e.definition)i[o]=e.definition[o];n.groups||(n.groups=[]),n.groups.push(e.gid),r.push(i)}t(e.children,i,r)}}))}(this.roots[0],{},n),this.allEdges().forEach((function(i){var o=e.modules[i.source],a=e.modules[i.target];t.push(new r(void 0===o.gid?i.source:n[o.gid],void 0===a.gid?i.target:n[a.gid],i.type))})),n},t.prototype.allEdges=function(){var e=[];return t.getEdges(this.roots[0],e),e},t.getEdges=function(e,n){e.forAll((function(e){e.getEdges(n),t.getEdges(e.children,n)}))},t}();e.Configuration=i;var o=function(){function t(t,e,n,r,i){void 0===e&&(e=new s),void 0===n&&(n=new s),void 0===r&&(r=new u),this.id=t,this.outgoing=e,this.incoming=n,this.children=r,this.definition=i}return t.prototype.getEdges=function(t){var e=this;this.outgoing.forAll((function(n,i){n.forAll((function(n){t.push(new r(e.id,n.id,i))}))}))},t.prototype.isLeaf=function(){return 0===this.children.count()},t.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},t.prototype.isPredefined=function(){return void 0!==this.definition},t}();function a(t,e){var n={};for(var r in t)r in e&&(n[r]=t[r]);return n}e.Module=o;var u=function(){function t(){this.table={}}return t.prototype.count=function(){return Object.keys(this.table).length},t.prototype.intersection=function(e){var n=new t;return n.table=a(this.table,e.table),n},t.prototype.intersectionCount=function(t){return this.intersection(t).count()},t.prototype.contains=function(t){return t in this.table},t.prototype.add=function(t){this.table[t.id]=t},t.prototype.remove=function(t){delete this.table[t.id]},t.prototype.forAll=function(t){for(var e in this.table)t(this.table[e])},t.prototype.modules=function(){var t=[];return this.forAll((function(e){e.isPredefined()||t.push(e)})),t},t}();e.ModuleSet=u;var s=function(){function t(){this.sets={},this.n=0}return t.prototype.count=function(){return this.n},t.prototype.contains=function(t){var e=!1;return this.forAllModules((function(n){e||n.id!=t||(e=!0)})),e},t.prototype.add=function(t,e){(t in this.sets?this.sets[t]:this.sets[t]=new u).add(e),++this.n},t.prototype.remove=function(t,e){var n=this.sets[t];n.remove(e),0===n.count()&&delete this.sets[t],--this.n},t.prototype.forAll=function(t){for(var e in this.sets)t(this.sets[e],Number(e))},t.prototype.forAllModules=function(t){this.forAll((function(e,n){return e.forAll(t)}))},t.prototype.intersection=function(e){var n=new t;return this.forAll((function(t,r){if(r in e.sets){var i=t.intersection(e.sets[r]),o=i.count();o>0&&(n.sets[r]=i,n.n+=o)}})),n},t}();e.LinkSets=s,e.getGroups=function(t,e,n,r){for(var o=t.length,a=new i(o,e,n,r);a.greedyMerge(););var u=[],s=a.getGroupHierarchy(u);return u.forEach((function(e){var n=function(n){var r=e[n];"number"==typeof r&&(e[n]=t[r])};n("source"),n("target")})),{groups:s,powerEdges:u}}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this.findIter=function(t){for(var e=this._root,n=this.iterator();null!==e;){var r=this._comparator(t,e.data);if(0===r)return n._cursor=e,n;n._ancestors.push(e),e=e.get_child(r>0)}return null}}return t.prototype.clear=function(){this._root=null,this.size=0},t.prototype.find=function(t){for(var e=this._root;null!==e;){var n=this._comparator(t,e.data);if(0===n)return e.data;e=e.get_child(n>0)}return null},t.prototype.lowerBound=function(t){return this._bound(t,this._comparator)},t.prototype.upperBound=function(t){var e=this._comparator;return this._bound(t,(function(t,n){return e(n,t)}))},t.prototype.min=function(){var t=this._root;if(null===t)return null;for(;null!==t.left;)t=t.left;return t.data},t.prototype.max=function(){var t=this._root;if(null===t)return null;for(;null!==t.right;)t=t.right;return t.data},t.prototype.iterator=function(){return new a(this)},t.prototype.each=function(t){for(var e,n=this.iterator();null!==(e=n.next());)t(e)},t.prototype.reach=function(t){for(var e,n=this.iterator();null!==(e=n.prev());)t(e)},t.prototype._bound=function(t,e){for(var n=this._root,r=this.iterator();null!==n;){var i=this._comparator(t,n.data);if(0===i)return r._cursor=n,r;r._ancestors.push(n),n=n.get_child(i>0)}for(var o=r._ancestors.length-1;o>=0;--o)if(e(t,(n=r._ancestors[o]).data)>0)return r._cursor=n,r._ancestors.length=o,r;return r._ancestors.length=0,r},t}();e.TreeBase=o;var a=function(){function t(t){this._tree=t,this._ancestors=[],this._cursor=null}return t.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},t.prototype.next=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._minNode(t)}else{var e;if(null===this._cursor.right)do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===e);else this._ancestors.push(this._cursor),this._minNode(this._cursor.right)}return null!==this._cursor?this._cursor.data:null},t.prototype.prev=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._maxNode(t)}else{var e;if(null===this._cursor.left)do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===e);else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left)}return null!==this._cursor?this._cursor.data:null},t.prototype._minNode=function(t){for(;null!==t.left;)this._ancestors.push(t),t=t.left;this._cursor=t},t.prototype._maxNode=function(t){for(;null!==t.right;)this._ancestors.push(t),t=t.right;this._cursor=t},t}();e.Iterator=a;var u=function(){function t(t){this.data=t,this.left=null,this.right=null,this.red=!0}return t.prototype.get_child=function(t){return t?this.right:this.left},t.prototype.set_child=function(t,e){t?this.right=e:this.left=e},t}(),s=function(t){function e(e){var n=t.call(this)||this;return n._root=null,n._comparator=e,n.size=0,n}return i(e,t),e.prototype.insert=function(t){var n=!1;if(null===this._root)this._root=new u(t),n=!0,this.size++;else{var r=new u(void 0),i=!1,o=!1,a=null,s=r,c=null,f=this._root;for(s.right=this._root;;){if(null===f?(f=new u(t),c.set_child(i,f),n=!0,this.size++):e.is_red(f.left)&&e.is_red(f.right)&&(f.red=!0,f.left.red=!1,f.right.red=!1),e.is_red(f)&&e.is_red(c)){var l=s.right===a;f===c.get_child(o)?s.set_child(l,e.single_rotate(a,!o)):s.set_child(l,e.double_rotate(a,!o))}var h=this._comparator(f.data,t);if(0===h)break;o=i,i=h<0,null!==a&&(s=a),a=c,c=f,f=f.get_child(i)}this._root=r.right}return this._root.red=!1,n},e.prototype.remove=function(t){if(null===this._root)return!1;var n=new u(void 0),r=n;r.right=this._root;for(var i=null,o=null,a=null,s=!0;null!==r.get_child(s);){var c=s;o=i,i=r,r=r.get_child(s);var f=this._comparator(t,r.data);if(s=f>0,0===f&&(a=r),!e.is_red(r)&&!e.is_red(r.get_child(s)))if(e.is_red(r.get_child(!s))){var l=e.single_rotate(r,s);i.set_child(c,l),i=l}else if(!e.is_red(r.get_child(!s))){var h=i.get_child(!c);if(null!==h)if(e.is_red(h.get_child(!c))||e.is_red(h.get_child(c))){var d=o.right===i;e.is_red(h.get_child(c))?o.set_child(d,e.double_rotate(i,c)):e.is_red(h.get_child(!c))&&o.set_child(d,e.single_rotate(i,c));var p=o.get_child(d);p.red=!0,r.red=!0,p.left.red=!1,p.right.red=!1}else i.red=!1,h.red=!0,r.red=!0}}return null!==a&&(a.data=r.data,i.set_child(i.right===r,r.get_child(null===r.left)),this.size--),this._root=n.right,null!==this._root&&(this._root.red=!1),null!==a},e.is_red=function(t){return null!==t&&t.red},e.single_rotate=function(t,e){var n=t.get_child(!e);return t.set_child(!e,n.get_child(e)),n.set_child(e,t),t.red=!0,n.red=!1,n},e.double_rotate=function(t,n){return t.set_child(!n,e.single_rotate(t.get_child(!n),!n)),e.single_rotate(t,n)},e}(o);e.RBTree=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.elem=t,this.subheaps=[]}return t.prototype.toString=function(t){for(var e="",n=!1,r=0;r<this.subheaps.length;++r){var i=this.subheaps[r];i.elem?(n&&(e+=","),e+=i.toString(t),n=!0):n=!1}return""!==e&&(e="("+e+")"),(this.elem?t(this.elem):"")+e},t.prototype.forEach=function(t){this.empty()||(t(this.elem,this),this.subheaps.forEach((function(e){return e.forEach(t)})))},t.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce((function(t,e){return t+e.count()}),0)},t.prototype.min=function(){return this.elem},t.prototype.empty=function(){return null==this.elem},t.prototype.contains=function(t){if(this===t)return!0;for(var e=0;e<this.subheaps.length;e++)if(this.subheaps[e].contains(t))return!0;return!1},t.prototype.isHeap=function(t){var e=this;return this.subheaps.every((function(n){return t(e.elem,n.elem)&&n.isHeap(t)}))},t.prototype.insert=function(e,n){return this.merge(new t(e),n)},t.prototype.merge=function(t,e){return this.empty()?t:t.empty()?this:e(this.elem,t.elem)?(this.subheaps.push(t),this):(t.subheaps.push(this),t)},t.prototype.removeMin=function(t){return this.empty()?null:this.mergePairs(t)},t.prototype.mergePairs=function(e){if(0==this.subheaps.length)return new t(null);if(1==this.subheaps.length)return this.subheaps[0];var n=this.subheaps.pop().merge(this.subheaps.pop(),e),r=this.mergePairs(e);return n.merge(r,e)},t.prototype.decreaseKey=function(e,n,r,i){var o=e.removeMin(i);e.elem=o.elem,e.subheaps=o.subheaps,null!==r&&null!==o.elem&&r(e.elem,e);var a=new t(n);return null!==r&&r(n,a),this.merge(a,i)},t}();e.PairingHeap=r;var i=function(){function t(t){this.lessThan=t}return t.prototype.top=function(){return this.empty()?null:this.root.elem},t.prototype.push=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var i,o=0;i=e[o];++o)t=new r(i),this.root=this.empty()?t:this.root.merge(t,this.lessThan);return t},t.prototype.empty=function(){return!this.root||!this.root.elem},t.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},t.prototype.forEach=function(t){this.root.forEach(t)},t.prototype.pop=function(){if(this.empty())return null;var t=this.root.min();return this.root=this.root.removeMin(this.lessThan),t},t.prototype.reduceKey=function(t,e,n){void 0===n&&(n=null),this.root=this.root.decreaseKey(t,e,n,this.lessThan)},t.prototype.toString=function(t){return this.root.toString(t)},t.prototype.count=function(){return this.root.count()},t}();e.PriorityQueue=i},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(7),a=function(){};e.Point=a;var u=function(t,e,n,r){this.x1=t,this.y1=e,this.x2=n,this.y2=r};e.LineSegment=u;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a);function c(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)}function f(t,e,n){return c(t,e,n)>0}function l(t,e,n){return c(t,e,n)<0}function h(t,e){var n,r,i,o,a=e.length-1;if(l(t,e[1],e[0])&&!f(t,e[a-1],e[0]))return 0;for(n=0,r=a;;){if(r-n==1)return f(t,e[n],e[r])?n:r;if((o=l(t,e[(i=Math.floor((n+r)/2))+1],e[i]))&&!f(t,e[i-1],e[i]))return i;f(t,e[n+1],e[n])?o||f(t,e[n],e[i])?r=i:n=i:o&&l(t,e[n],e[i])?r=i:n=i}}function d(t,e){var n,r,i,o,a=e.length-1;if(f(t,e[a-1],e[0])&&!l(t,e[1],e[0]))return 0;for(n=0,r=a;;){if(r-n==1)return l(t,e[n],e[r])?n:r;if(o=l(t,e[(i=Math.floor((n+r)/2))+1],e[i]),f(t,e[i-1],e[i])&&!o)return i;l(t,e[n+1],e[n])?o?l(t,e[n],e[i])?r=i:n=i:r=i:o?n=i:f(t,e[n],e[i])?r=i:n=i}}function p(t,e,n,r,i,o){var a,u;u=r(t[a=n(e[0],t)],e);for(var s=!1;!s;){for(s=!0;a===t.length-1&&(a=0),!i(e[u],t[a],t[a+1]);)++a;for(;0===u&&(u=e.length-1),!o(t[a],e[u],e[u-1]);)--u,s=!1}return{t1:a,t2:u}}function v(t,e){return p(t,e,h,d,f,l)}e.PolyPoint=s,e.isLeft=c,e.ConvexHull=function(t){var e,n=t.slice(0).sort((function(t,e){return t.x!==e.x?e.x-t.x:e.y-t.y})),r=t.length,i=n[0].x;for(e=1;e<r&&n[e].x===i;++e);var o=e-1,a=[];if(a.push(n[0]),o===r-1)n[o].y!==n[0].y&&a.push(n[o]);else{var u,s=r-1,f=n[r-1].x;for(e=r-2;e>=0&&n[e].x===f;e--);for(u=e+1,e=o;++e<=u;)if(!(c(n[0],n[u],n[e])>=0&&e<u)){for(;a.length>1&&!(c(a[a.length-2],a[a.length-1],n[e])>0);)a.length-=1;0!=e&&a.push(n[e])}s!=u&&a.push(n[s]);var l=a.length;for(e=u;--e>=o;)if(!(c(n[s],n[o],n[e])>=0&&e>o)){for(;a.length>l&&!(c(a[a.length-2],a[a.length-1],n[e])>0);)a.length-=1;0!=e&&a.push(n[e])}}return a},e.clockwiseRadialSweep=function(t,e,n){e.slice(0).sort((function(e,n){return Math.atan2(e.y-t.y,e.x-t.x)-Math.atan2(n.y-t.y,n.x-t.x)})).forEach(n)},e.tangent_PolyPolyC=p,e.LRtangent_PolyPolyC=function(t,e){var n=v(e,t);return{t1:n.t2,t2:n.t1}},e.RLtangent_PolyPolyC=v,e.LLtangent_PolyPolyC=function(t,e){return p(t,e,d,d,l,l)},e.RRtangent_PolyPolyC=function(t,e){return p(t,e,h,h,f,f)};var y=function(t,e){this.t1=t,this.t2=e};e.BiTangent=y;var m=function(){};e.BiTangents=m;var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a);e.TVGPoint=g;var b=function(t,e,n,r){this.id=t,this.polyid=e,this.polyvertid=n,this.p=r,r.vv=this};e.VisibilityVertex=b;var _=function(){function t(t,e){this.source=t,this.target=e}return t.prototype.length=function(){var t=this.source.p.x-this.target.p.x,e=this.source.p.y-this.target.p.y;return Math.sqrt(t*t+e*e)},t}();e.VisibilityEdge=_;var k=function(){function t(t,e){if(this.P=t,this.V=[],this.E=[],e)this.V=e.V.slice(0),this.E=e.E.slice(0);else{for(var n=t.length,r=0;r<n;r++){for(var i=t[r],o=0;o<i.length;++o){var a=i[o],u=new b(this.V.length,r,o,a);this.V.push(u),o>0&&this.E.push(new _(i[o-1].vv,u))}i.length>1&&this.E.push(new _(i[0].vv,i[i.length-1].vv))}for(r=0;r<n-1;r++){var s=t[r];for(o=r+1;o<n;o++){var c=t[o],f=w(s,c);for(var l in f){var h=f[l],d=s[h.t1],p=c[h.t2];this.addEdgeIfVisible(d,p,r,o)}}}}}return t.prototype.addEdgeIfVisible=function(t,e,n,r){this.intersectsPolys(new u(t.x,t.y,e.x,e.y),n,r)||this.E.push(new _(t.vv,e.vv))},t.prototype.addPoint=function(t,e){var n,r,i,o=this.P.length;this.V.push(new b(this.V.length,o,0,t));for(var a=0;a<o;++a)if(a!==e){var u=this.P[a],s=(n=t,i=void 0,(i=(r=u).slice(0)).push(r[0]),{rtan:h(n,i),ltan:d(n,i)});this.addEdgeIfVisible(t,u[s.ltan],e,a),this.addEdgeIfVisible(t,u[s.rtan],e,a)}return t.vv},t.prototype.intersectsPolys=function(t,e,n){for(var r=0,i=this.P.length;r<i;++r)if(r!=e&&r!=n&&x(t,this.P[r]).length>0)return!0;return!1},t}();function x(t,e){for(var n=[],r=1,i=e.length;r<i;++r){var a=o.Rectangle.lineIntersection(t.x1,t.y1,t.x2,t.y2,e[r-1].x,e[r-1].y,e[r].x,e[r].y);a&&n.push(a)}return n}function w(t,e){for(var n=t.length-1,r=e.length-1,i=new m,o=0;o<n;++o)for(var a=0;a<r;++a){var u=t[0==o?n-1:o-1],s=t[o],f=t[o+1],l=e[0==a?r-1:a-1],h=e[a],d=e[a+1],p=c(u,s,h),v=c(s,l,h),g=c(s,h,d),b=c(l,h,s),_=c(h,u,s),k=c(h,s,f);p>=0&&v>=0&&g<0&&b>=0&&_>=0&&k<0?i.ll=new y(o,a):p<=0&&v<=0&&g>0&&b<=0&&_<=0&&k>0?i.rr=new y(o,a):p<=0&&v>0&&g<=0&&b>=0&&_<0&&k>=0?i.rl=new y(o,a):p>=0&&v<0&&g>=0&&b<=0&&_>0&&k<=0&&(i.lr=new y(o,a))}return i}function E(t,e){return!t.every((function(t){return!function(t,e){for(var n=1,r=e.length;n<r;++n)if(l(e[n-1],e[n],t))return!1;return!0}(t,e)}))}e.TangentVisibilityGraph=k,e.tangents=w,e.polysOverlap=function(t,e){if(E(t,e))return!0;if(E(e,t))return!0;for(var n=1,r=t.length;n<r;++n){var i=t[n],o=t[n-1];if(x(new u(o.x,o.y,i.x,i.y),e).length>0)return!0}return!1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=10,i=(1+Math.sqrt(5))/2,o=1e-4;e.applyPacking=function(t,e,n,a,u,s){void 0===u&&(u=1),void 0===s&&(s=!0);var c=e,f=n,l=(u=void 0!==u?u:1,a=void 0!==a?a:0,0),h=0,d=0,p=0,v=[];function y(t,e){v=[],l=0,h=0,p=0;for(var n=0;n<t.length;n++){m(t[n],e)}return Math.abs(l/h-u)}function m(t,e){for(var n=void 0,i=0;i<v.length;i++)if(v[i].space_left>=t.height&&v[i].x+v[i].width+t.width+r-e<=o){n=v[i];break}v.push(t),void 0!==n?(t.x=n.x+n.width+r,t.y=n.bottom,t.space_left=t.height,t.bottom=t.y,n.space_left-=t.height+r,n.bottom+=t.height+r):(t.y=p,p+=t.height+r,t.x=0,t.bottom=t.y,t.space_left=t.height),t.y+t.height-h>-o&&(h=t.y+t.height-0),t.x+t.width-l>-o&&(l=t.x+t.width-0)}0!=t.length&&(function(t){t.forEach((function(t){var e,n,r,i,o;e=t,n=Number.MAX_VALUE,r=Number.MAX_VALUE,i=0,o=0,e.array.forEach((function(t){var e=void 0!==t.width?t.width:a,u=void 0!==t.height?t.height:a;e/=2,u/=2,i=Math.max(t.x+e,i),n=Math.min(t.x-e,n),o=Math.max(t.y+u,o),r=Math.min(t.y-u,r)})),e.width=i-n,e.height=o-r}))}(t),function(t,e){var n=Number.POSITIVE_INFINITY,a=0;t.sort((function(t,e){return e.height-t.height})),d=t.reduce((function(t,e){return t.width<e.width?t.width:e.width}));var u=m=d,s=g=function(t){var e=0;return t.forEach((function(t){return e+=t.width+r})),e}(t),c=0,f=Number.MAX_VALUE,l=Number.MAX_VALUE,h=-1,p=Number.MAX_VALUE,v=Number.MAX_VALUE;for(;p>d||v>o;){if(1!=h){var m=s-(s-u)/i;f=y(t,m)}if(0!=h){var g=u+(s-u)/i;l=y(t,g)}if(p=Math.abs(m-g),v=Math.abs(f-l),f<n&&(n=f,a=m),l<n&&(n=l,a=g),f>l?(u=m,m=g,f=l,h=1):(s=g,g=m,l=f,h=0),c++>100)break}y(t,a)}(t),s&&function(t){t.forEach((function(t){var e={x:0,y:0};t.array.forEach((function(t){e.x+=t.x,e.y+=t.y})),e.x/=t.array.length,e.y/=t.array.length;var n=e.x-t.width/2,r=e.y-t.height/2,i=t.x-n+c/2-l/2,o=t.y-r+f/2-h/2;t.array.forEach((function(t){t.x+=i,t.y+=o}))}))}(t))},e.separateGraphs=function(t,e){for(var n={},r={},i=[],o=0,a=0;a<e.length;a++){var u=e[a],s=u.source,c=u.target;r[s.index]?r[s.index].push(c):r[s.index]=[c],r[c.index]?r[c.index].push(s):r[c.index]=[s]}for(a=0;a<t.length;a++){var f=t[a];n[f.index]||l(f,!0)}function l(t,e){if(void 0===n[t.index]){e&&(o++,i.push({array:[]})),n[t.index]=o,i[o-1].array.push(t);var a=r[t.index];if(a)for(var u=0;u<a.length;u++)l(a[u],!1)}}return i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),i=n(14),o=n(9),a=function(t,e,n){this.id=t,this.rect=e,this.children=n,this.leaf=void 0===n||0===n.length};e.NodeWrapper=a;var u=function(t,e,n,r,i){void 0===r&&(r=null),void 0===i&&(i=null),this.id=t,this.x=e,this.y=n,this.node=r,this.line=i};e.Vert=u;var s=function(){function t(e,n){this.s=e,this.t=n;var r=t.findMatch(e,n),i=n.slice(0).reverse(),o=t.findMatch(e,i);r.length>=o.length?(this.length=r.length,this.si=r.si,this.ti=r.ti,this.reversed=!1):(this.length=o.length,this.si=o.si,this.ti=n.length-o.ti-o.length,this.reversed=!0)}return t.findMatch=function(t,e){for(var n=t.length,r=e.length,i={length:0,si:-1,ti:-1},o=new Array(n),a=0;a<n;a++){o[a]=new Array(r);for(var u=0;u<r;u++)if(t[a]===e[u]){var s=o[a][u]=0===a||0===u?1:o[a-1][u-1]+1;s>i.length&&(i.length=s,i.si=a-s+1,i.ti=u-s+1)}else o[a][u]=0}return i},t.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},t}();e.LongestCommonSubsequence=s;var c=function(){function t(t,e,n){var i=this;void 0===n&&(n=12),this.originalnodes=t,this.groupPadding=n,this.leaves=null,this.nodes=t.map((function(t,n){return new a(n,e.getBounds(t),e.getChildren(t))})),this.leaves=this.nodes.filter((function(t){return t.leaf})),this.groups=this.nodes.filter((function(t){return!t.leaf})),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach((function(t){return t.children.forEach((function(e){return i.nodes[e].parent=t}))})),this.root={children:[]},this.nodes.forEach((function(t){void 0===t.parent&&(t.parent=i.root,i.root.children.push(t.id)),t.ports=[]})),this.backToFront=this.nodes.slice(0),this.backToFront.sort((function(t,e){return i.getDepth(t)-i.getDepth(e)})),this.backToFront.slice(0).reverse().filter((function(t){return!t.leaf})).forEach((function(t){var e=r.Rectangle.empty();t.children.forEach((function(t){return e=e.union(i.nodes[t].rect)})),t.rect=e.inflate(i.groupPadding)}));var o=this.midPoints(this.cols.map((function(t){return t.pos}))),s=this.midPoints(this.rows.map((function(t){return t.pos}))),c=o[0],f=o[o.length-1],l=s[0],h=s[s.length-1],d=this.rows.map((function(t){return{x1:c,x2:f,y1:t.pos,y2:t.pos}})).concat(s.map((function(t){return{x1:c,x2:f,y1:t,y2:t}}))),p=this.cols.map((function(t){return{x1:t.pos,x2:t.pos,y1:l,y2:h}})).concat(o.map((function(t){return{x1:t,x2:t,y1:l,y2:h}}))),v=d.concat(p);v.forEach((function(t){return t.verts=[]})),this.verts=[],this.edges=[],d.forEach((function(t){return p.forEach((function(e){var n=new u(i.verts.length,e.x1,t.y1);t.verts.push(n),e.verts.push(n),i.verts.push(n);for(var r=i.backToFront.length;r-- >0;){var o=i.backToFront[r],a=o.rect,s=Math.abs(n.x-a.cx()),c=Math.abs(n.y-a.cy());if(s<a.width()/2&&c<a.height()/2){n.node=o;break}}}))})),v.forEach((function(t,e){i.nodes.forEach((function(e,n){e.rect.lineIntersections(t.x1,t.y1,t.x2,t.y2).forEach((function(n,r){var o=new u(i.verts.length,n.x,n.y,e,t);i.verts.push(o),t.verts.push(o),e.ports.push(o)}))}));var n=Math.abs(t.y1-t.y2)<.1,r=function(t,e){return n?e.x-t.x:e.y-t.y};t.verts.sort(r);for(var o=1;o<t.verts.length;o++){var a=t.verts[o-1],s=t.verts[o];a.node&&a.node===s.node&&a.node.leaf||i.edges.push({source:a.id,target:s.id,length:Math.abs(r(a,s))})}}))}return t.prototype.avg=function(t){return t.reduce((function(t,e){return t+e}))/t.length},t.prototype.getGridLines=function(t){for(var e=[],n=this.leaves.slice(0,this.leaves.length);n.length>0;){var r=n.filter((function(e){return e.rect["overlap"+t.toUpperCase()](n[0].rect)})),i={nodes:r,pos:this.avg(r.map((function(e){return e.rect["c"+t]()})))};e.push(i),i.nodes.forEach((function(t){return n.splice(n.indexOf(t),1)}))}return e.sort((function(t,e){return t.pos-e.pos})),e},t.prototype.getDepth=function(t){for(var e=0;t.parent!==this.root;)e++,t=t.parent;return e},t.prototype.midPoints=function(t){for(var e=t[1]-t[0],n=[t[0]-e/2],r=1;r<t.length;r++)n.push((t[r]+t[r-1])/2);return n.push(t[t.length-1]+e/2),n},t.prototype.findLineage=function(t){var e=[t];do{t=t.parent,e.push(t)}while(t!==this.root);return e.reverse()},t.prototype.findAncestorPathBetween=function(t,e){for(var n=this.findLineage(t),r=this.findLineage(e),i=0;n[i]===r[i];)i++;return{commonAncestor:n[i-1],lineages:n.slice(i).concat(r.slice(i))}},t.prototype.siblingObstacles=function(t,e){var n=this,r=this.findAncestorPathBetween(t,e),i={};r.lineages.forEach((function(t){return i[t.id]={}}));var o=r.commonAncestor.children.filter((function(t){return!(t in i)}));return r.lineages.filter((function(t){return t.parent!==r.commonAncestor})).forEach((function(t){return o=o.concat(t.parent.children.filter((function(e){return e!==t.id})))})),o.map((function(t){return n.nodes[t]}))},t.getSegmentSets=function(t,e,n){for(var r=[],i=0;i<t.length;i++)for(var o=t[i],a=0;a<o.length;a++){(l=o[a]).edgeid=i,l.i=a;var u=l[1][e]-l[0][e];Math.abs(u)<.1&&r.push(l)}r.sort((function(t,n){return t[0][e]-n[0][e]}));for(var s=[],c=null,f=0;f<r.length;f++){var l=r[f];(!c||Math.abs(l[0][e]-c.pos)>.1)&&(c={pos:l[0][e],segments:[]},s.push(c)),c.segments.push(l)}return s},t.nudgeSegs=function(t,e,n,r,o,a){var u=r.length;if(!(u<=1)){for(var s=r.map((function(e){return new i.Variable(e[0][t])})),c=[],f=0;f<u;f++)for(var l=0;l<u;l++)if(f!==l){var h=r[f],d=r[l],p=h.edgeid,v=d.edgeid,y=-1,m=-1;"x"==t?o(p,v)&&(h[0][e]<h[1][e]?(y=l,m=f):(y=f,m=l)):o(p,v)&&(h[0][e]<h[1][e]?(y=f,m=l):(y=l,m=f)),y>=0&&c.push(new i.Constraint(s[y],s[m],a))}new i.Solver(s,c).solve(),s.forEach((function(e,i){var o=r[i],a=e.position();o[0][t]=o[1][t]=a;var u=n[o.edgeid];o.i>0&&(u[o.i-1][1][t]=a),o.i<u.length-1&&(u[o.i+1][0][t]=a)}))}},t.nudgeSegments=function(e,n,r,i,o){for(var a=t.getSegmentSets(e,n,r),u=0;u<a.length;u++){for(var s=a[u],c=[],f=0;f<s.segments.length;f++){var l=s.segments[f];c.push({type:0,s:l,pos:Math.min(l[0][r],l[1][r])}),c.push({type:1,s:l,pos:Math.max(l[0][r],l[1][r])})}c.sort((function(t,e){return t.pos-e.pos+t.type-e.type}));var h=[],d=0;c.forEach((function(a){0===a.type?(h.push(a.s),d++):d--,0==d&&(t.nudgeSegs(n,r,e,h,i,o),h=[])}))}},t.prototype.routeEdges=function(e,n,r,i){var o=this,a=e.map((function(t){return o.route(r(t),i(t))})),u=t.orderEdges(a),s=a.map((function(e){return t.makeSegments(e)}));return t.nudgeSegments(s,"x","y",u,n),t.nudgeSegments(s,"y","x",u,n),t.unreverseEdges(s,a),s},t.unreverseEdges=function(t,e){t.forEach((function(t,n){e[n].reversed&&(t.reverse(),t.forEach((function(t){t.reverse()})))}))},t.angleBetween2Lines=function(t,e){var n=Math.atan2(t[0].y-t[1].y,t[0].x-t[1].x),r=Math.atan2(e[0].y-e[1].y,e[0].x-e[1].x),i=n-r;return(i>Math.PI||i<-Math.PI)&&(i=r-n),i},t.isLeft=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)<=0},t.getOrder=function(t){for(var e={},n=0;n<t.length;n++){var r=t[n];void 0===e[r.l]&&(e[r.l]={}),e[r.l][r.r]=!0}return function(t,n){return void 0!==e[t]&&e[t][n]}},t.orderEdges=function(e){for(var n=[],r=0;r<e.length-1;r++)for(var i=r+1;i<e.length;i++){var o,a,u,c=e[r],f=e[i],l=new s(c,f);0!==l.length&&(l.reversed&&(f.reverse(),f.reversed=!0,l=new s(c,f)),(l.si<=0||l.ti<=0)&&(l.si+l.length>=c.length||l.ti+l.length>=f.length)?n.push({l:r,r:i}):(l.si+l.length>=c.length||l.ti+l.length>=f.length?(o=c[l.si+1],u=c[l.si-1],a=f[l.ti-1]):(o=c[l.si+l.length-2],a=c[l.si+l.length],u=f[l.ti+l.length]),t.isLeft(o,a,u)?n.push({l:i,r:r}):n.push({l:r,r:i})))}return t.getOrder(n)},t.makeSegments=function(t){function e(t){return{x:t.x,y:t.y}}for(var n=function(t,e,n){return Math.abs((e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x))<.001},r=[],i=e(t[0]),o=1;o<t.length;o++){var a=e(t[o]),u=o<t.length-1?t[o+1]:null;u&&n(i,a,u)||(r.push([i,a]),i=a)}return r},t.prototype.route=function(t,e){var n=this,r=this.nodes[t],i=this.nodes[e];this.obstacles=this.siblingObstacles(r,i);var a={};this.obstacles.forEach((function(t){return a[t.id]=t})),this.passableEdges=this.edges.filter((function(t){var e=n.verts[t.source],r=n.verts[t.target];return!(e.node&&e.node.id in a||r.node&&r.node.id in a)}));for(var u=1;u<r.ports.length;u++){var s=r.ports[0].id,c=r.ports[u].id;this.passableEdges.push({source:s,target:c,length:0})}for(u=1;u<i.ports.length;u++){s=i.ports[0].id,c=i.ports[u].id;this.passableEdges.push({source:s,target:c,length:0})}var f=new o.Calculator(this.verts.length,this.passableEdges,(function(t){return t.source}),(function(t){return t.target}),(function(t){return t.length})).PathFromNodeToNodeWithPrevCost(r.ports[0].id,i.ports[0].id,(function(t,e,o){var a=n.verts[t],u=n.verts[e],s=n.verts[o],c=Math.abs(s.x-a.x),f=Math.abs(s.y-a.y);return a.node===r&&a.node===u.node||u.node===i&&u.node===s.node?0:c>1&&f>1?1e3:0})).reverse().map((function(t){return n.verts[t]}));return f.push(this.nodes[i.id].ports[0]),f.filter((function(t,e){return!(e<f.length-1&&f[e+1].node===r&&t.node===r||e>0&&t.node===i&&f[e-1].node===i)}))},t.getRoutePath=function(e,n,r,i){var o={routepath:"M "+e[0][0].x+" "+e[0][0].y+" ",arrowpath:""};if(e.length>1)for(var a=0;a<e.length;a++){var u=(_=e[a])[1].x,s=_[1].y,c=u-_[0].x,f=s-_[0].y;if(a<e.length-1){Math.abs(c)>0?u-=c/Math.abs(c)*n:s-=f/Math.abs(f)*n,o.routepath+="L "+u+" "+s+" ";var l=e[a+1],h=l[0].x,d=l[0].y;c=l[1].x-h,f=l[1].y-d;var p,v,y=t.angleBetween2Lines(_,l)<0?1:0;Math.abs(c)>0?(p=h+c/Math.abs(c)*n,v=d):(p=h,v=d+f/Math.abs(f)*n);var m=Math.abs(p-u),g=Math.abs(v-s);o.routepath+="A "+m+" "+g+" 0 0 "+y+" "+p+" "+v+" "}else{var b=[u,s];Math.abs(c)>0?(k=[u-=c/Math.abs(c)*i,s+r],x=[u,s-r]):(k=[u+r,s-=f/Math.abs(f)*i],x=[u-r,s]),o.routepath+="L "+u+" "+s+" ",i>0&&(o.arrowpath="M "+b[0]+" "+b[1]+" L "+k[0]+" "+k[1]+" L "+x[0]+" "+x[1])}}else{var _,k,x;u=(_=e[0])[1].x,s=_[1].y,c=u-_[0].x,f=s-_[0].y,b=[u,s];Math.abs(c)>0?(k=[u-=c/Math.abs(c)*i,s+r],x=[u,s-r]):(k=[u+r,s-=f/Math.abs(f)*i],x=[u-r,s]),o.routepath+="L "+u+" "+s+" ",i>0&&(o.arrowpath="M "+b[0]+" "+b[1]+" L "+k[0]+" "+k[1]+" L "+x[0]+" "+x[1])}return o},t}();e.GridRouter=c},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(29)),r(n(30)),r(n(13)),r(n(19)),r(n(21)),r(n(20)),r(n(6)),r(n(33)),r(n(12)),r(n(16)),r(n(18)),r(n(17)),r(n(7)),r(n(9)),r(n(14)),r(n(34))},function(t,e,n){(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){"use strict";var n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};var o=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t,e){!function(){var r="object"==("undefined"==typeof self?"undefined":i(self))&&self.self===self&&self||"object"==i(n)&&n.global===n&&n||this||{},o=r._,a=Array.prototype,u=Object.prototype,s="undefined"!=typeof Symbol?Symbol.prototype:null,c=a.push,f=a.slice,l=u.toString,h=u.hasOwnProperty,d=Array.isArray,p=Object.keys,v=Object.create,y=function(){},m=function t(e){return e instanceof t?e:this instanceof t?void(this._wrapped=e):new t(e)};e.nodeType?r._=m:(!t.nodeType&&t.exports&&(e=t.exports=m),e._=m),m.VERSION="1.9.1";var g,b=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},_=function(t,e,n){return m.iteratee!==g?m.iteratee(t,e):null==t?m.identity:m.isFunction(t)?b(t,e,n):m.isObject(t)&&!m.isArray(t)?m.matcher(t):m.property(t)};m.iteratee=g=function(t,e){return _(t,e,1/0)};var k=function(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var o=Array(e+1);for(i=0;i<e;i++)o[i]=arguments[i];return o[e]=r,t.apply(this,o)}},x=function(t){if(!m.isObject(t))return{};if(v)return v(t);y.prototype=t;var e=new y;return y.prototype=null,e},w=function(t){return function(e){return null==e?void 0:e[t]}},E=function(t,e){return null!=t&&h.call(t,e)},O=function(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0},j=Math.pow(2,53)-1,S=w("length"),M=function(t){var e=S(t);return"number"==typeof e&&e>=0&&e<=j};m.each=m.forEach=function(t,e,n){var r,i;if(e=b(e,n),M(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=m.keys(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},m.map=m.collect=function(t,e,n){e=_(e,n);for(var r=!M(t)&&m.keys(t),i=(r||t).length,o=Array(i),a=0;a<i;a++){var u=r?r[a]:a;o[a]=e(t[u],u,t)}return o};var A=function(t){var e=function(e,n,r,i){var o=!M(e)&&m.keys(e),a=(o||e).length,u=t>0?0:a-1;for(i||(r=e[o?o[u]:u],u+=t);u>=0&&u<a;u+=t){var s=o?o[u]:u;r=n(r,e[s],s,e)}return r};return function(t,n,r,i){var o=arguments.length>=3;return e(t,b(n,i,4),r,o)}};m.reduce=m.foldl=m.inject=A(1),m.reduceRight=m.foldr=A(-1),m.find=m.detect=function(t,e,n){var r=(M(t)?m.findIndex:m.findKey)(t,e,n);if(void 0!==r&&-1!==r)return t[r]},m.filter=m.select=function(t,e,n){var r=[];return e=_(e,n),m.each(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r},m.reject=function(t,e,n){return m.filter(t,m.negate(_(e)),n)},m.every=m.all=function(t,e,n){e=_(e,n);for(var r=!M(t)&&m.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0},m.some=m.any=function(t,e,n){e=_(e,n);for(var r=!M(t)&&m.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1},m.contains=m.includes=m.include=function(t,e,n,r){return M(t)||(t=m.values(t)),("number"!=typeof n||r)&&(n=0),m.indexOf(t,e,n)>=0},m.invoke=k((function(t,e,n){var r,i;return m.isFunction(e)?i=e:m.isArray(e)&&(r=e.slice(0,-1),e=e[e.length-1]),m.map(t,(function(t){var o=i;if(!o){if(r&&r.length&&(t=O(t,r)),null==t)return;o=t[e]}return null==o?o:o.apply(t,n)}))})),m.pluck=function(t,e){return m.map(t,m.property(e))},m.where=function(t,e){return m.filter(t,m.matcher(e))},m.findWhere=function(t,e){return m.find(t,m.matcher(e))},m.max=function(t,e,n){var r,o,a=-1/0,u=-1/0;if(null==e||"number"==typeof e&&"object"!=i(t[0])&&null!=t)for(var s=0,c=(t=M(t)?t:m.values(t)).length;s<c;s++)null!=(r=t[s])&&r>a&&(a=r);else e=_(e,n),m.each(t,(function(t,n,r){((o=e(t,n,r))>u||o===-1/0&&a===-1/0)&&(a=t,u=o)}));return a},m.min=function(t,e,n){var r,o,a=1/0,u=1/0;if(null==e||"number"==typeof e&&"object"!=i(t[0])&&null!=t)for(var s=0,c=(t=M(t)?t:m.values(t)).length;s<c;s++)null!=(r=t[s])&&r<a&&(a=r);else e=_(e,n),m.each(t,(function(t,n,r){((o=e(t,n,r))<u||o===1/0&&a===1/0)&&(a=t,u=o)}));return a},m.shuffle=function(t){return m.sample(t,1/0)},m.sample=function(t,e,n){if(null==e||n)return M(t)||(t=m.values(t)),t[m.random(t.length-1)];var r=M(t)?m.clone(t):m.values(t),i=S(r);e=Math.max(Math.min(e,i),0);for(var o=i-1,a=0;a<e;a++){var u=m.random(a,o),s=r[a];r[a]=r[u],r[u]=s}return r.slice(0,e)},m.sortBy=function(t,e,n){var r=0;return e=_(e,n),m.pluck(m.map(t,(function(t,n,i){return{value:t,index:r++,criteria:e(t,n,i)}})).sort((function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index})),"value")};var N=function(t,e){return function(n,r,i){var o=e?[[],[]]:{};return r=_(r,i),m.each(n,(function(e,i){var a=r(e,i,n);t(o,e,a)})),o}};m.groupBy=N((function(t,e,n){E(t,n)?t[n].push(e):t[n]=[e]})),m.indexBy=N((function(t,e,n){t[n]=e})),m.countBy=N((function(t,e,n){E(t,n)?t[n]++:t[n]=1}));var P=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;m.toArray=function(t){return t?m.isArray(t)?f.call(t):m.isString(t)?t.match(P):M(t)?m.map(t,m.identity):m.values(t):[]},m.size=function(t){return null==t?0:M(t)?t.length:m.keys(t).length},m.partition=N((function(t,e,n){t[n?0:1].push(e)}),!0),m.first=m.head=m.take=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[0]:m.initial(t,t.length-e)},m.initial=function(t,e,n){return f.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},m.last=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[t.length-1]:m.rest(t,Math.max(0,t.length-e))},m.rest=m.tail=m.drop=function(t,e,n){return f.call(t,null==e||n?1:e)},m.compact=function(t){return m.filter(t,Boolean)};var C=function t(e,n,r,i){for(var o=(i=i||[]).length,a=0,u=S(e);a<u;a++){var s=e[a];if(M(s)&&(m.isArray(s)||m.isArguments(s)))if(n)for(var c=0,f=s.length;c<f;)i[o++]=s[c++];else t(s,n,r,i),o=i.length;else r||(i[o++]=s)}return i};m.flatten=function(t,e){return C(t,e,!1)},m.without=k((function(t,e){return m.difference(t,e)})),m.uniq=m.unique=function(t,e,n,r){m.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=_(n,r));for(var i=[],o=[],a=0,u=S(t);a<u;a++){var s=t[a],c=n?n(s,a,t):s;e&&!n?(a&&o===c||i.push(s),o=c):n?m.contains(o,c)||(o.push(c),i.push(s)):m.contains(i,s)||i.push(s)}return i},m.union=k((function(t){return m.uniq(C(t,!0,!0))})),m.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=S(t);r<i;r++){var o=t[r];if(!m.contains(e,o)){var a;for(a=1;a<n&&m.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},m.difference=k((function(t,e){return e=C(e,!0,!0),m.filter(t,(function(t){return!m.contains(e,t)}))})),m.unzip=function(t){for(var e=t&&m.max(t,S).length||0,n=Array(e),r=0;r<e;r++)n[r]=m.pluck(t,r);return n},m.zip=k(m.unzip),m.object=function(t,e){for(var n={},r=0,i=S(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n};var I=function(t){return function(e,n,r){n=_(n,r);for(var i=S(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}};m.findIndex=I(1),m.findLastIndex=I(-1),m.sortedIndex=function(t,e,n,r){for(var i=(n=_(n,r,1))(e),o=0,a=S(t);o<a;){var u=Math.floor((o+a)/2);n(t[u])<i?o=u+1:a=u}return o};var L=function(t,e,n){return function(r,i,o){var a=0,u=S(r);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+u,a):u=o>=0?Math.min(o+1,u):o+u+1;else if(n&&o&&u)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=e(f.call(r,a,u),m.isNaN))>=0?o+a:-1;for(o=t>0?a:u-1;o>=0&&o<u;o+=t)if(r[o]===i)return o;return-1}};m.indexOf=L(1,m.findIndex,m.sortedIndex),m.lastIndexOf=L(-1,m.findLastIndex),m.range=function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i},m.chunk=function(t,e){if(null==e||e<1)return[];for(var n=[],r=0,i=t.length;r<i;)n.push(f.call(t,r,r+=e));return n};var D=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=x(t.prototype),a=t.apply(o,i);return m.isObject(a)?a:o};m.bind=k((function(t,e,n){if(!m.isFunction(t))throw new TypeError("Bind must be called on a function");var r=k((function(i){return D(t,r,e,this,n.concat(i))}));return r})),m.partial=k((function(t,e){var n=m.partial.placeholder;return function r(){for(var i=0,o=e.length,a=Array(o),u=0;u<o;u++)a[u]=e[u]===n?arguments[i++]:e[u];for(;i<arguments.length;)a.push(arguments[i++]);return D(t,r,this,this,a)}})),m.partial.placeholder=m,m.bindAll=k((function(t,e){var n=(e=C(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=m.bind(t[r],t)}})),m.memoize=function(t,e){var n=function n(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return E(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},m.delay=k((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),m.defer=m.partial(m.delay,m,1),m.throttle=function(t,e,n){var r,i,o,a,u=0;n||(n={});var s=function(){u=!1===n.leading?0:m.now(),r=null,a=t.apply(i,o),r||(i=o=null)},c=function(){var c=m.now();u||!1!==n.leading||(u=c);var f=e-(c-u);return i=this,o=arguments,f<=0||f>e?(r&&(clearTimeout(r),r=null),u=c,a=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(s,f)),a};return c.cancel=function(){clearTimeout(r),u=0,r=i=o=null},c},m.debounce=function(t,e,n){var r,i,o=function(e,n){r=null,n&&(i=t.apply(e,n))},a=k((function(a){if(r&&clearTimeout(r),n){var u=!r;r=setTimeout(o,e),u&&(i=t.apply(this,a))}else r=m.delay(o,e,this,a);return i}));return a.cancel=function(){clearTimeout(r),r=null},a},m.wrap=function(t,e){return m.partial(e,t)},m.negate=function(t){return function(){return!t.apply(this,arguments)}},m.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},m.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},m.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},m.once=m.partial(m.before,2),m.restArguments=k;var B=!{toString:null}.propertyIsEnumerable("toString"),T=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],z=function(t,e){var n=T.length,r=t.constructor,i=m.isFunction(r)&&r.prototype||u,o="constructor";for(E(t,o)&&!m.contains(e,o)&&e.push(o);n--;)(o=T[n])in t&&t[o]!==i[o]&&!m.contains(e,o)&&e.push(o)};m.keys=function(t){if(!m.isObject(t))return[];if(p)return p(t);var e=[];for(var n in t)E(t,n)&&e.push(n);return B&&z(t,e),e},m.allKeys=function(t){if(!m.isObject(t))return[];var e=[];for(var n in t)e.push(n);return B&&z(t,e),e},m.values=function(t){for(var e=m.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},m.mapObject=function(t,e,n){e=_(e,n);for(var r=m.keys(t),i=r.length,o={},a=0;a<i;a++){var u=r[a];o[u]=e(t[u],u,t)}return o},m.pairs=function(t){for(var e=m.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},m.invert=function(t){for(var e={},n=m.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},m.functions=m.methods=function(t){var e=[];for(var n in t)m.isFunction(t[n])&&e.push(n);return e.sort()};var R=function(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=t(o),u=a.length,s=0;s<u;s++){var c=a[s];e&&void 0!==n[c]||(n[c]=o[c])}return n}};m.extend=R(m.allKeys),m.extendOwn=m.assign=R(m.keys),m.findKey=function(t,e,n){e=_(e,n);for(var r,i=m.keys(t),o=0,a=i.length;o<a;o++)if(e(t[r=i[o]],r,t))return r};var F,G,V=function(t,e,n){return e in n};m.pick=k((function(t,e){var n={},r=e[0];if(null==t)return n;m.isFunction(r)?(e.length>1&&(r=b(r,e[1])),e=m.allKeys(t)):(r=V,e=C(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var a=e[i],u=t[a];r(u,a,t)&&(n[a]=u)}return n})),m.omit=k((function(t,e){var n,r=e[0];return m.isFunction(r)?(r=m.negate(r),e.length>1&&(n=e[1])):(e=m.map(C(e,!1,!1),String),r=function(t,n){return!m.contains(e,n)}),m.pick(t,r,n)})),m.defaults=R(m.allKeys,!0),m.create=function(t,e){var n=x(t);return e&&m.extendOwn(n,e),n},m.clone=function(t){return m.isObject(t)?m.isArray(t)?t.slice():m.extend({},t):t},m.tap=function(t,e){return e(t),t},m.isMatch=function(t,e){var n=m.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0},F=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var o=i(t);return("function"===o||"object"===o||"object"==i(e))&&G(t,e,n,r)},G=function(t,e,n,r){t instanceof m&&(t=t._wrapped),e instanceof m&&(e=e._wrapped);var o=l.call(t);if(o!==l.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return s.valueOf.call(t)===s.valueOf.call(e)}var a="[object Array]"===o;if(!a){if("object"!=i(t)||"object"!=i(e))return!1;var u=t.constructor,c=e.constructor;if(u!==c&&!(m.isFunction(u)&&u instanceof u&&m.isFunction(c)&&c instanceof c)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];for(var f=(n=n||[]).length;f--;)if(n[f]===t)return r[f]===e;if(n.push(t),r.push(e),a){if((f=t.length)!==e.length)return!1;for(;f--;)if(!F(t[f],e[f],n,r))return!1}else{var h,d=m.keys(t);if(f=d.length,m.keys(e).length!==f)return!1;for(;f--;)if(h=d[f],!E(e,h)||!F(t[h],e[h],n,r))return!1}return n.pop(),r.pop(),!0},m.isEqual=function(t,e){return F(t,e)},m.isEmpty=function(t){return null==t||(M(t)&&(m.isArray(t)||m.isString(t)||m.isArguments(t))?0===t.length:0===m.keys(t).length)},m.isElement=function(t){return!(!t||1!==t.nodeType)},m.isArray=d||function(t){return"[object Array]"===l.call(t)},m.isObject=function(t){var e=i(t);return"function"===e||"object"===e&&!!t},m.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],(function(t){m["is"+t]=function(e){return l.call(e)==="[object "+t+"]"}})),m.isArguments(arguments)||(m.isArguments=function(t){return E(t,"callee")});var q=r.document&&r.document.childNodes;"object"!=("undefined"==typeof Int8Array?"undefined":i(Int8Array))&&"function"!=typeof q&&(m.isFunction=function(t){return"function"==typeof t||!1}),m.isFinite=function(t){return!m.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},m.isNaN=function(t){return m.isNumber(t)&&isNaN(t)},m.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===l.call(t)},m.isNull=function(t){return null===t},m.isUndefined=function(t){return void 0===t},m.has=function(t,e){if(!m.isArray(e))return E(t,e);for(var n=e.length,r=0;r<n;r++){var i=e[r];if(null==t||!h.call(t,i))return!1;t=t[i]}return!!n},m.noConflict=function(){return r._=o,this},m.identity=function(t){return t},m.constant=function(t){return function(){return t}},m.noop=function(){},m.property=function(t){return m.isArray(t)?function(e){return O(e,t)}:w(t)},m.propertyOf=function(t){return null==t?function(){}:function(e){return m.isArray(e)?O(t,e):t[e]}},m.matcher=m.matches=function(t){return t=m.extendOwn({},t),function(e){return m.isMatch(e,t)}},m.times=function(t,e,n){var r=Array(Math.max(0,t));e=b(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},m.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},m.now=Date.now||function(){return(new Date).getTime()};var U={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Y=m.invert(U),H=function(t){var e=function(e){return t[e]},n="(?:"+m.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};m.escape=H(U),m.unescape=H(Y),m.result=function(t,e,n){m.isArray(e)||(e=[e]);var r=e.length;if(!r)return m.isFunction(n)?n.call(t):n;for(var i=0;i<r;i++){var o=null==t?void 0:t[e[i]];void 0===o&&(o=n,i=r),t=m.isFunction(o)?o.call(t):o}return t};var X=0;m.uniqueId=function(t){var e=++X+"";return t?t+e:e},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var W=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},J=/\\|'|\r|\n|\u2028|\u2029/g,$=function(t){return"\\"+K[t]};m.template=function(t,e,n){!e&&n&&(e=n),e=m.defaults({},e,m.templateSettings);var r,i=RegExp([(e.escape||W).source,(e.interpolate||W).source,(e.evaluate||W).source].join("|")+"|$","g"),o=0,a="__p+='";t.replace(i,(function(e,n,r,i,u){return a+=t.slice(o,u).replace(J,$),o=u+e.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(a+="';\n"+i+"\n__p+='"),e})),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(e.variable||"obj","_",a)}catch(t){throw t.source=a,t}var u=function(t){return r.call(this,t,m)},s=e.variable||"obj";return u.source="function("+s+"){\n"+a+"}",u},m.chain=function(t){var e=m(t);return e._chain=!0,e};var Z=function(t,e){return t._chain?m(e).chain():e};m.mixin=function(t){return m.each(m.functions(t),(function(e){var n=m[e]=t[e];m.prototype[e]=function(){var t=[this._wrapped];return c.apply(t,arguments),Z(this,n.apply(m,t))}})),m},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=a[t];m.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],Z(this,n)}})),m.each(["concat","join","slice"],(function(t){var e=a[t];m.prototype[t]=function(){return Z(this,e.apply(this._wrapped,arguments))}})),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return String(this._wrapped)}}()})),a=(o._,function(){function t(n){e(this,t),this.points=n.map((function(t){return t.slice()})),this.points.forEach((function(t,e){t.data=n[e].data}));var r=this.nds=o.unzip(this.points),i=this.maxD=[],a=this.minD=[],u=this.rangeD=[],s=this.normalizedD=[];r.forEach((function(t,e){i[e]=o.max(t),a[e]=o.min(t),u[e]=i[e]!=a[e]?i[e]-a[e]:1,s[e]=t.map((function(t){return(t-a[e])/u[e]}))}));var c=this.points.length;this.normalizedPoints=[];for(var f=0;f<c;f++){this.normalizedPoints[f]=[];for(var l=0;l<this.nds.length;l++)this.normalizedPoints[f][l]=s[l][f]}for(var h=0;h<c;h++)this.normalizedPoints[h].data=this.points[h].data}return r(t,[{key:"scaleBackPoints",value:function(t){var e=this;return t.map((function(t){return e.scaleBackPoint(t)}))}},{key:"scaleBackPoint",value:function(t){var e=this;return t.map((function(t,n){return e.rangeD[n]*t+e.minD[n]}))}}]),t}()),u=function(){function t(n,r){e(this,t),this.points=n,this.dimension=r}return r(t,[{key:"leaders",get:function(){var t={};return this.points.forEach((function(e){var n=e.map((function(t){return Math.round(t)})),r=n.join("");if(!t[r]){var i=[];i.val=n,t[r]=i}t[r].push(e)})),_.values(t)}}]),t}();Math.log(Math.sqrt(2*Math.PI)),Math.sqrt(2*Math.PI),Math.sqrt(2*Math.PI);!function(t){t.binarybin=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=function(t){};return i("calculate",(function(){for(var t=e[0].length,r=e.map((function(t){return t.slice()})),o=0;o<r.length;o++)r[o].data=e[o].data;var s=r;if(void 0===n.isNormalized){var c=new a(r);i("normalizedPoints",s=c.normalizedPoints),i("normalizer",c)}var f=null,l=null,h=null;n.startBinGridSize;void 0===n.isBinned?(l=[],f=(l=(h=new u(s,t)).leaders).map((function(t){return t.val})),i("binner",h),i("bins",l),i("binSize",null),i("binRadius",0)):f=s,i("binnedSites",f)})),i("callback",(function(e){return arguments.length?(r=e,t.binarybin):r})),i("data",(function(n){return arguments.length?(e=n,t.binarybin):e})),t.binarybin;function i(e,n){t.binarybin[e]=n}}}(window)}()}).call(this,n(10))},function(t,e,n){(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){"use strict";var n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};var o=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t,e){!function(){var r="object"==("undefined"==typeof self?"undefined":i(self))&&self.self===self&&self||"object"==i(n)&&n.global===n&&n||this||{},o=r._,a=Array.prototype,u=Object.prototype,s="undefined"!=typeof Symbol?Symbol.prototype:null,c=a.push,f=a.slice,l=u.toString,h=u.hasOwnProperty,d=Array.isArray,p=Object.keys,v=Object.create,y=function(){},m=function t(e){return e instanceof t?e:this instanceof t?void(this._wrapped=e):new t(e)};e.nodeType?r._=m:(!t.nodeType&&t.exports&&(e=t.exports=m),e._=m),m.VERSION="1.9.1";var g,b=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},_=function(t,e,n){return m.iteratee!==g?m.iteratee(t,e):null==t?m.identity:m.isFunction(t)?b(t,e,n):m.isObject(t)&&!m.isArray(t)?m.matcher(t):m.property(t)};m.iteratee=g=function(t,e){return _(t,e,1/0)};var k=function(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var o=Array(e+1);for(i=0;i<e;i++)o[i]=arguments[i];return o[e]=r,t.apply(this,o)}},x=function(t){if(!m.isObject(t))return{};if(v)return v(t);y.prototype=t;var e=new y;return y.prototype=null,e},w=function(t){return function(e){return null==e?void 0:e[t]}},E=function(t,e){return null!=t&&h.call(t,e)},O=function(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0},j=Math.pow(2,53)-1,S=w("length"),M=function(t){var e=S(t);return"number"==typeof e&&e>=0&&e<=j};m.each=m.forEach=function(t,e,n){var r,i;if(e=b(e,n),M(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=m.keys(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},m.map=m.collect=function(t,e,n){e=_(e,n);for(var r=!M(t)&&m.keys(t),i=(r||t).length,o=Array(i),a=0;a<i;a++){var u=r?r[a]:a;o[a]=e(t[u],u,t)}return o};var A=function(t){var e=function(e,n,r,i){var o=!M(e)&&m.keys(e),a=(o||e).length,u=t>0?0:a-1;for(i||(r=e[o?o[u]:u],u+=t);u>=0&&u<a;u+=t){var s=o?o[u]:u;r=n(r,e[s],s,e)}return r};return function(t,n,r,i){var o=arguments.length>=3;return e(t,b(n,i,4),r,o)}};m.reduce=m.foldl=m.inject=A(1),m.reduceRight=m.foldr=A(-1),m.find=m.detect=function(t,e,n){var r=(M(t)?m.findIndex:m.findKey)(t,e,n);if(void 0!==r&&-1!==r)return t[r]},m.filter=m.select=function(t,e,n){var r=[];return e=_(e,n),m.each(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r},m.reject=function(t,e,n){return m.filter(t,m.negate(_(e)),n)},m.every=m.all=function(t,e,n){e=_(e,n);for(var r=!M(t)&&m.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0},m.some=m.any=function(t,e,n){e=_(e,n);for(var r=!M(t)&&m.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1},m.contains=m.includes=m.include=function(t,e,n,r){return M(t)||(t=m.values(t)),("number"!=typeof n||r)&&(n=0),m.indexOf(t,e,n)>=0},m.invoke=k((function(t,e,n){var r,i;return m.isFunction(e)?i=e:m.isArray(e)&&(r=e.slice(0,-1),e=e[e.length-1]),m.map(t,(function(t){var o=i;if(!o){if(r&&r.length&&(t=O(t,r)),null==t)return;o=t[e]}return null==o?o:o.apply(t,n)}))})),m.pluck=function(t,e){return m.map(t,m.property(e))},m.where=function(t,e){return m.filter(t,m.matcher(e))},m.findWhere=function(t,e){return m.find(t,m.matcher(e))},m.max=function(t,e,n){var r,o,a=-1/0,u=-1/0;if(null==e||"number"==typeof e&&"object"!=i(t[0])&&null!=t)for(var s=0,c=(t=M(t)?t:m.values(t)).length;s<c;s++)null!=(r=t[s])&&r>a&&(a=r);else e=_(e,n),m.each(t,(function(t,n,r){((o=e(t,n,r))>u||o===-1/0&&a===-1/0)&&(a=t,u=o)}));return a},m.min=function(t,e,n){var r,o,a=1/0,u=1/0;if(null==e||"number"==typeof e&&"object"!=i(t[0])&&null!=t)for(var s=0,c=(t=M(t)?t:m.values(t)).length;s<c;s++)null!=(r=t[s])&&r<a&&(a=r);else e=_(e,n),m.each(t,(function(t,n,r){((o=e(t,n,r))<u||o===1/0&&a===1/0)&&(a=t,u=o)}));return a},m.shuffle=function(t){return m.sample(t,1/0)},m.sample=function(t,e,n){if(null==e||n)return M(t)||(t=m.values(t)),t[m.random(t.length-1)];var r=M(t)?m.clone(t):m.values(t),i=S(r);e=Math.max(Math.min(e,i),0);for(var o=i-1,a=0;a<e;a++){var u=m.random(a,o),s=r[a];r[a]=r[u],r[u]=s}return r.slice(0,e)},m.sortBy=function(t,e,n){var r=0;return e=_(e,n),m.pluck(m.map(t,(function(t,n,i){return{value:t,index:r++,criteria:e(t,n,i)}})).sort((function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index})),"value")};var N=function(t,e){return function(n,r,i){var o=e?[[],[]]:{};return r=_(r,i),m.each(n,(function(e,i){var a=r(e,i,n);t(o,e,a)})),o}};m.groupBy=N((function(t,e,n){E(t,n)?t[n].push(e):t[n]=[e]})),m.indexBy=N((function(t,e,n){t[n]=e})),m.countBy=N((function(t,e,n){E(t,n)?t[n]++:t[n]=1}));var P=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;m.toArray=function(t){return t?m.isArray(t)?f.call(t):m.isString(t)?t.match(P):M(t)?m.map(t,m.identity):m.values(t):[]},m.size=function(t){return null==t?0:M(t)?t.length:m.keys(t).length},m.partition=N((function(t,e,n){t[n?0:1].push(e)}),!0),m.first=m.head=m.take=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[0]:m.initial(t,t.length-e)},m.initial=function(t,e,n){return f.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},m.last=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[t.length-1]:m.rest(t,Math.max(0,t.length-e))},m.rest=m.tail=m.drop=function(t,e,n){return f.call(t,null==e||n?1:e)},m.compact=function(t){return m.filter(t,Boolean)};var C=function t(e,n,r,i){for(var o=(i=i||[]).length,a=0,u=S(e);a<u;a++){var s=e[a];if(M(s)&&(m.isArray(s)||m.isArguments(s)))if(n)for(var c=0,f=s.length;c<f;)i[o++]=s[c++];else t(s,n,r,i),o=i.length;else r||(i[o++]=s)}return i};m.flatten=function(t,e){return C(t,e,!1)},m.without=k((function(t,e){return m.difference(t,e)})),m.uniq=m.unique=function(t,e,n,r){m.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=_(n,r));for(var i=[],o=[],a=0,u=S(t);a<u;a++){var s=t[a],c=n?n(s,a,t):s;e&&!n?(a&&o===c||i.push(s),o=c):n?m.contains(o,c)||(o.push(c),i.push(s)):m.contains(i,s)||i.push(s)}return i},m.union=k((function(t){return m.uniq(C(t,!0,!0))})),m.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=S(t);r<i;r++){var o=t[r];if(!m.contains(e,o)){var a;for(a=1;a<n&&m.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},m.difference=k((function(t,e){return e=C(e,!0,!0),m.filter(t,(function(t){return!m.contains(e,t)}))})),m.unzip=function(t){for(var e=t&&m.max(t,S).length||0,n=Array(e),r=0;r<e;r++)n[r]=m.pluck(t,r);return n},m.zip=k(m.unzip),m.object=function(t,e){for(var n={},r=0,i=S(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n};var I=function(t){return function(e,n,r){n=_(n,r);for(var i=S(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}};m.findIndex=I(1),m.findLastIndex=I(-1),m.sortedIndex=function(t,e,n,r){for(var i=(n=_(n,r,1))(e),o=0,a=S(t);o<a;){var u=Math.floor((o+a)/2);n(t[u])<i?o=u+1:a=u}return o};var L=function(t,e,n){return function(r,i,o){var a=0,u=S(r);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+u,a):u=o>=0?Math.min(o+1,u):o+u+1;else if(n&&o&&u)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=e(f.call(r,a,u),m.isNaN))>=0?o+a:-1;for(o=t>0?a:u-1;o>=0&&o<u;o+=t)if(r[o]===i)return o;return-1}};m.indexOf=L(1,m.findIndex,m.sortedIndex),m.lastIndexOf=L(-1,m.findLastIndex),m.range=function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i},m.chunk=function(t,e){if(null==e||e<1)return[];for(var n=[],r=0,i=t.length;r<i;)n.push(f.call(t,r,r+=e));return n};var D=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=x(t.prototype),a=t.apply(o,i);return m.isObject(a)?a:o};m.bind=k((function(t,e,n){if(!m.isFunction(t))throw new TypeError("Bind must be called on a function");var r=k((function(i){return D(t,r,e,this,n.concat(i))}));return r})),m.partial=k((function(t,e){var n=m.partial.placeholder;return function r(){for(var i=0,o=e.length,a=Array(o),u=0;u<o;u++)a[u]=e[u]===n?arguments[i++]:e[u];for(;i<arguments.length;)a.push(arguments[i++]);return D(t,r,this,this,a)}})),m.partial.placeholder=m,m.bindAll=k((function(t,e){var n=(e=C(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=m.bind(t[r],t)}})),m.memoize=function(t,e){var n=function n(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return E(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},m.delay=k((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),m.defer=m.partial(m.delay,m,1),m.throttle=function(t,e,n){var r,i,o,a,u=0;n||(n={});var s=function(){u=!1===n.leading?0:m.now(),r=null,a=t.apply(i,o),r||(i=o=null)},c=function(){var c=m.now();u||!1!==n.leading||(u=c);var f=e-(c-u);return i=this,o=arguments,f<=0||f>e?(r&&(clearTimeout(r),r=null),u=c,a=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(s,f)),a};return c.cancel=function(){clearTimeout(r),u=0,r=i=o=null},c},m.debounce=function(t,e,n){var r,i,o=function(e,n){r=null,n&&(i=t.apply(e,n))},a=k((function(a){if(r&&clearTimeout(r),n){var u=!r;r=setTimeout(o,e),u&&(i=t.apply(this,a))}else r=m.delay(o,e,this,a);return i}));return a.cancel=function(){clearTimeout(r),r=null},a},m.wrap=function(t,e){return m.partial(e,t)},m.negate=function(t){return function(){return!t.apply(this,arguments)}},m.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},m.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},m.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},m.once=m.partial(m.before,2),m.restArguments=k;var B=!{toString:null}.propertyIsEnumerable("toString"),T=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],z=function(t,e){var n=T.length,r=t.constructor,i=m.isFunction(r)&&r.prototype||u,o="constructor";for(E(t,o)&&!m.contains(e,o)&&e.push(o);n--;)(o=T[n])in t&&t[o]!==i[o]&&!m.contains(e,o)&&e.push(o)};m.keys=function(t){if(!m.isObject(t))return[];if(p)return p(t);var e=[];for(var n in t)E(t,n)&&e.push(n);return B&&z(t,e),e},m.allKeys=function(t){if(!m.isObject(t))return[];var e=[];for(var n in t)e.push(n);return B&&z(t,e),e},m.values=function(t){for(var e=m.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},m.mapObject=function(t,e,n){e=_(e,n);for(var r=m.keys(t),i=r.length,o={},a=0;a<i;a++){var u=r[a];o[u]=e(t[u],u,t)}return o},m.pairs=function(t){for(var e=m.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},m.invert=function(t){for(var e={},n=m.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},m.functions=m.methods=function(t){var e=[];for(var n in t)m.isFunction(t[n])&&e.push(n);return e.sort()};var R=function(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=t(o),u=a.length,s=0;s<u;s++){var c=a[s];e&&void 0!==n[c]||(n[c]=o[c])}return n}};m.extend=R(m.allKeys),m.extendOwn=m.assign=R(m.keys),m.findKey=function(t,e,n){e=_(e,n);for(var r,i=m.keys(t),o=0,a=i.length;o<a;o++)if(e(t[r=i[o]],r,t))return r};var F,G,V=function(t,e,n){return e in n};m.pick=k((function(t,e){var n={},r=e[0];if(null==t)return n;m.isFunction(r)?(e.length>1&&(r=b(r,e[1])),e=m.allKeys(t)):(r=V,e=C(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var a=e[i],u=t[a];r(u,a,t)&&(n[a]=u)}return n})),m.omit=k((function(t,e){var n,r=e[0];return m.isFunction(r)?(r=m.negate(r),e.length>1&&(n=e[1])):(e=m.map(C(e,!1,!1),String),r=function(t,n){return!m.contains(e,n)}),m.pick(t,r,n)})),m.defaults=R(m.allKeys,!0),m.create=function(t,e){var n=x(t);return e&&m.extendOwn(n,e),n},m.clone=function(t){return m.isObject(t)?m.isArray(t)?t.slice():m.extend({},t):t},m.tap=function(t,e){return e(t),t},m.isMatch=function(t,e){var n=m.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0},F=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var o=i(t);return("function"===o||"object"===o||"object"==i(e))&&G(t,e,n,r)},G=function(t,e,n,r){t instanceof m&&(t=t._wrapped),e instanceof m&&(e=e._wrapped);var o=l.call(t);if(o!==l.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return s.valueOf.call(t)===s.valueOf.call(e)}var a="[object Array]"===o;if(!a){if("object"!=i(t)||"object"!=i(e))return!1;var u=t.constructor,c=e.constructor;if(u!==c&&!(m.isFunction(u)&&u instanceof u&&m.isFunction(c)&&c instanceof c)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];for(var f=(n=n||[]).length;f--;)if(n[f]===t)return r[f]===e;if(n.push(t),r.push(e),a){if((f=t.length)!==e.length)return!1;for(;f--;)if(!F(t[f],e[f],n,r))return!1}else{var h,d=m.keys(t);if(f=d.length,m.keys(e).length!==f)return!1;for(;f--;)if(h=d[f],!E(e,h)||!F(t[h],e[h],n,r))return!1}return n.pop(),r.pop(),!0},m.isEqual=function(t,e){return F(t,e)},m.isEmpty=function(t){return null==t||(M(t)&&(m.isArray(t)||m.isString(t)||m.isArguments(t))?0===t.length:0===m.keys(t).length)},m.isElement=function(t){return!(!t||1!==t.nodeType)},m.isArray=d||function(t){return"[object Array]"===l.call(t)},m.isObject=function(t){var e=i(t);return"function"===e||"object"===e&&!!t},m.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],(function(t){m["is"+t]=function(e){return l.call(e)==="[object "+t+"]"}})),m.isArguments(arguments)||(m.isArguments=function(t){return E(t,"callee")});var q=r.document&&r.document.childNodes;"object"!=("undefined"==typeof Int8Array?"undefined":i(Int8Array))&&"function"!=typeof q&&(m.isFunction=function(t){return"function"==typeof t||!1}),m.isFinite=function(t){return!m.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},m.isNaN=function(t){return m.isNumber(t)&&isNaN(t)},m.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===l.call(t)},m.isNull=function(t){return null===t},m.isUndefined=function(t){return void 0===t},m.has=function(t,e){if(!m.isArray(e))return E(t,e);for(var n=e.length,r=0;r<n;r++){var i=e[r];if(null==t||!h.call(t,i))return!1;t=t[i]}return!!n},m.noConflict=function(){return r._=o,this},m.identity=function(t){return t},m.constant=function(t){return function(){return t}},m.noop=function(){},m.property=function(t){return m.isArray(t)?function(e){return O(e,t)}:w(t)},m.propertyOf=function(t){return null==t?function(){}:function(e){return m.isArray(e)?O(t,e):t[e]}},m.matcher=m.matches=function(t){return t=m.extendOwn({},t),function(e){return m.isMatch(e,t)}},m.times=function(t,e,n){var r=Array(Math.max(0,t));e=b(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},m.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},m.now=Date.now||function(){return(new Date).getTime()};var U={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Y=m.invert(U),H=function(t){var e=function(e){return t[e]},n="(?:"+m.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};m.escape=H(U),m.unescape=H(Y),m.result=function(t,e,n){m.isArray(e)||(e=[e]);var r=e.length;if(!r)return m.isFunction(n)?n.call(t):n;for(var i=0;i<r;i++){var o=null==t?void 0:t[e[i]];void 0===o&&(o=n,i=r),t=m.isFunction(o)?o.call(t):o}return t};var X=0;m.uniqueId=function(t){var e=++X+"";return t?t+e:e},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var W=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},J=/\\|'|\r|\n|\u2028|\u2029/g,$=function(t){return"\\"+K[t]};m.template=function(t,e,n){!e&&n&&(e=n),e=m.defaults({},e,m.templateSettings);var r,i=RegExp([(e.escape||W).source,(e.interpolate||W).source,(e.evaluate||W).source].join("|")+"|$","g"),o=0,a="__p+='";t.replace(i,(function(e,n,r,i,u){return a+=t.slice(o,u).replace(J,$),o=u+e.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(a+="';\n"+i+"\n__p+='"),e})),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(e.variable||"obj","_",a)}catch(t){throw t.source=a,t}var u=function(t){return r.call(this,t,m)},s=e.variable||"obj";return u.source="function("+s+"){\n"+a+"}",u},m.chain=function(t){var e=m(t);return e._chain=!0,e};var Z=function(t,e){return t._chain?m(e).chain():e};m.mixin=function(t){return m.each(m.functions(t),(function(e){var n=m[e]=t[e];m.prototype[e]=function(){var t=[this._wrapped];return c.apply(t,arguments),Z(this,n.apply(m,t))}})),m},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=a[t];m.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],Z(this,n)}})),m.each(["concat","join","slice"],(function(t){var e=a[t];m.prototype[t]=function(){return Z(this,e.apply(this._wrapped,arguments))}})),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return String(this._wrapped)}}()}));o._;function a(t,e){var n=0;return t.forEach((function(t,r){n+=(t-e[r])*(t-e[r])})),Math.round(Math.sqrt(n)*Math.pow(10,10))/Math.pow(10,10)}function u(t,e){var n=0;return t.forEach((function(t,r){n+=Math.abs(t-e[r])})),Math.round(n*Math.pow(10,10))/Math.pow(10,10)}Math.log(Math.sqrt(2*Math.PI)),Math.sqrt(2*Math.PI),Math.sqrt(2*Math.PI);var s=function(){function t(n){e(this,t),this.points=n.slice(0);var r=this.Arr=o.unzip(this.points),i=this.maxAI=r.map((function(t){return o.max(t)})),a=this.minAI=r.map((function(t){return o.min(t)})),u=this.rangeAI=r.map((function(t,e){return i[e]!=a[e]?i[e]-a[e]:1})),s=this.normalizedArr=r.map((function(t,e){return t.map((function(t){return(t-a[e])/u[e]}))}));this.normalizedPoints=o.zip.apply(o,s);for(var c=this.points.length,f=0;f<c;f++)this.normalizedPoints[f].data=this.points[f].data}return r(t,[{key:"scaleBackPoints",value:function(t){var e=this;return t.map((function(t){return e.scaleBackPoint(t)}))}},{key:"scaleBackPoint",value:function(t){var e=this,n=t;return this.rangeAI.map((function(t,r){return t*n[r]+e.minAI[r]}))}}]),t}(),c=function(){function t(n,r,i,o){e(this,t),i=i||"l2",this.distance="l2"===i?a:u,this.points=n,this.radius=r,this.minDistance=Math.sqrt(n[0].length),this.maxNumberOfBins=o||1/0}return r(t,[{key:"leaders",get:function(){var t=this,e=this,n=[];return this.points.find((function(e){if(!r(n,e,t.distance)){var i=[];if(i.val=e,n.push(i),n.length>t.maxNumberOfBins)return!0}}))||this.points.forEach((function(e){r(n,e,t.distance).push(e)})),n;function r(t,n,r){for(var i=t.length,o=e.minDistance,a=null,u=0;u<i;++u){var s=t[u],c=r(s.val,n);c<e.radius&&c<o&&(o=c,a=s)}return a}}}]),t}();function f(){var t,e,n=0,r=1,i=function(t){return t};return this.evenbin=function(e){var n,r={},o=[],a=e.length;for(n=0;n<a;++n)if(!(s=i.call(null,u=e[n],n,e)).some((function(t){return isNaN(t)}))){var u,s,c=s.map((function(e,n){return Math.round(s[n]=e/t)})),f=c.reduce((function(t,e){return t+"-"+e})),l=r[f];l?l.push(u):(o.push(l=r[f]=[u]),l.val=c.map((function(e){return e*t-(e>0)*t/2})))}return o},this.val=function(t){return arguments.length?(i=t,this):i},this.radius=function(n){return arguments.length?(t=e=+n,this):e},this.size=function(t){return arguments.length?(n=0,r=+t,this):r-n},this.radius(1)}!function(t){t.binnerN=function(){var e,n=40,r=!1,i=50,a=250,u=[],l=[],h=[],d=null,p=[],v=null,y=0,m=!0,g={reduce_coefficient:.9,reduce_offset:0,increase_coefficient:1,increase_offset:5},b=0,_=!1,k="l2",x=function(t){};return w("calculate",(function(){if(l=u.slice(0),h=l,!r){var o=new s(l);h=o.normalizedPoints,w("normalizedFun",o)}w("normalizedPoints",h),d=m?null:d;var _=-1;do{if(null===d?(d=n,m=!1):p.length>a?d=d*g.reduce_coefficient+g.reduce_offset:p.length<i&&(d=d*g.increase_coefficient+g.increase_offset),"evenbin"===e){var E=1/d;v=(new f).radius(E),p=v.evenbin(h),y=E}else e&&"leader"!==e||(v=new c(h,y=1/(2*d),k,a),p=v.leaders);if(b++,x(b,p.length),(p.length===_||_>1)&&b>1e3)break;_=p.length}while(p.length>a||p.length<i);var O=p.map((function(t){return t.val}));return w("binner",v),w("bins",p),w("binSize",d),w("binRadius",y),w("binnedSites",O),w("loopcount",b),t.binnerN})),w("callback",(function(e){return arguments.length?(x=e,t.binnerN):x})),w("binType",(function(n){return arguments.length?(e=n,t.binnerN):e})),w("distanceMethod",(function(e){return arguments.length?(k=e,t.binnerN):k})),w("calculatePoint",(function(e){if(l=u.slice(0).concat(e),u=l,h=l,!r){var f=new s(l);h=f.normalizedPoints,w("normalizedFun",f)}if(w("normalizedPoints",h),!_){var g=o.uniq(h.map((function(t){return t.join(",")}))),b=o.groupBy(h,(function(t){return t.join(",")}));g.length<i?(g.forEach((function(t){var e=b[t];e.val=e[0],e.binRadius=m?0:y,p.push(e)})),_=!1):_=!0}if(_)do{null===d?d=n:p.length>2*a?d*=.9:p.length<i&&(d+=5),v=new c(h,y=1/(2*d)),p=v.leaders}while(p.length>2*a||p.length<i);var k=p.map((function(t){return t.val}));return w("binner",v),w("bins",p),w("binSize",d),w("binRadius",y),w("binnedSites",k),t.binnerN})),w("coefficient",(function(e){if(arguments.length){for(var n in e)void 0!==e[n]&&(g[n]=e[n]);return t.binnerN}return g})),w("startBinGridSize",(function(e){return arguments.length?(n=e,t.binnerN):n})),w("isNormalized",(function(e){return arguments.length?(r=e,t.binnerN):r})),w("minNumOfBins",(function(e){return arguments.length?(i=e,t.binnerN):i})),w("maxNumOfBins",(function(e){return arguments.length?(a=e,t.binnerN):a})),w("data",(function(e){return arguments.length?(u=e,_=!1,t.binnerN):u})),w("updateRadius",(function(e){return arguments.length&&e&&(d=null),arguments.length?(m=e,t.binnerN):m})),t.binnerN;function w(e,n){t.binnerN[e]=n}}}(window)}()}).call(this,n(10))},function(t,e,n){(function(t){function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){"use strict";var r="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};var i=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t,e){!function(){var i="object"==("undefined"==typeof self?"undefined":n(self))&&self.self===self&&self||"object"==n(r)&&r.global===r&&r||this||{},o=i._,a=Array.prototype,u=Object.prototype,s="undefined"!=typeof Symbol?Symbol.prototype:null,c=a.push,f=a.slice,l=u.toString,h=u.hasOwnProperty,d=Array.isArray,p=Object.keys,v=Object.create,y=function(){},m=function t(e){return e instanceof t?e:this instanceof t?void(this._wrapped=e):new t(e)};e.nodeType?i._=m:(!t.nodeType&&t.exports&&(e=t.exports=m),e._=m),m.VERSION="1.9.1";var g,b=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},_=function(t,e,n){return m.iteratee!==g?m.iteratee(t,e):null==t?m.identity:m.isFunction(t)?b(t,e,n):m.isObject(t)&&!m.isArray(t)?m.matcher(t):m.property(t)};m.iteratee=g=function(t,e){return _(t,e,1/0)};var k=function(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var o=Array(e+1);for(i=0;i<e;i++)o[i]=arguments[i];return o[e]=r,t.apply(this,o)}},x=function(t){if(!m.isObject(t))return{};if(v)return v(t);y.prototype=t;var e=new y;return y.prototype=null,e},w=function(t){return function(e){return null==e?void 0:e[t]}},E=function(t,e){return null!=t&&h.call(t,e)},O=function(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0},j=Math.pow(2,53)-1,S=w("length"),M=function(t){var e=S(t);return"number"==typeof e&&e>=0&&e<=j};m.each=m.forEach=function(t,e,n){var r,i;if(e=b(e,n),M(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=m.keys(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},m.map=m.collect=function(t,e,n){e=_(e,n);for(var r=!M(t)&&m.keys(t),i=(r||t).length,o=Array(i),a=0;a<i;a++){var u=r?r[a]:a;o[a]=e(t[u],u,t)}return o};var A=function(t){var e=function(e,n,r,i){var o=!M(e)&&m.keys(e),a=(o||e).length,u=t>0?0:a-1;for(i||(r=e[o?o[u]:u],u+=t);u>=0&&u<a;u+=t){var s=o?o[u]:u;r=n(r,e[s],s,e)}return r};return function(t,n,r,i){var o=arguments.length>=3;return e(t,b(n,i,4),r,o)}};m.reduce=m.foldl=m.inject=A(1),m.reduceRight=m.foldr=A(-1),m.find=m.detect=function(t,e,n){var r=(M(t)?m.findIndex:m.findKey)(t,e,n);if(void 0!==r&&-1!==r)return t[r]},m.filter=m.select=function(t,e,n){var r=[];return e=_(e,n),m.each(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r},m.reject=function(t,e,n){return m.filter(t,m.negate(_(e)),n)},m.every=m.all=function(t,e,n){e=_(e,n);for(var r=!M(t)&&m.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0},m.some=m.any=function(t,e,n){e=_(e,n);for(var r=!M(t)&&m.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1},m.contains=m.includes=m.include=function(t,e,n,r){return M(t)||(t=m.values(t)),("number"!=typeof n||r)&&(n=0),m.indexOf(t,e,n)>=0},m.invoke=k((function(t,e,n){var r,i;return m.isFunction(e)?i=e:m.isArray(e)&&(r=e.slice(0,-1),e=e[e.length-1]),m.map(t,(function(t){var o=i;if(!o){if(r&&r.length&&(t=O(t,r)),null==t)return;o=t[e]}return null==o?o:o.apply(t,n)}))})),m.pluck=function(t,e){return m.map(t,m.property(e))},m.where=function(t,e){return m.filter(t,m.matcher(e))},m.findWhere=function(t,e){return m.find(t,m.matcher(e))},m.max=function(t,e,r){var i,o,a=-1/0,u=-1/0;if(null==e||"number"==typeof e&&"object"!=n(t[0])&&null!=t)for(var s=0,c=(t=M(t)?t:m.values(t)).length;s<c;s++)null!=(i=t[s])&&i>a&&(a=i);else e=_(e,r),m.each(t,(function(t,n,r){((o=e(t,n,r))>u||o===-1/0&&a===-1/0)&&(a=t,u=o)}));return a},m.min=function(t,e,r){var i,o,a=1/0,u=1/0;if(null==e||"number"==typeof e&&"object"!=n(t[0])&&null!=t)for(var s=0,c=(t=M(t)?t:m.values(t)).length;s<c;s++)null!=(i=t[s])&&i<a&&(a=i);else e=_(e,r),m.each(t,(function(t,n,r){((o=e(t,n,r))<u||o===1/0&&a===1/0)&&(a=t,u=o)}));return a},m.shuffle=function(t){return m.sample(t,1/0)},m.sample=function(t,e,n){if(null==e||n)return M(t)||(t=m.values(t)),t[m.random(t.length-1)];var r=M(t)?m.clone(t):m.values(t),i=S(r);e=Math.max(Math.min(e,i),0);for(var o=i-1,a=0;a<e;a++){var u=m.random(a,o),s=r[a];r[a]=r[u],r[u]=s}return r.slice(0,e)},m.sortBy=function(t,e,n){var r=0;return e=_(e,n),m.pluck(m.map(t,(function(t,n,i){return{value:t,index:r++,criteria:e(t,n,i)}})).sort((function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index})),"value")};var N=function(t,e){return function(n,r,i){var o=e?[[],[]]:{};return r=_(r,i),m.each(n,(function(e,i){var a=r(e,i,n);t(o,e,a)})),o}};m.groupBy=N((function(t,e,n){E(t,n)?t[n].push(e):t[n]=[e]})),m.indexBy=N((function(t,e,n){t[n]=e})),m.countBy=N((function(t,e,n){E(t,n)?t[n]++:t[n]=1}));var P=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;m.toArray=function(t){return t?m.isArray(t)?f.call(t):m.isString(t)?t.match(P):M(t)?m.map(t,m.identity):m.values(t):[]},m.size=function(t){return null==t?0:M(t)?t.length:m.keys(t).length},m.partition=N((function(t,e,n){t[n?0:1].push(e)}),!0),m.first=m.head=m.take=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[0]:m.initial(t,t.length-e)},m.initial=function(t,e,n){return f.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},m.last=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[t.length-1]:m.rest(t,Math.max(0,t.length-e))},m.rest=m.tail=m.drop=function(t,e,n){return f.call(t,null==e||n?1:e)},m.compact=function(t){return m.filter(t,Boolean)};var C=function t(e,n,r,i){for(var o=(i=i||[]).length,a=0,u=S(e);a<u;a++){var s=e[a];if(M(s)&&(m.isArray(s)||m.isArguments(s)))if(n)for(var c=0,f=s.length;c<f;)i[o++]=s[c++];else t(s,n,r,i),o=i.length;else r||(i[o++]=s)}return i};m.flatten=function(t,e){return C(t,e,!1)},m.without=k((function(t,e){return m.difference(t,e)})),m.uniq=m.unique=function(t,e,n,r){m.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=_(n,r));for(var i=[],o=[],a=0,u=S(t);a<u;a++){var s=t[a],c=n?n(s,a,t):s;e&&!n?(a&&o===c||i.push(s),o=c):n?m.contains(o,c)||(o.push(c),i.push(s)):m.contains(i,s)||i.push(s)}return i},m.union=k((function(t){return m.uniq(C(t,!0,!0))})),m.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=S(t);r<i;r++){var o=t[r];if(!m.contains(e,o)){var a;for(a=1;a<n&&m.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},m.difference=k((function(t,e){return e=C(e,!0,!0),m.filter(t,(function(t){return!m.contains(e,t)}))})),m.unzip=function(t){for(var e=t&&m.max(t,S).length||0,n=Array(e),r=0;r<e;r++)n[r]=m.pluck(t,r);return n},m.zip=k(m.unzip),m.object=function(t,e){for(var n={},r=0,i=S(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n};var I=function(t){return function(e,n,r){n=_(n,r);for(var i=S(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}};m.findIndex=I(1),m.findLastIndex=I(-1),m.sortedIndex=function(t,e,n,r){for(var i=(n=_(n,r,1))(e),o=0,a=S(t);o<a;){var u=Math.floor((o+a)/2);n(t[u])<i?o=u+1:a=u}return o};var L=function(t,e,n){return function(r,i,o){var a=0,u=S(r);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+u,a):u=o>=0?Math.min(o+1,u):o+u+1;else if(n&&o&&u)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=e(f.call(r,a,u),m.isNaN))>=0?o+a:-1;for(o=t>0?a:u-1;o>=0&&o<u;o+=t)if(r[o]===i)return o;return-1}};m.indexOf=L(1,m.findIndex,m.sortedIndex),m.lastIndexOf=L(-1,m.findLastIndex),m.range=function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i},m.chunk=function(t,e){if(null==e||e<1)return[];for(var n=[],r=0,i=t.length;r<i;)n.push(f.call(t,r,r+=e));return n};var D=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=x(t.prototype),a=t.apply(o,i);return m.isObject(a)?a:o};m.bind=k((function(t,e,n){if(!m.isFunction(t))throw new TypeError("Bind must be called on a function");var r=k((function(i){return D(t,r,e,this,n.concat(i))}));return r})),m.partial=k((function(t,e){var n=m.partial.placeholder;return function r(){for(var i=0,o=e.length,a=Array(o),u=0;u<o;u++)a[u]=e[u]===n?arguments[i++]:e[u];for(;i<arguments.length;)a.push(arguments[i++]);return D(t,r,this,this,a)}})),m.partial.placeholder=m,m.bindAll=k((function(t,e){var n=(e=C(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=m.bind(t[r],t)}})),m.memoize=function(t,e){var n=function n(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return E(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},m.delay=k((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),m.defer=m.partial(m.delay,m,1),m.throttle=function(t,e,n){var r,i,o,a,u=0;n||(n={});var s=function(){u=!1===n.leading?0:m.now(),r=null,a=t.apply(i,o),r||(i=o=null)},c=function(){var c=m.now();u||!1!==n.leading||(u=c);var f=e-(c-u);return i=this,o=arguments,f<=0||f>e?(r&&(clearTimeout(r),r=null),u=c,a=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(s,f)),a};return c.cancel=function(){clearTimeout(r),u=0,r=i=o=null},c},m.debounce=function(t,e,n){var r,i,o=function(e,n){r=null,n&&(i=t.apply(e,n))},a=k((function(a){if(r&&clearTimeout(r),n){var u=!r;r=setTimeout(o,e),u&&(i=t.apply(this,a))}else r=m.delay(o,e,this,a);return i}));return a.cancel=function(){clearTimeout(r),r=null},a},m.wrap=function(t,e){return m.partial(e,t)},m.negate=function(t){return function(){return!t.apply(this,arguments)}},m.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},m.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},m.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},m.once=m.partial(m.before,2),m.restArguments=k;var B=!{toString:null}.propertyIsEnumerable("toString"),T=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],z=function(t,e){var n=T.length,r=t.constructor,i=m.isFunction(r)&&r.prototype||u,o="constructor";for(E(t,o)&&!m.contains(e,o)&&e.push(o);n--;)(o=T[n])in t&&t[o]!==i[o]&&!m.contains(e,o)&&e.push(o)};m.keys=function(t){if(!m.isObject(t))return[];if(p)return p(t);var e=[];for(var n in t)E(t,n)&&e.push(n);return B&&z(t,e),e},m.allKeys=function(t){if(!m.isObject(t))return[];var e=[];for(var n in t)e.push(n);return B&&z(t,e),e},m.values=function(t){for(var e=m.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},m.mapObject=function(t,e,n){e=_(e,n);for(var r=m.keys(t),i=r.length,o={},a=0;a<i;a++){var u=r[a];o[u]=e(t[u],u,t)}return o},m.pairs=function(t){for(var e=m.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},m.invert=function(t){for(var e={},n=m.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},m.functions=m.methods=function(t){var e=[];for(var n in t)m.isFunction(t[n])&&e.push(n);return e.sort()};var R=function(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=t(o),u=a.length,s=0;s<u;s++){var c=a[s];e&&void 0!==n[c]||(n[c]=o[c])}return n}};m.extend=R(m.allKeys),m.extendOwn=m.assign=R(m.keys),m.findKey=function(t,e,n){e=_(e,n);for(var r,i=m.keys(t),o=0,a=i.length;o<a;o++)if(e(t[r=i[o]],r,t))return r};var F,G,V=function(t,e,n){return e in n};m.pick=k((function(t,e){var n={},r=e[0];if(null==t)return n;m.isFunction(r)?(e.length>1&&(r=b(r,e[1])),e=m.allKeys(t)):(r=V,e=C(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var a=e[i],u=t[a];r(u,a,t)&&(n[a]=u)}return n})),m.omit=k((function(t,e){var n,r=e[0];return m.isFunction(r)?(r=m.negate(r),e.length>1&&(n=e[1])):(e=m.map(C(e,!1,!1),String),r=function(t,n){return!m.contains(e,n)}),m.pick(t,r,n)})),m.defaults=R(m.allKeys,!0),m.create=function(t,e){var n=x(t);return e&&m.extendOwn(n,e),n},m.clone=function(t){return m.isObject(t)?m.isArray(t)?t.slice():m.extend({},t):t},m.tap=function(t,e){return e(t),t},m.isMatch=function(t,e){var n=m.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0},F=function(t,e,r,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var o=n(t);return("function"===o||"object"===o||"object"==n(e))&&G(t,e,r,i)},G=function(t,e,r,i){t instanceof m&&(t=t._wrapped),e instanceof m&&(e=e._wrapped);var o=l.call(t);if(o!==l.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return s.valueOf.call(t)===s.valueOf.call(e)}var a="[object Array]"===o;if(!a){if("object"!=n(t)||"object"!=n(e))return!1;var u=t.constructor,c=e.constructor;if(u!==c&&!(m.isFunction(u)&&u instanceof u&&m.isFunction(c)&&c instanceof c)&&"constructor"in t&&"constructor"in e)return!1}i=i||[];for(var f=(r=r||[]).length;f--;)if(r[f]===t)return i[f]===e;if(r.push(t),i.push(e),a){if((f=t.length)!==e.length)return!1;for(;f--;)if(!F(t[f],e[f],r,i))return!1}else{var h,d=m.keys(t);if(f=d.length,m.keys(e).length!==f)return!1;for(;f--;)if(h=d[f],!E(e,h)||!F(t[h],e[h],r,i))return!1}return r.pop(),i.pop(),!0},m.isEqual=function(t,e){return F(t,e)},m.isEmpty=function(t){return null==t||(M(t)&&(m.isArray(t)||m.isString(t)||m.isArguments(t))?0===t.length:0===m.keys(t).length)},m.isElement=function(t){return!(!t||1!==t.nodeType)},m.isArray=d||function(t){return"[object Array]"===l.call(t)},m.isObject=function(t){var e=n(t);return"function"===e||"object"===e&&!!t},m.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],(function(t){m["is"+t]=function(e){return l.call(e)==="[object "+t+"]"}})),m.isArguments(arguments)||(m.isArguments=function(t){return E(t,"callee")});var q=i.document&&i.document.childNodes;"object"!=("undefined"==typeof Int8Array?"undefined":n(Int8Array))&&"function"!=typeof q&&(m.isFunction=function(t){return"function"==typeof t||!1}),m.isFinite=function(t){return!m.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},m.isNaN=function(t){return m.isNumber(t)&&isNaN(t)},m.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===l.call(t)},m.isNull=function(t){return null===t},m.isUndefined=function(t){return void 0===t},m.has=function(t,e){if(!m.isArray(e))return E(t,e);for(var n=e.length,r=0;r<n;r++){var i=e[r];if(null==t||!h.call(t,i))return!1;t=t[i]}return!!n},m.noConflict=function(){return i._=o,this},m.identity=function(t){return t},m.constant=function(t){return function(){return t}},m.noop=function(){},m.property=function(t){return m.isArray(t)?function(e){return O(e,t)}:w(t)},m.propertyOf=function(t){return null==t?function(){}:function(e){return m.isArray(e)?O(t,e):t[e]}},m.matcher=m.matches=function(t){return t=m.extendOwn({},t),function(e){return m.isMatch(e,t)}},m.times=function(t,e,n){var r=Array(Math.max(0,t));e=b(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},m.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},m.now=Date.now||function(){return(new Date).getTime()};var U={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Y=m.invert(U),H=function(t){var e=function(e){return t[e]},n="(?:"+m.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};m.escape=H(U),m.unescape=H(Y),m.result=function(t,e,n){m.isArray(e)||(e=[e]);var r=e.length;if(!r)return m.isFunction(n)?n.call(t):n;for(var i=0;i<r;i++){var o=null==t?void 0:t[e[i]];void 0===o&&(o=n,i=r),t=m.isFunction(o)?o.call(t):o}return t};var X=0;m.uniqueId=function(t){var e=++X+"";return t?t+e:e},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var W=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},J=/\\|'|\r|\n|\u2028|\u2029/g,$=function(t){return"\\"+K[t]};m.template=function(t,e,n){!e&&n&&(e=n),e=m.defaults({},e,m.templateSettings);var r,i=RegExp([(e.escape||W).source,(e.interpolate||W).source,(e.evaluate||W).source].join("|")+"|$","g"),o=0,a="__p+='";t.replace(i,(function(e,n,r,i,u){return a+=t.slice(o,u).replace(J,$),o=u+e.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(a+="';\n"+i+"\n__p+='"),e})),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(e.variable||"obj","_",a)}catch(t){throw t.source=a,t}var u=function(t){return r.call(this,t,m)},s=e.variable||"obj";return u.source="function("+s+"){\n"+a+"}",u},m.chain=function(t){var e=m(t);return e._chain=!0,e};var Z=function(t,e){return t._chain?m(e).chain():e};m.mixin=function(t){return m.each(m.functions(t),(function(e){var n=m[e]=t[e];m.prototype[e]=function(){var t=[this._wrapped];return c.apply(t,arguments),Z(this,n.apply(m,t))}})),m},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=a[t];m.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],Z(this,n)}})),m.each(["concat","join","slice"],(function(t){var e=a[t];m.prototype[t]=function(){return Z(this,e.apply(this._wrapped,arguments))}})),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return String(this._wrapped)}}()}));i._;function o(t,e){r.kmeanCluster[t]=e}r.kmeanCluster={normalizedPoints:[],opt:s({isNormalized:!0},(function(t){return t})),inputdata:[],loopcount:0,callback:s((function(){}),(function(t){return t})),data:s([],(function(t){if(t[0]){var e=t[0].length;return t.map((function(t){return t.length==e})).reduce((function(t,e){return t&e}),!0)}return r.kmeanCluster.inputdata=[],r.kmeanCluster.normalizedPoints=[],!1}),(function(t){if(r.kmeanCluster.inputdata=t,r.kmeanCluster.normalizedPoints=t.slice(),!r.kmeanCluster.opt().isNormalized){var e=new a(t);r.kmeanCluster.normalizedPoints=e.normalizedPoints,o("normalizedFun",e)}return r.kmeanCluster.normalizedPoints})),calculate:function(){var t=u(this.normalizedPoints,{k:this.k(),iterations:this.iterations()},void 0,this.distanceMethod()),e=t.points,n=t.centroids;r.kmeanCluster.oldCentroid=[],o("bins",n.map((function(t){var n=e.filter((function(e){return e.label()==t.label()})).map((function(t){return t.location()}));return n.val=t.location(),r.kmeanCluster.oldCentroid.push(n.val.slice()),n}))),o("loopcount",r.kmeanCluster.loopcount)},calculatePoint:function(t){this.inputdata=this.inputdata.slice().concat(t),this.data(this.inputdata);var e=u(this.normalizedPoints,{k:this.k(),iterations:this.iterations()},void 0,this.distanceMethod()),n=e.points,i=e.centroids;r.kmeanCluster.oldCentroid=[],o("bins",i.map((function(t){var e=n.filter((function(e){return e.label()==t.label()})).map((function(t){return t.location()}));return e.val=t.location(),r.kmeanCluster.oldCentroid.push(e.val.slice()),e})))},updateRadius:s(!0,void 0,(function(t){t&&(r.kmeanCluster.oldCentroid=void 0)})),k:s(void 0,(function(t){return t%1==0&t>0})),iterations:s(Math.pow(10,3),(function(t){return t%1==0&t>0})),distanceMethod:s("l2",(function(t){return t||"l2"}))};var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.points=e.slice(0);var n=this.Arr=i.unzip(this.points),r=this.maxAI=n.map((function(t){return i.max(t)})),o=this.minAI=n.map((function(t){return i.min(t)})),a=this.rangeAI=n.map((function(t,e){return r[e]!=o[e]?r[e]-o[e]:1})),u=this.normalizedArr=n.map((function(t,e){return t.map((function(t){return(t-o[e])/a[e]}))}));this.normalizedPoints=i.zip.apply(i,u);for(var s=this.points.length,c=0;c<s;c++)this.normalizedPoints[c].data=this.points[c].data}var n,r,o;return n=t,(r=[{key:"scaleBackPoints",value:function(t){var e=this;return t.map((function(t){return e.scaleBackPoint(t)}))}},{key:"scaleBackPoint",value:function(t){var e=this,n=t;return this.rangeAI.map((function(t,r){return t*n[r]+e.minAI[r]}))}}])&&e(n.prototype,r),o&&e(n,o),t}();function u(t,e,n,i){var o,a="l2"===(i=i||"l2")?function(t,e){return t.map((function(t,n){return Math.pow(t-e[n],2)})).reduce((function(t,e){return t+e}),0)}:function(t,e){return t.map((function(t,n){return Math.abs(t-e[n])})).reduce((function(t,e){return t+e}),0)},u=e.k||Math.round(Math.sqrt(t.length/2)),c=e.iterations,f=t.map((function(t){return new v(t)}));if(n)o=n.map((function(t,e){return new y(new v(t),e)}));else{o=[];for(var l=0;l<u;l++)o.push(new y(f[l%f.length].location(),l))}for(var h=0;h<c;h++){var d=f.map((function(t){return t.updateLabel(o)})),p=o.map((function(t){return t.updateLocation(f)}));if(r.kmeanCluster.loopcount=h+1,r.kmeanCluster.callback()(h+1),d.indexOf(!1)+p.indexOf(!1)===-2)break}return{points:f,centroids:o};function v(t){var e=this;this.location=s(t),this.label=s(),this.updateLabel=function(t){var n,r,i=t.map((function(t){return a(e.location(),t.location())})),o=(r=(n=i).reduce((function(t,e){return Math.min(t,e)})),n.indexOf(r)),u=e.label()===o;return e.label(o),u}}function y(t,e){var n=this;this.location=s(t),this.label=s(e),this.updateLocation=function(t){var e=t.filter((function(t){return t.label()==n.label()})),r=!1;if(e.length>0){var i=function(t){var e=t[0].location().map((function(){return 0}));return t.map((function(t){return t.location()})).reduce((function(t,e){return function(t,e){return t.map((function(t,n){return t+e[n]}))}(t,e)}),e).map((function(e){return e/t.length}))}(e);r=_.isEqual(n.location(),i),n.location(i)}return r}}}function s(t,e,n){var i=t,o=e||function(t){return!0};return function(t){return void 0===t?i:(o(t)&&(i=t,n&&n(t)),r.kmeanCluster)}}r.kmeanCluster}()}).call(this,n(10))},function(t,e){t.exports=u},,,function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(6),a=function(t){function e(e){var n=t.call(this)||this,r=e;return r.trigger&&(n.trigger=r.trigger),r.kick&&(n.kick=r.kick),r.drag&&(n.drag=r.drag),r.on&&(n.on=r.on),n.dragstart=n.dragStart=o.Layout.dragStart,n.dragend=n.dragEnd=o.Layout.dragEnd,n}return i(e,t),e.prototype.trigger=function(t){},e.prototype.kick=function(){},e.prototype.drag=function(){},e.prototype.on=function(t,e){return this},e}(o.Layout);e.LayoutAdaptor=a,e.adaptor=function(t){return new a(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(31),i=n(32);e.d3adaptor=function(t){return!t||function(t){return t.version&&null!==t.version.match(/^3\./)}(t)?new r.D3StyleLayoutAdaptor:new i.D3StyleLayoutAdaptor(t)}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(6),a=function(t){function e(){var e=t.call(this)||this;e.event=d3.dispatch(o.EventType[o.EventType.start],o.EventType[o.EventType.tick],o.EventType[o.EventType.end]);var n=e;return e.drag=function(){if(!t)var t=d3.behavior.drag().origin(o.Layout.dragOrigin).on("dragstart.d3adaptor",o.Layout.dragStart).on("drag.d3adaptor",(function(t){o.Layout.drag(t,d3.event),n.resume()})).on("dragend.d3adaptor",o.Layout.dragEnd);if(!arguments.length)return t;this.call(t)},e}return i(e,t),e.prototype.trigger=function(t){var e={type:o.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event[e.type](e)},e.prototype.kick=function(){var e=this;d3.timer((function(){return t.prototype.tick.call(e)}))},e.prototype.on=function(t,e){return"string"==typeof t?this.event.on(t,e):this.event.on(o.EventType[t],e),this},e}(o.Layout);e.D3StyleLayoutAdaptor=a,e.d3adaptor=function(){return new a}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(6),a=function(t){function e(e){var n=t.call(this)||this;n.d3Context=e,n.event=e.dispatch(o.EventType[o.EventType.start],o.EventType[o.EventType.tick],o.EventType[o.EventType.end]);var r=n;return n.drag=function(){if(!t)var t=e.drag().subject(o.Layout.dragOrigin).on("start.d3adaptor",o.Layout.dragStart).on("drag.d3adaptor",(function(t){o.Layout.drag(t,e.event),r.resume()})).on("end.d3adaptor",o.Layout.dragEnd);if(!arguments.length)return t;arguments[0].call(t)},n}return i(e,t),e.prototype.trigger=function(t){var e={type:o.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event.call(e.type,e)},e.prototype.kick=function(){var e=this,n=this.d3Context.timer((function(){return t.prototype.tick.call(e)&&n.stop()}))},e.prototype.on=function(t,e){return"string"==typeof t?this.event.on(t,e):this.event.on(o.EventType[t],e),this},e}(o.Layout);e.D3StyleLayoutAdaptor=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),i=n(13),o=n(7),a=n(12),u=function(){function t(t,e){this.source=t,this.target=e}return t.prototype.actualLength=function(t){var e=this;return Math.sqrt(t.reduce((function(t,n){var r=n[e.target]-n[e.source];return t+r*r}),0))},t}();e.Link3D=u;var s=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=n};e.Node3D=s;var c=function(){function t(e,n,r){var i=this;void 0===r&&(r=1),this.nodes=e,this.links=n,this.idealLinkLength=r,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(t.k);for(var o=0;o<t.k;++o)this.result[o]=new Array(e.length);e.forEach((function(e,n){for(var r=0,o=t.dims;r<o.length;r++){var a=o[r];void 0===e[a]&&(e[a]=Math.random())}i.result[0][n]=e.x,i.result[1][n]=e.y,i.result[2][n]=e.z}))}return t.prototype.linkLength=function(t){return t.actualLength(this.result)},t.prototype.start=function(t){var e=this;void 0===t&&(t=100);var n=this.nodes.length,u=new f;this.useJaccardLinkLengths&&a.jaccardLinkLengths(this.links,u,1.5),this.links.forEach((function(t){return t.length*=e.idealLinkLength}));var s=new r.Calculator(n,this.links,(function(t){return t.source}),(function(t){return t.target}),(function(t){return t.length})).DistanceMatrix(),c=i.Descent.createSquareMatrix(n,(function(t,e){return s[t][e]})),l=i.Descent.createSquareMatrix(n,(function(){return 2}));this.links.forEach((function(t){var e=t.source,n=t.target;return l[e][n]=l[n][e]=1})),this.descent=new i.Descent(this.result,c),this.descent.threshold=.001,this.descent.G=l,this.constraints&&(this.descent.project=new o.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var h=0;h<this.nodes.length;h++){var d=this.nodes[h];d.fixed&&this.descent.locks.add(h,[d.x,d.y,d.z])}return this.descent.run(t),this},t.prototype.tick=function(){this.descent.locks.clear();for(var t=0;t<this.nodes.length;t++){var e=this.nodes[t];e.fixed&&this.descent.locks.add(t,[e.x,e.y,e.z])}return this.descent.rungeKutta()},t.dims=["x","y","z"],t.k=t.dims.length,t}();e.Layout3D=c;var f=function(){function t(){}return t.prototype.getSourceIndex=function(t){return t.source},t.prototype.getTargetIndex=function(t){return t.target},t.prototype.getLength=function(t){return t.length},t.prototype.setLength=function(t,e){t.length=e},t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),i=n(21);e.gridify=function(t,e,n,r){return t.cola.start(0,0,0,10,!1),function(t,e,n,r){t.forEach((function(t){t.routerNode={name:t.name,bounds:t.bounds.inflate(-n)}})),e.forEach((function(e){e.routerNode={bounds:e.bounds.inflate(-r),children:(void 0!==e.groups?e.groups.map((function(e){return t.length+e.id})):[]).concat(void 0!==e.leaves?e.leaves.map((function(t){return t.index})):[])}}));var o=t.concat(e).map((function(t,e){return t.routerNode.id=e,t.routerNode}));return new i.GridRouter(o,{getChildren:function(t){return t.children},getBounds:function(t){return t.bounds}},n-r)}(t.cola.nodes(),t.cola.groups(),n,r).routeEdges(t.powerGraph.powerEdges,e,(function(t){return t.source.routerNode.id}),(function(t){return t.target.routerNode.id}))},e.powerGraphGridLayout=function(t,e,n){var i;t.nodes.forEach((function(t,e){return t.index=e})),(new r.Layout).avoidOverlaps(!1).nodes(t.nodes).links(t.links).powerGraphGroups((function(t){(i=t).groups.forEach((function(t){return t.padding=n}))}));var o=t.nodes.length,a=[],u=t.nodes.slice(0);return u.forEach((function(t,e){return t.index=e})),i.groups.forEach((function(t){var e=t.index=t.id+o;u.push(t),void 0!==t.leaves&&t.leaves.forEach((function(t){return a.push({source:e,target:t.index})})),void 0!==t.groups&&t.groups.forEach((function(t){return a.push({source:e,target:t.id+o})}))})),i.powerEdges.forEach((function(t){a.push({source:t.source.index,target:t.target.index})})),(new r.Layout).size(e).nodes(u).links(a).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:(new r.Layout).convergenceThreshold(.001).size(e).avoidOverlaps(!0).nodes(t.nodes).links(t.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups((function(t){(i=t).groups.forEach((function(t){t.padding=n}))})).start(50,0,100,0,!1),powerGraph:i}}},function(t,e,n){(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){"use strict";var n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};var o=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t,e){!function(){var r="object"==("undefined"==typeof self?"undefined":i(self))&&self.self===self&&self||"object"==i(n)&&n.global===n&&n||this||{},o=r._,a=Array.prototype,u=Object.prototype,s="undefined"!=typeof Symbol?Symbol.prototype:null,c=a.push,f=a.slice,l=u.toString,h=u.hasOwnProperty,d=Array.isArray,p=Object.keys,v=Object.create,y=function(){},m=function t(e){return e instanceof t?e:this instanceof t?void(this._wrapped=e):new t(e)};e.nodeType?r._=m:(!t.nodeType&&t.exports&&(e=t.exports=m),e._=m),m.VERSION="1.9.1";var g,b=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},_=function(t,e,n){return m.iteratee!==g?m.iteratee(t,e):null==t?m.identity:m.isFunction(t)?b(t,e,n):m.isObject(t)&&!m.isArray(t)?m.matcher(t):m.property(t)};m.iteratee=g=function(t,e){return _(t,e,1/0)};var k=function(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var o=Array(e+1);for(i=0;i<e;i++)o[i]=arguments[i];return o[e]=r,t.apply(this,o)}},x=function(t){if(!m.isObject(t))return{};if(v)return v(t);y.prototype=t;var e=new y;return y.prototype=null,e},w=function(t){return function(e){return null==e?void 0:e[t]}},E=function(t,e){return null!=t&&h.call(t,e)},O=function(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0},j=Math.pow(2,53)-1,S=w("length"),M=function(t){var e=S(t);return"number"==typeof e&&e>=0&&e<=j};m.each=m.forEach=function(t,e,n){var r,i;if(e=b(e,n),M(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=m.keys(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},m.map=m.collect=function(t,e,n){e=_(e,n);for(var r=!M(t)&&m.keys(t),i=(r||t).length,o=Array(i),a=0;a<i;a++){var u=r?r[a]:a;o[a]=e(t[u],u,t)}return o};var A=function(t){var e=function(e,n,r,i){var o=!M(e)&&m.keys(e),a=(o||e).length,u=t>0?0:a-1;for(i||(r=e[o?o[u]:u],u+=t);u>=0&&u<a;u+=t){var s=o?o[u]:u;r=n(r,e[s],s,e)}return r};return function(t,n,r,i){var o=arguments.length>=3;return e(t,b(n,i,4),r,o)}};m.reduce=m.foldl=m.inject=A(1),m.reduceRight=m.foldr=A(-1),m.find=m.detect=function(t,e,n){var r=(M(t)?m.findIndex:m.findKey)(t,e,n);if(void 0!==r&&-1!==r)return t[r]},m.filter=m.select=function(t,e,n){var r=[];return e=_(e,n),m.each(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r},m.reject=function(t,e,n){return m.filter(t,m.negate(_(e)),n)},m.every=m.all=function(t,e,n){e=_(e,n);for(var r=!M(t)&&m.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0},m.some=m.any=function(t,e,n){e=_(e,n);for(var r=!M(t)&&m.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1},m.contains=m.includes=m.include=function(t,e,n,r){return M(t)||(t=m.values(t)),("number"!=typeof n||r)&&(n=0),m.indexOf(t,e,n)>=0},m.invoke=k((function(t,e,n){var r,i;return m.isFunction(e)?i=e:m.isArray(e)&&(r=e.slice(0,-1),e=e[e.length-1]),m.map(t,(function(t){var o=i;if(!o){if(r&&r.length&&(t=O(t,r)),null==t)return;o=t[e]}return null==o?o:o.apply(t,n)}))})),m.pluck=function(t,e){return m.map(t,m.property(e))},m.where=function(t,e){return m.filter(t,m.matcher(e))},m.findWhere=function(t,e){return m.find(t,m.matcher(e))},m.max=function(t,e,n){var r,o,a=-1/0,u=-1/0;if(null==e||"number"==typeof e&&"object"!=i(t[0])&&null!=t)for(var s=0,c=(t=M(t)?t:m.values(t)).length;s<c;s++)null!=(r=t[s])&&r>a&&(a=r);else e=_(e,n),m.each(t,(function(t,n,r){((o=e(t,n,r))>u||o===-1/0&&a===-1/0)&&(a=t,u=o)}));return a},m.min=function(t,e,n){var r,o,a=1/0,u=1/0;if(null==e||"number"==typeof e&&"object"!=i(t[0])&&null!=t)for(var s=0,c=(t=M(t)?t:m.values(t)).length;s<c;s++)null!=(r=t[s])&&r<a&&(a=r);else e=_(e,n),m.each(t,(function(t,n,r){((o=e(t,n,r))<u||o===1/0&&a===1/0)&&(a=t,u=o)}));return a},m.shuffle=function(t){return m.sample(t,1/0)},m.sample=function(t,e,n){if(null==e||n)return M(t)||(t=m.values(t)),t[m.random(t.length-1)];var r=M(t)?m.clone(t):m.values(t),i=S(r);e=Math.max(Math.min(e,i),0);for(var o=i-1,a=0;a<e;a++){var u=m.random(a,o),s=r[a];r[a]=r[u],r[u]=s}return r.slice(0,e)},m.sortBy=function(t,e,n){var r=0;return e=_(e,n),m.pluck(m.map(t,(function(t,n,i){return{value:t,index:r++,criteria:e(t,n,i)}})).sort((function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index})),"value")};var N=function(t,e){return function(n,r,i){var o=e?[[],[]]:{};return r=_(r,i),m.each(n,(function(e,i){var a=r(e,i,n);t(o,e,a)})),o}};m.groupBy=N((function(t,e,n){E(t,n)?t[n].push(e):t[n]=[e]})),m.indexBy=N((function(t,e,n){t[n]=e})),m.countBy=N((function(t,e,n){E(t,n)?t[n]++:t[n]=1}));var P=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;m.toArray=function(t){return t?m.isArray(t)?f.call(t):m.isString(t)?t.match(P):M(t)?m.map(t,m.identity):m.values(t):[]},m.size=function(t){return null==t?0:M(t)?t.length:m.keys(t).length},m.partition=N((function(t,e,n){t[n?0:1].push(e)}),!0),m.first=m.head=m.take=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[0]:m.initial(t,t.length-e)},m.initial=function(t,e,n){return f.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},m.last=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[t.length-1]:m.rest(t,Math.max(0,t.length-e))},m.rest=m.tail=m.drop=function(t,e,n){return f.call(t,null==e||n?1:e)},m.compact=function(t){return m.filter(t,Boolean)};var C=function t(e,n,r,i){for(var o=(i=i||[]).length,a=0,u=S(e);a<u;a++){var s=e[a];if(M(s)&&(m.isArray(s)||m.isArguments(s)))if(n)for(var c=0,f=s.length;c<f;)i[o++]=s[c++];else t(s,n,r,i),o=i.length;else r||(i[o++]=s)}return i};m.flatten=function(t,e){return C(t,e,!1)},m.without=k((function(t,e){return m.difference(t,e)})),m.uniq=m.unique=function(t,e,n,r){m.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=_(n,r));for(var i=[],o=[],a=0,u=S(t);a<u;a++){var s=t[a],c=n?n(s,a,t):s;e&&!n?(a&&o===c||i.push(s),o=c):n?m.contains(o,c)||(o.push(c),i.push(s)):m.contains(i,s)||i.push(s)}return i},m.union=k((function(t){return m.uniq(C(t,!0,!0))})),m.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=S(t);r<i;r++){var o=t[r];if(!m.contains(e,o)){var a;for(a=1;a<n&&m.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},m.difference=k((function(t,e){return e=C(e,!0,!0),m.filter(t,(function(t){return!m.contains(e,t)}))})),m.unzip=function(t){for(var e=t&&m.max(t,S).length||0,n=Array(e),r=0;r<e;r++)n[r]=m.pluck(t,r);return n},m.zip=k(m.unzip),m.object=function(t,e){for(var n={},r=0,i=S(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n};var I=function(t){return function(e,n,r){n=_(n,r);for(var i=S(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}};m.findIndex=I(1),m.findLastIndex=I(-1),m.sortedIndex=function(t,e,n,r){for(var i=(n=_(n,r,1))(e),o=0,a=S(t);o<a;){var u=Math.floor((o+a)/2);n(t[u])<i?o=u+1:a=u}return o};var L=function(t,e,n){return function(r,i,o){var a=0,u=S(r);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+u,a):u=o>=0?Math.min(o+1,u):o+u+1;else if(n&&o&&u)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=e(f.call(r,a,u),m.isNaN))>=0?o+a:-1;for(o=t>0?a:u-1;o>=0&&o<u;o+=t)if(r[o]===i)return o;return-1}};m.indexOf=L(1,m.findIndex,m.sortedIndex),m.lastIndexOf=L(-1,m.findLastIndex),m.range=function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i},m.chunk=function(t,e){if(null==e||e<1)return[];for(var n=[],r=0,i=t.length;r<i;)n.push(f.call(t,r,r+=e));return n};var D=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=x(t.prototype),a=t.apply(o,i);return m.isObject(a)?a:o};m.bind=k((function(t,e,n){if(!m.isFunction(t))throw new TypeError("Bind must be called on a function");var r=k((function(i){return D(t,r,e,this,n.concat(i))}));return r})),m.partial=k((function(t,e){var n=m.partial.placeholder;return function r(){for(var i=0,o=e.length,a=Array(o),u=0;u<o;u++)a[u]=e[u]===n?arguments[i++]:e[u];for(;i<arguments.length;)a.push(arguments[i++]);return D(t,r,this,this,a)}})),m.partial.placeholder=m,m.bindAll=k((function(t,e){var n=(e=C(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=m.bind(t[r],t)}})),m.memoize=function(t,e){var n=function n(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return E(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},m.delay=k((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),m.defer=m.partial(m.delay,m,1),m.throttle=function(t,e,n){var r,i,o,a,u=0;n||(n={});var s=function(){u=!1===n.leading?0:m.now(),r=null,a=t.apply(i,o),r||(i=o=null)},c=function(){var c=m.now();u||!1!==n.leading||(u=c);var f=e-(c-u);return i=this,o=arguments,f<=0||f>e?(r&&(clearTimeout(r),r=null),u=c,a=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(s,f)),a};return c.cancel=function(){clearTimeout(r),u=0,r=i=o=null},c},m.debounce=function(t,e,n){var r,i,o=function(e,n){r=null,n&&(i=t.apply(e,n))},a=k((function(a){if(r&&clearTimeout(r),n){var u=!r;r=setTimeout(o,e),u&&(i=t.apply(this,a))}else r=m.delay(o,e,this,a);return i}));return a.cancel=function(){clearTimeout(r),r=null},a},m.wrap=function(t,e){return m.partial(e,t)},m.negate=function(t){return function(){return!t.apply(this,arguments)}},m.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},m.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},m.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},m.once=m.partial(m.before,2),m.restArguments=k;var B=!{toString:null}.propertyIsEnumerable("toString"),T=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],z=function(t,e){var n=T.length,r=t.constructor,i=m.isFunction(r)&&r.prototype||u,o="constructor";for(E(t,o)&&!m.contains(e,o)&&e.push(o);n--;)(o=T[n])in t&&t[o]!==i[o]&&!m.contains(e,o)&&e.push(o)};m.keys=function(t){if(!m.isObject(t))return[];if(p)return p(t);var e=[];for(var n in t)E(t,n)&&e.push(n);return B&&z(t,e),e},m.allKeys=function(t){if(!m.isObject(t))return[];var e=[];for(var n in t)e.push(n);return B&&z(t,e),e},m.values=function(t){for(var e=m.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},m.mapObject=function(t,e,n){e=_(e,n);for(var r=m.keys(t),i=r.length,o={},a=0;a<i;a++){var u=r[a];o[u]=e(t[u],u,t)}return o},m.pairs=function(t){for(var e=m.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},m.invert=function(t){for(var e={},n=m.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},m.functions=m.methods=function(t){var e=[];for(var n in t)m.isFunction(t[n])&&e.push(n);return e.sort()};var R=function(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=t(o),u=a.length,s=0;s<u;s++){var c=a[s];e&&void 0!==n[c]||(n[c]=o[c])}return n}};m.extend=R(m.allKeys),m.extendOwn=m.assign=R(m.keys),m.findKey=function(t,e,n){e=_(e,n);for(var r,i=m.keys(t),o=0,a=i.length;o<a;o++)if(e(t[r=i[o]],r,t))return r};var F,G,V=function(t,e,n){return e in n};m.pick=k((function(t,e){var n={},r=e[0];if(null==t)return n;m.isFunction(r)?(e.length>1&&(r=b(r,e[1])),e=m.allKeys(t)):(r=V,e=C(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var a=e[i],u=t[a];r(u,a,t)&&(n[a]=u)}return n})),m.omit=k((function(t,e){var n,r=e[0];return m.isFunction(r)?(r=m.negate(r),e.length>1&&(n=e[1])):(e=m.map(C(e,!1,!1),String),r=function(t,n){return!m.contains(e,n)}),m.pick(t,r,n)})),m.defaults=R(m.allKeys,!0),m.create=function(t,e){var n=x(t);return e&&m.extendOwn(n,e),n},m.clone=function(t){return m.isObject(t)?m.isArray(t)?t.slice():m.extend({},t):t},m.tap=function(t,e){return e(t),t},m.isMatch=function(t,e){var n=m.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0},F=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var o=i(t);return("function"===o||"object"===o||"object"==i(e))&&G(t,e,n,r)},G=function(t,e,n,r){t instanceof m&&(t=t._wrapped),e instanceof m&&(e=e._wrapped);var o=l.call(t);if(o!==l.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return s.valueOf.call(t)===s.valueOf.call(e)}var a="[object Array]"===o;if(!a){if("object"!=i(t)||"object"!=i(e))return!1;var u=t.constructor,c=e.constructor;if(u!==c&&!(m.isFunction(u)&&u instanceof u&&m.isFunction(c)&&c instanceof c)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];for(var f=(n=n||[]).length;f--;)if(n[f]===t)return r[f]===e;if(n.push(t),r.push(e),a){if((f=t.length)!==e.length)return!1;for(;f--;)if(!F(t[f],e[f],n,r))return!1}else{var h,d=m.keys(t);if(f=d.length,m.keys(e).length!==f)return!1;for(;f--;)if(h=d[f],!E(e,h)||!F(t[h],e[h],n,r))return!1}return n.pop(),r.pop(),!0},m.isEqual=function(t,e){return F(t,e)},m.isEmpty=function(t){return null==t||(M(t)&&(m.isArray(t)||m.isString(t)||m.isArguments(t))?0===t.length:0===m.keys(t).length)},m.isElement=function(t){return!(!t||1!==t.nodeType)},m.isArray=d||function(t){return"[object Array]"===l.call(t)},m.isObject=function(t){var e=i(t);return"function"===e||"object"===e&&!!t},m.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],(function(t){m["is"+t]=function(e){return l.call(e)==="[object "+t+"]"}})),m.isArguments(arguments)||(m.isArguments=function(t){return E(t,"callee")});var q=r.document&&r.document.childNodes;"object"!=("undefined"==typeof Int8Array?"undefined":i(Int8Array))&&"function"!=typeof q&&(m.isFunction=function(t){return"function"==typeof t||!1}),m.isFinite=function(t){return!m.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},m.isNaN=function(t){return m.isNumber(t)&&isNaN(t)},m.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===l.call(t)},m.isNull=function(t){return null===t},m.isUndefined=function(t){return void 0===t},m.has=function(t,e){if(!m.isArray(e))return E(t,e);for(var n=e.length,r=0;r<n;r++){var i=e[r];if(null==t||!h.call(t,i))return!1;t=t[i]}return!!n},m.noConflict=function(){return r._=o,this},m.identity=function(t){return t},m.constant=function(t){return function(){return t}},m.noop=function(){},m.property=function(t){return m.isArray(t)?function(e){return O(e,t)}:w(t)},m.propertyOf=function(t){return null==t?function(){}:function(e){return m.isArray(e)?O(t,e):t[e]}},m.matcher=m.matches=function(t){return t=m.extendOwn({},t),function(e){return m.isMatch(e,t)}},m.times=function(t,e,n){var r=Array(Math.max(0,t));e=b(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},m.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},m.now=Date.now||function(){return(new Date).getTime()};var U={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Y=m.invert(U),H=function(t){var e=function(e){return t[e]},n="(?:"+m.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};m.escape=H(U),m.unescape=H(Y),m.result=function(t,e,n){m.isArray(e)||(e=[e]);var r=e.length;if(!r)return m.isFunction(n)?n.call(t):n;for(var i=0;i<r;i++){var o=null==t?void 0:t[e[i]];void 0===o&&(o=n,i=r),t=m.isFunction(o)?o.call(t):o}return t};var X=0;m.uniqueId=function(t){var e=++X+"";return t?t+e:e},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var W=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},J=/\\|'|\r|\n|\u2028|\u2029/g,$=function(t){return"\\"+K[t]};m.template=function(t,e,n){!e&&n&&(e=n),e=m.defaults({},e,m.templateSettings);var r,i=RegExp([(e.escape||W).source,(e.interpolate||W).source,(e.evaluate||W).source].join("|")+"|$","g"),o=0,a="__p+='";t.replace(i,(function(e,n,r,i,u){return a+=t.slice(o,u).replace(J,$),o=u+e.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(a+="';\n"+i+"\n__p+='"),e})),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(e.variable||"obj","_",a)}catch(t){throw t.source=a,t}var u=function(t){return r.call(this,t,m)},s=e.variable||"obj";return u.source="function("+s+"){\n"+a+"}",u},m.chain=function(t){var e=m(t);return e._chain=!0,e};var Z=function(t,e){return t._chain?m(e).chain():e};m.mixin=function(t){return m.each(m.functions(t),(function(e){var n=m[e]=t[e];m.prototype[e]=function(){var t=[this._wrapped];return c.apply(t,arguments),Z(this,n.apply(m,t))}})),m},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=a[t];m.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],Z(this,n)}})),m.each(["concat","join","slice"],(function(t){var e=a[t];m.prototype[t]=function(){return Z(this,e.apply(this._wrapped,arguments))}})),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return String(this._wrapped)}}()})),a=(o._,function(){function t(n){e(this,t),this.points=n.map((function(t){return t.slice()})),this.points.forEach((function(t,e){t.data=n[e].data}));var r=this.nds=o.unzip(this.points),i=this.maxD=[],a=this.minD=[],u=this.rangeD=[],s=this.normalizedD=[];r.forEach((function(t,e){i[e]=o.max(t),a[e]=o.min(t),u[e]=i[e]!=a[e]?i[e]-a[e]:1,s[e]=t.map((function(t){return(t-a[e])/u[e]}))}));var c=this.points.length;this.normalizedPoints=[];for(var f=0;f<c;f++){this.normalizedPoints[f]=[];for(var l=0;l<this.nds.length;l++)this.normalizedPoints[f][l]=s[l][f]}for(var h=0;h<c;h++)this.normalizedPoints[h].data=this.points[h].data}return r(t,[{key:"scaleBackPoints",value:function(t){var e=this;return t.map((function(t){return e.scaleBackPoint(t)}))}},{key:"scaleBackPoint",value:function(t){var e=this;return t.map((function(t,n){return e.rangeD[n]*t+e.minD[n]}))}}]),t}()),u=function(){function t(n,r){e(this,t),this.points=n,this.radius=r}return r(t,[{key:"leaders",get:function(){var t=this,e=[];return this.points.forEach((function(t){if(!n(e,t)){var r=[];r.site=t.slice(),e.push(r)}})),this.points.forEach((function(t){n(e,t).push(t)})),e;function n(e,n){for(var r=e.length,i=Number.MAX_SAFE_INTEGER,o=null,a=0;a<r;++a){var u=e[a],c=s(u.site,n);c<t.radius&&c<i&&(i=c,o=u)}return o}}}]),t}();function s(t,e){for(var n=0,r=0;r<t.length;r++){var i=t[r]-e[r];Number.isNaN(i)||(n+=i*i)}return Math.round(Math.sqrt(n)*Math.pow(10,10))/Math.pow(10,10)}function c(t){var e,n;return(e=t.links,n={},e.forEach((function(t){var e=t.source.join(",");n[e]||(n[e]=[]),n[e].push(t);var r=t.target.join(",");n[r]||(n[r]=[]),n[r].push(t)})),o.pairs(n)).filter((function(t){return t[1].length>=2})).map((function(t){return t[0].split(",").map(Number)}))}function f(t,e){var n={nodes:[],links:[]};return t.forEach((function(t){t.forEach((function(t){n.nodes.push(function(t){return{id:t}}(t))}))})),t.forEach((function(t){for(var r=0;r<t.length-1;r++)for(var i=t[r],o=r+1;o<t.length;o++){var a=t[o],u=i,s=a,c=l(i,a,e),f={source:u,target:s,weight:c};n.links.push(f)}})),n}function l(t,e,n){var r=0;if(n)for(var i=0;i<t.length;i++){var o=(t[i]-e[i])*(t[i]-e[i]);Number.isNaN(o)||(r+=o*n[i])}else for(var a=0;a<t.length;a++){var u=(t[a]-e[a])*(t[a]-e[a]);Number.isNaN(u)||(r+=u)}return Math.round(Math.sqrt(r)*Math.pow(10,10))/Math.pow(10,10)}function h(t,e){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function d(t,e){for(var n=0;n<t.length;n++){if(h(t[n],e))return!0}return!1}function p(t){var e=t.nodes,n=t.links.slice(0),r=[],i=new v;for(e.forEach((function(t){i.makeSet(t.id)})),n.sort((function(t,e){return-(t.weight-e.weight)}));n.length&&i.size()>1;){var o=n.pop();i.find(o.source)!==i.find(o.target)&&(i.union(o.source,o.target),r.push(o))}return{nodes:e,links:r}}function v(){this.index_={}}function y(t){this.id_=t,this.parent_=this,this.rank_=0}function m(t,e){var n=t.length*e;if(0===t.length)throw new Error("quantile requires at least one data point.");if(e<0||e>1)throw new Error("quantiles must be between 0 and 1");return 1===e?t[t.length-1]:0===e?t[0]:n%1!=0?t[Math.ceil(n)-1]:t.length%2==0?(t[n-1]+t[n])/2:t[n]}function g(t,e,n,r){for(n=n||0,r=r||t.length-1;r>n;){if(r-n>600){var i=r-n+1,o=e-n+1,a=Math.log(i),u=.5*Math.exp(2*a/3),s=.5*Math.sqrt(a*u*(i-u)/i);o-i/2<0&&(s*=-1),g(t,e,Math.max(n,Math.floor(e-o*u/i+s)),Math.min(r,Math.floor(e+(i-o)*u/i+s)))}var c=t[e],f=n,l=r;for(b(t,n,e),t[r]>c&&b(t,n,r);f<l;){for(b(t,f,l),f++,l--;t[f]<c;)f++;for(;t[l]>c;)l--}t[n]===c?b(t,n,l):b(t,++l,r),l<=e&&(n=l+1),e<=l&&(r=l-1)}}function b(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function _(t,e){var n=t.slice();if(Array.isArray(e)){!function(t,e){for(var n=[0],r=0;r<e.length;r++)n.push(w(t.length,e[r]));n.push(t.length-1),n.sort(x);for(var i=[0,n.length-1];i.length;){var o=Math.ceil(i.pop()),a=Math.floor(i.pop());if(!(o-a<=1)){var u=Math.floor((a+o)/2);k(t,n[u],Math.floor(n[a]),Math.ceil(n[o])),i.push(a,u,u,o)}}}(n,e);for(var r=[],i=0;i<e.length;i++)r[i]=m(n,e[i]);return r}return k(n,w(n.length,e),0,n.length-1),m(n,e)}function k(t,e,n,r){e%1==0?g(t,e,n,r):(g(t,e=Math.floor(e),n,r),g(t,e+1,e+1,r))}function x(t,e){return t-e}function w(t,e){var n=t*e;return 1===e?t-1:0===e?0:n%1!=0?Math.ceil(n)-1:t%2==0?n-.5:n}v.prototype.makeSet=function(t){if(!this.index_[t]){var e=new y(t);this.index_[t]=e}},v.prototype.find=function(t){if(void 0!==this.index_[t]){for(var e=this.index_[t].parent_;e!==e.parent_;)e=e.parent_;return e.id_}},v.prototype.union=function(t,e){var n=this.index_[this.find(t)],r=this.index_[this.find(e)];void 0!==n&&void 0!==r&&n!==r&&(n.rank<r.rank?n.parent_=r:r.rank_<n.rank_?r.parent_=n:(r.parent_=n,n.rank_++))},v.prototype.size=function(){var t={};return Object.keys(this.index_).forEach((function(e){t[e]=!0})),Object.keys(t).length};Math.log(Math.sqrt(2*Math.PI)),Math.sqrt(2*Math.PI),Math.sqrt(2*Math.PI);var E=function(){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,t);var i=r.upperBound,a=r.outlyingCoefficient,u=r.weights;this.tree=JSON.parse(JSON.stringify(n)),this.upperBound=i,this.outlyingCoefficient=a||1.5,i||(i=m(this.tree,a),this.upperBound=i),y(this.tree,i);var s=v(this.tree);function l(t,e){var n=e,r=t.nodes,i=[];return r.forEach((function(t){d(n.map((function(t){return t.id})),t.id)||i.push(t.id)})),i}function h(t,e){var n={};n.nodes=s,n.links=t.links.filter((function(t){return!0!==t.isOutlying}));var r=e.map((function(t){return t.join(",")})),i=c(t).map((function(t){return t.join(",")}));if(o.difference(r,i).length<r.length){var a=f(n.nodes.map((function(t){return t.id})),u);n=p(a)}return n}function v(t){var e=t.links.filter((function(t){return!t.isLong})),n=[];return e.forEach((function(t){n.push(t.source),n.push(t.target)})),(n=o.uniq(n,!1,(function(t){return t.join(",")}))).map((function(t){return{id:t}}))}function y(t,e){t.links.forEach((function(t){t.weight>e&&(t.isLong=!0)}))}function m(t,e){var n=t.links.map((function(t){return t.weight})),r=_(n,.25),i=_(n,.75);return i+e*(i-r)}function g(t,e){e.length>0&&t.links.filter((function(t){return t.isLong})).forEach((function(t){(d(e,t.source)||d(e,t.target))&&(t.isOutlying=!0)}))}this.outlyingPoints=l(this.tree,s),g(this.tree,this.outlyingPoints),this.noOutlyingTree=h(this.tree,this.outlyingPoints)}return r(t,[{key:"score",value:function(){var t=0,e=0;return this.tree.links.forEach((function(n){t+=n.weight,n.isOutlying&&(e+=n.weight)})),e/t}},{key:"links",value:function(){return this.outlyingLinks||(this.outlyingLinks=this.tree.links.filter((function(t){return t.isOutlying}))),this.outlyingLinks}},{key:"removeOutlying",value:function(){return this.noOutlyingTree}},{key:"points",value:function(){return this.outlyingPoints}}]),t}();!function(t){t.scagnosticsnd=function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e[0].length,i=e.map((function(t){return t.slice()})),o=0;o<i.length;o++)i[o].data=e[o].data;var s=i;if(void 0===n.isNormalized){var c=new a(i);G("normalizedPoints",s=c.normalizedPoints),G("normalizer",c)}var l=n.binType,d=n.outlyingUpperBound,v=n.outlyingCoefficient,y=null,m=null,g=null,b=null,_=0,k=n.startBinGridSize;if(void 0===n.isBinned){var x=n.incrementA?n.incrementA:2,w=n.incrementB?n.incrementB:0,O=n.decrementA?n.decrementA:.5,j=n.decrementB?n.decrementB:0;void 0===k&&(k=20),m=[];var S=30,M=200,A=n.minBins,N=n.maxBins;A&&(S=A),N&&(M=N);do{null===b?b=k:m.length>M?b=b*O+j:m.length<S&&(b=b*x+w),"hexagon"===l||l&&"leader"!==l||(_=Math.sqrt(r*Math.pow(1/(2*b),2)),g=new u(s,_),m=g.leaders)}while(m.length>M||m.length<S);y=m.map((function(t){return t.site})),G("binner",g),G("bins",m),G("binSize",b),G("binRadius",_)}else y=s;G("binnedSites",y);var P=[y],C=n.distanceWeights,I=f(P,C),L=p(I);G("graph",I),G("mst",L);var D=new E(L,{outlyingUpperBound:d,outlyingCoefficient:v}),B=D.score();d=D.upperBound;var T=D.links(),z=D.points().map((function(t){return t.join(",")})),R=m.filter((function(t){return z.indexOf(t.site.join(","))>=0})),F=[];return D.points().forEach((function(t){m.forEach((function(e){h(t,e.site)&&(F=F.concat(e))}))})),G("outlyingBins",R),G("outlyingScore",B),G("outlyingUpperBound",d),G("outlyingLinks",T),G("outlyingPoints",F),t.scagnosticsnd;function G(e,n){t.scagnosticsnd[e]=n}}}(window)}()}).call(this,n(10))},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"schemeCategory10",(function(){return se})),n.d(r,"schemeAccent",(function(){return ce})),n.d(r,"schemeDark2",(function(){return fe})),n.d(r,"schemePaired",(function(){return le})),n.d(r,"schemePastel1",(function(){return he})),n.d(r,"schemePastel2",(function(){return de})),n.d(r,"schemeSet1",(function(){return pe})),n.d(r,"schemeSet2",(function(){return ve})),n.d(r,"schemeSet3",(function(){return ye})),n.d(r,"schemeTableau10",(function(){return me})),n.d(r,"interpolateBrBG",(function(){return nn})),n.d(r,"schemeBrBG",(function(){return en})),n.d(r,"interpolatePRGn",(function(){return on})),n.d(r,"schemePRGn",(function(){return rn})),n.d(r,"interpolatePiYG",(function(){return un})),n.d(r,"schemePiYG",(function(){return an})),n.d(r,"interpolatePuOr",(function(){return cn})),n.d(r,"schemePuOr",(function(){return sn})),n.d(r,"interpolateRdBu",(function(){return ln})),n.d(r,"schemeRdBu",(function(){return fn})),n.d(r,"interpolateRdGy",(function(){return dn})),n.d(r,"schemeRdGy",(function(){return hn})),n.d(r,"interpolateRdYlBu",(function(){return vn})),n.d(r,"schemeRdYlBu",(function(){return pn})),n.d(r,"interpolateRdYlGn",(function(){return mn})),n.d(r,"schemeRdYlGn",(function(){return yn})),n.d(r,"interpolateSpectral",(function(){return bn})),n.d(r,"schemeSpectral",(function(){return gn})),n.d(r,"interpolateBuGn",(function(){return kn})),n.d(r,"schemeBuGn",(function(){return _n})),n.d(r,"interpolateBuPu",(function(){return wn})),n.d(r,"schemeBuPu",(function(){return xn})),n.d(r,"interpolateGnBu",(function(){return On})),n.d(r,"schemeGnBu",(function(){return En})),n.d(r,"interpolateOrRd",(function(){return Sn})),n.d(r,"schemeOrRd",(function(){return jn})),n.d(r,"interpolatePuBuGn",(function(){return An})),n.d(r,"schemePuBuGn",(function(){return Mn})),n.d(r,"interpolatePuBu",(function(){return Pn})),n.d(r,"schemePuBu",(function(){return Nn})),n.d(r,"interpolatePuRd",(function(){return In})),n.d(r,"schemePuRd",(function(){return Cn})),n.d(r,"interpolateRdPu",(function(){return Dn})),n.d(r,"schemeRdPu",(function(){return Ln})),n.d(r,"interpolateYlGnBu",(function(){return Tn})),n.d(r,"schemeYlGnBu",(function(){return Bn})),n.d(r,"interpolateYlGn",(function(){return Rn})),n.d(r,"schemeYlGn",(function(){return zn})),n.d(r,"interpolateYlOrBr",(function(){return Gn})),n.d(r,"schemeYlOrBr",(function(){return Fn})),n.d(r,"interpolateYlOrRd",(function(){return qn})),n.d(r,"schemeYlOrRd",(function(){return Vn})),n.d(r,"interpolateBlues",(function(){return Yn})),n.d(r,"schemeBlues",(function(){return Un})),n.d(r,"interpolateGreens",(function(){return Xn})),n.d(r,"schemeGreens",(function(){return Hn})),n.d(r,"interpolateGreys",(function(){return Kn})),n.d(r,"schemeGreys",(function(){return Wn})),n.d(r,"interpolatePurples",(function(){return $n})),n.d(r,"schemePurples",(function(){return Jn})),n.d(r,"interpolateReds",(function(){return Qn})),n.d(r,"schemeReds",(function(){return Zn})),n.d(r,"interpolateOranges",(function(){return er})),n.d(r,"schemeOranges",(function(){return tr})),n.d(r,"interpolateCividis",(function(){return nr})),n.d(r,"interpolateCubehelixDefault",(function(){return gr})),n.d(r,"interpolateRainbow",(function(){return xr})),n.d(r,"interpolateWarm",(function(){return br})),n.d(r,"interpolateCool",(function(){return _r})),n.d(r,"interpolateSinebow",(function(){return jr})),n.d(r,"interpolateTurbo",(function(){return Sr})),n.d(r,"interpolateViridis",(function(){return Nr})),n.d(r,"interpolateMagma",(function(){return Pr})),n.d(r,"interpolateInferno",(function(){return Cr})),n.d(r,"interpolatePlasma",(function(){return Ir}));var i=n(11),o=n(0),a=n.n(o),u=n(5),s=n(1),c=n(3),f=n.n(c),l=n(4),h=Math.PI,d=2*h,p=d-1e-6;function v(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function y(){return new v}v.prototype=y.prototype={constructor:v,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,u=n-t,s=r-e,c=o-t,f=a-e,l=c*c+f*f;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(l>1e-6)if(Math.abs(f*u-s*c)>1e-6&&i){var d=n-o,p=r-a,v=u*u+s*s,y=d*d+p*p,m=Math.sqrt(v),g=Math.sqrt(l),b=i*Math.tan((h-Math.acos((v+l-y)/(2*m*g)))/2),_=b/g,k=b/m;Math.abs(_-1)>1e-6&&(this._+="L"+(t+_*c)+","+(e+_*f)),this._+="A"+i+","+i+",0,0,"+ +(f*d>c*p)+","+(this._x1=t+k*u)+","+(this._y1=e+k*s)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e,o=!!o;var a=(n=+n)*Math.cos(r),u=n*Math.sin(r),s=t+a,c=e+u,f=1^o,l=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+s+","+c:(Math.abs(this._x1-s)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+s+","+c),n&&(l<0&&(l=l%d+d),l>p?this._+="A"+n+","+n+",0,1,"+f+","+(t-a)+","+(e-u)+"A"+n+","+n+",0,1,"+f+","+(this._x1=s)+","+(this._y1=c):l>1e-6&&(this._+="A"+n+","+n+",0,"+ +(l>=h)+","+f+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var m=y;function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var b=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=0,this._x=!0,this._context=m(),this._line=0,this._point=0,this._x0=0,this._y0=0,this._context=e,this._x=n}var e,n,r;return e=t,(n=[{key:"areaStart",value:function(){this._line=0}},{key:"areaEnd",value:function(){this._line=NaN}},{key:"lineStart",value:function(){this._point=0}},{key:"lineEnd",value:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}},{key:"point",value:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}}])&&g(e.prototype,n),r&&g(e,r),t}();var _=n(22);function k(t,e){let n=0;if(void 0===e)for(let e of t)(e=+e)&&(n+=e);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function x(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function w(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function E(t,e){return t.sourceLinks.length?t.depth:e-1}function O(t){return function(){return t}}function j(t,e){return M(t.source,e.source)||t.index-e.index}function S(t,e){return M(t.target,e.target)||t.index-e.index}function M(t,e){return t.y0-e.y0}function A(t){return t.value}function N(t){return t.index}function P(t){return t.nodes}function C(t){return t.links}function I(t,e){const n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function L({nodes:t}){for(const e of t){let t=e.y0,n=t;for(const n of e.sourceLinks)n.y0=t+n.width/2,t+=n.width;for(const t of e.targetLinks)t.y1=n+t.width/2,n+=t.width}}function D(){let t,e,n,r=0,i=0,o=1,a=1,u=24,s=8,c=N,f=E,l=P,h=C,d=6;function p(){const t={nodes:l.apply(null,arguments),links:h.apply(null,arguments)};return v(t),y(t),m(t),g(t),b(t),L(t),t}function v({nodes:t,links:e}){for(const[e,n]of t.entries())n.index=e,n.sourceLinks=[],n.targetLinks=[];const r=new Map(t.map((e,n)=>[c(e,n,t),e]));for(const[t,n]of e.entries()){n.index=t;let{source:e,target:i}=n;"object"!=typeof e&&(e=n.source=I(r,e)),"object"!=typeof i&&(i=n.target=I(r,i)),e.sourceLinks.push(n),i.targetLinks.push(n)}if(null!=n)for(const{sourceLinks:e,targetLinks:r}of t)e.sort(n),r.sort(n)}function y({nodes:t}){for(const e of t)e.value=void 0===e.fixedValue?Math.max(k(e.sourceLinks,A),k(e.targetLinks,A)):e.fixedValue}function m({nodes:t}){const e=t.length;let n=new Set(t),r=new Set,i=0;for(;n.size;){for(const t of n){t.depth=i;for(const{target:e}of t.sourceLinks)r.add(e)}if(++i>e)throw new Error("circular link");n=r,r=new Set}}function g({nodes:t}){const e=t.length;let n=new Set(t),r=new Set,i=0;for(;n.size;){for(const t of n){t.height=i;for(const{source:e}of t.targetLinks)r.add(e)}if(++i>e)throw new Error("circular link");n=r,r=new Set}}function b(n){const c=function({nodes:t}){const n=x(t,t=>t.depth)+1,i=(o-r-u)/(n-1),a=new Array(n);for(const e of t){const t=Math.max(0,Math.min(n-1,Math.floor(f.call(null,e,n))));e.layer=t,e.x0=r+t*i,e.x1=e.x0+u,a[t]?a[t].push(e):a[t]=[e]}if(e)for(const t of a)t.sort(e);return a}(n);t=Math.min(s,(a-i)/(x(c,t=>t.length)-1)),function(e){const n=w(e,e=>(a-i-(e.length-1)*t)/k(e,A));for(const r of e){let e=i;for(const i of r){i.y0=e,i.y1=e+i.value*n,e=i.y1+t;for(const t of i.sourceLinks)t.width=t.value*n}e=(a-e+t)/(r.length+1);for(let t=0;t<r.length;++t){const n=r[t];n.y0+=e*(t+1),n.y1+=e*(t+1)}F(r)}}(c);for(let t=0;t<d;++t){const e=Math.pow(.99,t),n=Math.max(1-e,(t+1)/d);D(c,e,n),_(c,e,n)}}function _(t,n,r){for(let i=1,o=t.length;i<o;++i){const o=t[i];for(const t of o){let e=0,r=0;for(const{source:n,value:i}of t.targetLinks){let o=i*(t.layer-n.layer);e+=G(n,t)*o,r+=o}if(!(r>0))continue;let i=(e/r-t.y0)*n;t.y0+=i,t.y1+=i,R(t)}void 0===e&&o.sort(M),B(o,r)}}function D(t,n,r){for(let i=t.length-2;i>=0;--i){const o=t[i];for(const t of o){let e=0,r=0;for(const{target:n,value:i}of t.sourceLinks){let o=i*(n.layer-t.layer);e+=V(t,n)*o,r+=o}if(!(r>0))continue;let i=(e/r-t.y0)*n;t.y0+=i,t.y1+=i,R(t)}void 0===e&&o.sort(M),B(o,r)}}function B(e,n){const r=e.length>>1,o=e[r];z(e,o.y0-t,r-1,n),T(e,o.y1+t,r+1,n),z(e,a,e.length-1,n),T(e,i,0,n)}function T(e,n,r,i){for(;r<e.length;++r){const o=e[r],a=(n-o.y0)*i;a>1e-6&&(o.y0+=a,o.y1+=a),n=o.y1+t}}function z(e,n,r,i){for(;r>=0;--r){const o=e[r],a=(o.y1-n)*i;a>1e-6&&(o.y0-=a,o.y1-=a),n=o.y0-t}}function R({sourceLinks:t,targetLinks:e}){if(void 0===n){for(const{source:{sourceLinks:t}}of e)t.sort(S);for(const{target:{targetLinks:e}}of t)e.sort(j)}}function F(t){if(void 0===n)for(const{sourceLinks:e,targetLinks:n}of t)e.sort(S),n.sort(j)}function G(e,n){let r=e.y0-(e.sourceLinks.length-1)*t/2;for(const{target:i,width:o}of e.sourceLinks){if(i===n)break;r+=o+t}for(const{source:t,width:i}of n.targetLinks){if(t===e)break;r-=i}return r}function V(e,n){let r=n.y0-(n.targetLinks.length-1)*t/2;for(const{source:i,width:o}of n.targetLinks){if(i===e)break;r+=o+t}for(const{target:t,width:i}of e.sourceLinks){if(t===n)break;r-=i}return r}return p.update=function(t){return L(t),t},p.nodeId=function(t){return arguments.length?(c="function"==typeof t?t:O(t),p):c},p.nodeAlign=function(t){return arguments.length?(f="function"==typeof t?t:O(t),p):f},p.nodeSort=function(t){return arguments.length?(e=t,p):e},p.nodeWidth=function(t){return arguments.length?(u=+t,p):u},p.nodePadding=function(e){return arguments.length?(s=t=+e,p):s},p.nodes=function(t){return arguments.length?(l="function"==typeof t?t:O(t),p):l},p.links=function(t){return arguments.length?(h="function"==typeof t?t:O(t),p):h},p.linkSort=function(t){return arguments.length?(n=t,p):n},p.size=function(t){return arguments.length?(r=i=0,o=+t[0],a=+t[1],p):[o-r,a-i]},p.extent=function(t){return arguments.length?(r=+t[0][0],o=+t[1][0],i=+t[0][1],a=+t[1][1],p):[[r,i],[o,a]]},p.iterations=function(t){return arguments.length?(d=+t,p):d},p}Array.prototype.slice;var B,T;function z(t){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function F(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function V(t,e){return(V=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Y(t);if(e){var i=Y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return U(this,n)}}function U(t,e){return!e||"object"!==z(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Y(t){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var H,X=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&V(t,e)}(o,t);var e,n,r,i=q(o);function o(){return F(this,o),i.apply(this,arguments)}return e=o,(n=[{key:"onHandleClick",value:function(){var t=!this.props.freezing;this.props.setfreezing(t)}},{key:"onMouseOver",value:function(t){!this.props.freezing&&this.props.mouseOver&&this.props.mouseOver(t)}},{key:"onMouseLeave",value:function(t){!this.props.freezing&&this.props.mouseLeave&&this.props.mouseLeave(t)}},{key:"onMouseMove",value:function(t){!this.props.freezing&&this.props.mouseMove&&this.props.mouseMove(t)}},{key:"render",value:function(){var t=this,e=this.props,n=(e.children,e.className),r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["children","className"]),i=this.props.freezing;return a.a.createElement("g",Object.assign({},r,{onClick:function(){return t.onHandleClick()},className:Object(l.cx)(n,i?Object(l.css)(B||(B=R(["\n                  &:not(.highlight) \n                  {pointerEvents: 'none';}"]))):Object(l.css)(T||(T=R(["\n                  &:not(.highlight) \n                  {pointerEvents: 'auto';}"])))),onMouseMove:i?void 0:this.onMouseMove.bind(this),onMouseOver:i?void 0:this.onMouseOver.bind(this),onMouseLeave:i?void 0:this.onMouseLeave.bind(this)}),this.props.children)}}])&&G(e.prototype,n),r&&G(e,r),o}(a.a.Component),W=n(2);function K(t){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){u=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}(t,e)||Z(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Z(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Z(t,e){if(t){if("string"==typeof t)return Q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(t,e):void 0}}function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function et(t,e){return(et=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function nt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=it(t);if(e){var i=it(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rt(this,n)}}function rt(t,e){return!e||"object"!==K(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function it(t){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ot=s.area().defined((function(t){return!!t})).curve((function(t){return new b(t,!0)})).x((function(t){return t[0]})),at=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&et(t,e)}(o,t);var e,n,r,i=nt(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).svgRef=a.a.createRef(),e.nodeSort=function(t,e){return 0},e.padding=0,e.isAnimate=!1,e.sankey=D().nodeWidth(.1).nodeAlign((function(t){return t.layer})).nodePadding(5),e.y=s.scalePoint(),e.x=s.scaleTime(),e.svg=s.select(null),e.g=s.select(null),e.color=s.scaleOrdinal(s.schemeCategory10),e._color=s.scaleOrdinal(s.schemeCategory10),e.force=Object(_.d3adaptor)(s),e.zoomFunc=s.zoom().on("zoom",(function(){e.svg.select("g.content").attr("transform",s.event.transform)})),e.getColorScale=e._getColorScale_byName,e.state={freezing:!1,margin:{top:20,right:20,bottom:30,left:100},data:[],times:[],nodes:[],links:[],linksBySource:[],graph:{},isForceDone:!1},e}return e=o,(n=[{key:"widthView",value:function(){var t;return this.props.width*(null!==(t=this.state.scalezoom)&&void 0!==t?t:1)}},{key:"heightView",value:function(){var t;return this.props.height*(null!==(t=this.state.scalezoom)&&void 0!==t?t:1)}},{key:"widthG",value:function(){var t,e;return this.widthView()-(null!==(t=this.state.margin)&&void 0!==t?t:{top:0,bottom:0,left:0,right:0}).left-(null!==(e=this.state.margin)&&void 0!==e?e:{top:0,bottom:0,left:0,right:0}).right}},{key:"heightG",value:function(){var t,e;return this.heightView()-(null!==(t=this.state.margin)&&void 0!==t?t:{top:0,bottom:0,left:0,right:0}).top-(null!==(e=this.state.margin)&&void 0!==e?e:{top:0,bottom:0,left:0,right:0}).bottom}},{key:"componentDidMount",value:function(){var t=this.state.margin;this.svg=s.select(this.svgRef.current),this.g=this.svg.select("g.content"),this.svg.call(this.zoomFunc.bind(this)).call(this.zoomFunc.transform,s.zoomIdentity.translate(t.left,t.top));var e=this.props.data;this.y.domain(e.map((function(t){return t.key}))),e.forEach((function(t,e){t.order=e})),this.draw({data:e}),this.setState({data:e})}},{key:"componentDidUpdate",value:function(t,e,n){if(this.props.data!==t.data){var r=this.props.data;this.y.domain(r.map((function(t){return t.key}))),r.forEach((function(t,e){t.order=e})),this.draw({data:r}),this.setState({data:r})}else if(this.props.width!==t.width||this.props.height!==t.height){var i=this.state.graph,o=this.renderSankey({graph:i},0),a=o.nodes,u=o.links,c=o.linksBySource;this.setState({nodes:a,links:u,linksBySource:c,graph:i})}else if(this.state.isForceDone!==e.isForceDone&&this.state.isForceDone&&!this.svg.empty()){var f=this.state.margin;this.svg.call(this.zoomFunc.transform,s.zoomIdentity.translate(f.left,f.top))}}},{key:"freezeHandle",value:function(){this.state.freezing&&this.setState({freezing:!1})}},{key:"draw",value:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this.state.freezing,i=this.props.timespan,o=this.x,a=this,u=null!==(t=n.data)&&void 0!==t?t:this.state.data;r&&this.freezeHandle();var f=i,l=f,h=[];o.domain([f[0],c.last(f)]);var d=function(){var t,n,r,i=-1,o=[],a=new Map,c=new Map,l=new Map,h=[],d={};f.forEach((function(t,n){var r,s=""+t,f=$(u);try{for(f.s();!(r=f.n()).done;){var h=r.value;if(h[s]){var p=h[s],v=ut(p),y=JSON.stringify([s,v]);if(e.props.showShareUser&&!(p&&p.length>1)||a.has(y))continue;var m={name:v,time:t,layer:n,_key:y,relatedLinks:[],element:p,id:++i};l.has(v)?(m.isShareUser=!!(p&&p.length>1),m.parentNode=l.get(v).id,m.comp={},m.comp[h.key]=!0,o.push(m),a.set(y,m),c.set(y,i),d[v].push(m)):(m.first=!0,m.childNodes=[],l.set(v,m),d[v]=[],m.isShareUser=!!(p&&p.length>1),m.maxIndex=n,m.maxval=0,m.drawData=[],m.comp={},m.comp[h.key]=!0,o.push(m),a.set(y,m),c.set(y,i),d[v].push(m))}}}catch(t){f.e(t)}finally{f.f()}}));for(var p=e.props.maxPerUnit,v={},y=1;y<f.length;++y){var m,g=""+f[y-1],b=""+f[y],_=new Map,k=$(u);try{var x=function(){var i=m.value,o=i[g],u=i[b],s=JSON.stringify([g,ut(o)]),f=JSON.stringify([b,ut(u)]);if(i[g]&&i[b]&&a.has(s)&&a.has(f)){var l=[s,f],d=JSON.stringify(l),y=Math.min(o.total,p),k=[i.key],x=_.get(d),w={},E={};if(w[i.key]=y,E[i.key]=Math.min(u.total,p),x){var O=Math.min((null!==(t=x.byComp[i.key])&&void 0!==t?t:0)+y,p),j=O-(null!==(n=x.byComp[i.key])&&void 0!==n?n:0);x.byComp[i.key]=O;var S=Math.min((null!==(r=x.byComp_t[i.key])&&void 0!==r?r:0)+E[i.key],p);return x.byComp_t[i.key]=S,a.get(s).comp[i.key]=!0,a.get(f).comp[i.key]=!0,o.jobs[0].forEach((function(t,e){return x.sources[t]={display:{},data:o.jobs[1][e]}})),u.jobs[0].forEach((function(t,e){return x.targets[t]={display:{},data:u.jobs[1][e]}})),x.value+=j,x.value,x.source.value,u.forEach((function(t,e){var n;x._target[e].value+=t.value,x._target.total=(null!==(n=x._target.total)&&void 0!==n?n:0)+t.value})),x.arr.push(k[0]),"continue"}var M=JSON.stringify([g,ut(o)]);a.get(M).comp[i.key]=!0;var A=JSON.stringify([b,ut(u)]);a.get(A).comp[i.key]=!0,v[s]||(v[s]=JSON.parse(JSON.stringify(i[g]))),v[f]=JSON.parse(JSON.stringify(i[b]));var N=v[s],P=v[f],C={},I={};o.jobs[0].forEach((function(t,e){return C[t]={display:{},data:o.jobs[1][e]}})),u.jobs[0].forEach((function(t,e){return I[t]={display:{},data:u.jobs[1][e]}})),x={byComp:w,byComp_t:E,source:c.get(M),sources:C,targets:I,_source:N,target:c.get(A),_target:P,names:l,arr:k,value:y,_id:"link_"+d.replace(/\.|\[|\]| |"|\\|:|-|,/g,"")},ut(o)!==ut(u)?(e.props.hideStable&&(a.get(JSON.stringify([g,ut(o)])).relatedLinks.push(x),a.get(JSON.stringify([b,ut(u)])).relatedLinks.push(x)),a.get(JSON.stringify([g,ut(o)])).shared=!0,a.get(JSON.stringify([b,ut(u)])).shared=!0):x.isSameNode=!0,h.push(x),_.set(d,x)}};for(k.s();!(m=k.n()).done;)x()}catch(t){k.e(t)}finally{k.f()}}if(e.props.showOverLimitUser){var w={},E={};o.forEach((function(t){E[t.id]=t})),h=h.filter((function(t){return t._source.total>36*t.arr.length||t._target.total>36*t.arr.length?(w[E[t.source].name]=!0,w[E[t.target].name]=!0,!0):(t.hide=!0,!1)})),o=o.filter((function(t,e){return!!w[t.name]||(delete E[t.id],!1)})),h=h.filter((function(t){return E[t.source]&&E[t.target]&&E[E[t.source].parentNode]&&E[E[t.target].parentNode]}))}if(e.props.hideStable){var O={};s.entries(d).forEach((function(t){var e={};t.value.find((function(t){return t.relatedLinks.length||(e[t.id]=!0),t.relatedLinks.length}))||s.keys(e).forEach((function(t){return O[t]=!0}))})),o=o.filter((function(t,e){return!O[t.id]})),h=h.filter((function(t){return!(O[t.source]||O[t.target])}))}return{nodes:o,links:h}}(),p={},v={};(h=d.nodes.filter((function(t){return p[t.id]=t,!!t.first&&(v[t.id]=!0,!0)}))).forEach((function(t){return t.color=e.getColorScale(t)}));var y=d.links.filter((function(t){return!t.isSameNode&&p[t.source]&&p[t.target]})).map((function(t){void 0===p[t.source].parentNode||v[t.source]||(p[p[t.source].parentNode].childNodes.push(t.source),h.push(p[t.source]),v[t.source]=!0),void 0===p[t.target].parentNode||v[t.target]||(p[p[t.target].parentNode].childNodes.push(t.target),h.push(p[t.target]),v[t.target]=!0);var e=Object.assign({},t);return e.source=p[t.source],e.target=p[t.target],e}));this.setState({isForceDone:!1});var m={},g=0,b=h.filter((function(t){return!!t.shared&&(m[t.id]=g,g++,!0)}));this.force.size([this.widthG(),this.heightG()]).nodes(b).links(y).constraints([{axis:"x",offsets:b.map((function(t,e){return{node:e,offset:0}})),type:"alignment"}]).jaccardLinkLengths(40,.7).start(20,0,10).on("tick",(function(){b.forEach((function(t,e){var n;if(void 0!==t.x&&void 0!==t.y)if(void 0!==t.parentNode)void 0!==p[t.parentNode]&&void 0!==p[t.parentNode].y&&(t.y+=.5*((null!==(n=p[t.parentNode].y)&&void 0!==n?n:0)-t.y)),p[t.parentNode].childNodes&&p[t.parentNode].childNodes.length&&(p[t.parentNode].y=s.mean(p[t.parentNode].childNodes,(function(t){return p[t].y})));else if(t.childNodes&&t.childNodes.length){var r=s.mean(t.childNodes,(function(t){return p[t].y}));void 0!==r&&(t.y+=.2*(r-t.y))}})),s.select("#timarc").selectAll("path.l").data(y).join("path").attr("class","l").attr("d",(function(t){var e=t.target.x-t.source.x,n=t.target.y-t.source.y,r=Math.sqrt(e*e+n*n)/2;return t.source.y<t.target.y?"M"+t.source.x+","+t.source.y+"A"+r+","+r+" 0 0,1 "+t.target.x+","+t.target.y:"M"+t.target.x+","+t.target.y+"A"+r+","+r+" 0 0,1 "+t.source.x+","+t.source.y})).attr("stroke","white").attr("fill","none")})).on("end",(function(){var t=1,n={};b.forEach((function(t){void 0!==t.parentNode&&p[t.parentNode].childNodes&&p[t.parentNode].childNodes.length?n[t.name]=s.mean(p[t.parentNode].childNodes,(function(t){return p[t].y})):t.y&&(n[t.name]=t.y)})),Object.keys(n).sort((function(t,e){return n[t]-n[e]})).forEach((function(t,e){return n[t]=10*e})),d.nodes.forEach((function(e){e._forcey=n[e.name],(void 0===e._forcey||c.isNaN(e._forcey))&&(void 0===n[e.name]?(n[e.name]=0-10*t,e._forcey=n[e.name],t++):e._forcey=n[e.name]),e.y=e._forcey})),a.nodeSort=function(t,e){return t._forcey-e._forcey};var r=e.renderSankey({graph:d},0),i=r.nodes,o=r.links,u=r.linksBySource;e.setState({nodes:i,links:o,linksBySource:u,graph:d,isForceDone:!0})})),this.setState({times:l,graph:d})}},{key:"renderSankey",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.x,i=this.sankey,o=this.nodeSort.bind(this),a=null!==(t=e.graph)&&void 0!==t?t:this.state.graph,u={};a.nodes.forEach((function(t){u[t.id]=t})),i.nodeId((function(t){return t.id})).nodeSort(o).extent([[r.range()[0],10],[r.range()[1],this.heightG()-10]]);var c=a.nodes.map((function(t){return Object.assign({},t)})),f=a.links.map((function(t){var e=Object.assign({},t);return e._value=e.value,e.value=t.value+n,e})),l=i({nodes:c,links:f}),h=l.nodes,d=l.links,p=s.nest().key((function(t){return t.source.name})).entries(d);return p.forEach((function(t){var e=t.values[0].source,n=t.values[0];t.drawP=[st(n)],t.draw=[e],t.values.forEach((function(r){e!==r.source?(t.draw.push(e,r.source),t.drawP.push(ct(n),void 0,st(r))):(t.draw.push(r.source),t.drawP.push(ct(n),st(r))),e=r.target,n=r})),t.draw.push(e),t.drawP.push(ct(n)),t._class=pt(t.key)})),this.isAnimate=!0,d.length>400&&(this.isAnimate=!1),d.forEach((function(t){if(t.isSameNode){var e=t.source;void 0!==t.source.parentNode&&(e=u[t.source.parentNode]),0!==e.drawData.length&&e.drawData[e.drawData.length-1][0]===t.source.time||e.drawData.push([t.source.time,t.value]),e.drawData.push([t.target.time,t.value])}t._class=pt(t.source.name)})),{nodes:h,links:d,linksBySource:p,graph:a}}},{key:"onMouseOver",value:function(t,e){var n=J(s.clientPoint(e.target,e),2),r=n[0],i=(n[1],t.values[s.bisect(t.values.map((function(t){return t.source.time})),this.x.invert(r))]);if(i&&(!this.state.highlight||this.state.highlight&&i!==this.state.highlight.el)){var o={list:{},el:i,event:e};i.source.element.length>1?(o.list[i.source.name]=!0,i.source.element.forEach((function(t){return o.list[t.key]=!0}))):o.list[i.source.name]=!0,this.setState({highlight:o}),this.props.mouseOver(i)}}},{key:"onRelease",value:function(){this.setState({highlight:void 0,highlightJob:void 0}),this.props.mouseLeave()}},{key:"onMouseOverJob",value:function(t){var e,n={el:t};this.setState({highlightJob:n}),this.props.mouseOver(null===(e=this.state.highlight)||void 0===e?void 0:e.el,t)}},{key:"onReleaseJob",value:function(){var t;this.setState({highlightJob:void 0}),this.props.mouseOver(null===(t=this.state.highlight)||void 0===t?void 0:t.el)}},{key:"_getColorScale_byName",value:function(t){var e;return t.isShareUser?this.props.theme.isDark?"#696969":"black":this._color(null!==(e=t.name)&&void 0!==e?e:"")}},{key:"getCluster",value:function(t){var e=this,n=t.layer,r={};Object.keys(t.comp).forEach((function(t){if(e.props.metrics){var i=e.props.metrics[t];if(i&&i[n]){var o=i[n].cluster;void 0!==o&&(r[o]||(r[o]=0),r[o]++)}}}));var i=Object.keys(r).length;return i>1?void 0:1===i?Object.keys(r)[0]:"outlier"}},{key:"getValue",value:function(t){var e,n=this,r=t.layer,i=+(null!==(e=this.props.colorBy)&&void 0!==e?e:"0"),o=0,a=0;return Object.keys(t.comp).forEach((function(e){if(n.props.metrics){var u=n.props.metrics[e];if(u&&u[r]){var s=u[r][i];void 0!==s&&(o+=s*t.comp[e],a+=t.comp[e])}}})),a?o/a:void 0}},{key:"_getColorScale_byCluster",value:function(t){var e=this.getCluster(t);return e?this.props.colorCluster(e):"white"}},{key:"_getColorScale_byValue",value:function(t){var e=this.getValue(t);return""+this.color(e)}},{key:"renderLink",value:function(t){var e,n,r,i=this,o=this.props.sankeyComputeSelected,u=t.draw[0].x1,f=c.last(t.draw),l=null!==(e=null==f?void 0:f.x0)&&void 0!==e?e:0,h=s.scaleLinear().range([0,100]).domain([u,l]),d="name"!==this.props.colorBy?"url(#".concat(t.values[0]._id,")"):this.getColorScale(null!==(n=t.draw[0])&&void 0!==n?n:{}),p=[];o&&o.nodes[t.key]&&t.values.forEach((function(e){o.nodes[t.key][e.target.layer]&&(o.nodes[t.key][e.target.layer].x=e.target.x0,o.nodes[t.key][e.target.layer].y=e.y1,p.push(o.nodes[t.key][e.target.layer]))}));var v=this.props.colorCluster?this.props.colorCluster("outlier"):"gray";return a.a.createElement(a.a.Fragment,null,"name"!==this.props.colorBy?a.a.createElement("linearGradient",{id:t.values[0]._id,gradientUnits:"userSpaceOnUse",x1:u,x2:l},t.draw.map((function(t){return a.a.createElement("stop",{key:t.index,offset:"".concat(h(t.x0),"%"),stopColor:i.getColorScale(t)})}))):"",a.a.createElement("path",{className:"main",fill:d,stroke:d,strokeWidth:.1,d:null!==(r=ht(t.drawP))&&void 0!==r?r:""}),o?p.map((function(t){return a.a.createElement("circle",{fill:v,key:t.timestep,r:Math.sqrt(t.value)+2,cx:t.x,cy:t.y,stroke:"white"})})):"")}},{key:"render",value:function(){var t,e,n,r=this,i=this.props,o=i.width,u=i.height,c=i.theme,f=i.timespan,l=i.lineaScale,h=this.state,d=h.margin,p=h.nodes,v=h.linksBySource,y=h.isForceDone,m=h.highlight,g=h.highlightJob,b=this.x,_=this.y,k=Ot(this.props.theme);_.range([0,this.heightG()]).padding(this.padding),b.range([0,this.widthG()]);var x=s.scaleTime().range(b.range()).domain([f[0],f[f.length-1]]);if(this._color=null!==(t=this.props.colorByName)&&void 0!==t?t:s.scaleOrdinal(["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"]),this.color=null!==(e=this.props.color)&&void 0!==e?e:this._color,this.props.color)switch(this.props.colorBy){case"name":this.getColorScale=this._getColorScale_byName;break;case"cluster":this.getColorScale=this._getColorScale_byCluster;break;default:this.getColorScale=this._getColorScale_byValue}var w=null!==(n=null==g?void 0:g.el.time)&&void 0!==n?n:null==m?void 0:m.el.source.time;return ot.y0((function(t){return t[1]+(t[2]+l)})).y1((function(t){return t[1]-(t[2]+l)})),a.a.createElement("div",{style:{width:o+" px",height:u+" px",position:"relative"}},a.a.createElement("svg",{width:o,height:u,viewBox:"0 0 ".concat(o," ").concat(u),ref:this.svgRef,className:k.svg},a.a.createElement("defs",null,a.a.createElement("clipPath",{id:"timeClip"},a.a.createElement("rect",{x:-d.left,width:d.left,height:this.heightG()}))),a.a.createElement("rect",{className:"pantarget",width:o,height:u,onClick:function(){return r.freezeHandle()},opacity:"0"}),this.state.freezing&&a.a.createElement("text",{fill:this.props.theme.isDark?"white":"black",transform:"translate(".concat(this.widthG()/2,",20)")},"Click anywhere to release"),y?a.a.createElement("g",{className:"content"+(m?" onhighlight":"")},a.a.createElement("g",{className:"background",opacity:.2}),a.a.createElement("g",{className:"drawArea"},a.a.createElement("g",{className:"nodes"},p.filter((function(t){return t.first})).map((function(t){return a.a.createElement("g",{key:t.name,className:"outer_node element"+(m&&m.list[t.name]?" highlight":""),transform:"translate(".concat(t.x0,",").concat(t.y0,")")},a.a.createElement("text",{x:-6,y:(t.y1+t.y0)/2-t.y0,dy:"0.35em",textAnchor:"end",paintOrder:"stroke",stroke:r.props.theme.isDark?"black":"white",strokeWidth:3,fill:t.first?r._getColorScale_byName(t):"none",fontWeight:t.isShareUser?void 0:"bold"},t.first?t.name:""))}))),a.a.createElement("g",{className:"links"},v.map((function(t){return a.a.createElement(X,{className:"outer_node element "+t.values[0]._class+(t.hide?" hide":"")+(m&&m.list[t.key]?" highlight":""),key:t.key,opacity:.7,transform:"scale(1,1)",freezing:r.state.freezing,setfreezing:function(t){r.setState({freezing:t}),t||r.onRelease()},mouseMove:function(e){return r.onMouseOver(t,e)},mouseLeave:function(){return r.onRelease()}},r.renderLink(t),m&&m.list[t.key]?t.values.map((function(t){return a.a.createElement("g",{key:t._id,stroke:r.props.theme.isDark?"black":"white",style:{pointerEvents:r.state.freezing?"all":"none"}},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,u=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,f=ft(t),l=lt(t),h=t.width,d=(l[0]-f[0])/2,p=s.sum(Object.values(t.byComp_t)),v=s.scaleLinear().domain([0,p]).range([0,h+e]),y=-h/2,m={},g={};return Object.keys(t.sources).forEach((function(e){g[e]={},t.sources[e].data.node_list.forEach((function(r){var i;t.source.comp[r]&&(g[e][r]=Math.min(n,t.sources[e].data.node_list_obj[r]),m[r]=(null!==(i=m[r])&&void 0!==i?i:0)+g[e][r])}))})),Object.keys(t.sources).forEach((function(e){var n,r,i=g[e],o=1/0;t.sources[e].data[t.source.layer-1]&&(o=null!==(n=s.mean(t.sources[e].data[t.source.layer-1],(function(t){return t.y})))&&void 0!==n?n:1/0);var a=t.source.layer===t.sources[e].data.finish_Index,u=s.sum(Object.keys(i),(function(e){return i[e]/m[e]*t.byComp[e]})),c=null!==(r=v(u))&&void 0!==r?r:0;t.sources[e].display={compS:i,compT:{},isEnd:a,_thick:c,oldpos:o,data:t.sources[e].data},t.sources[e].data[t.source.layer]||(t.sources[e].data[t.source.layer]=[t.sources[e].display])})),a.a.createElement(a.a.Fragment,null,Object.keys(t.sources).sort((function(e,n){return t.sources[e].display.oldpos-t.sources[n].display.oldpos})).map((function(e,n){var s=t.sources[e].display,h=s.compS,p=s.isEnd,v=s._thick,m=s.data;y+=v,t.sources[e].display.y=l[1]+y-v/2;var g={};Object.keys(h).forEach((function(n){return g[n]=t.sources[e].data.node_list_obj[n]}));var b=Object.assign(Object.assign({},t.source),{comp:g}),_=r(b),k=v/2;return a.a.createElement("g",{key:t._id+"__"+e,onMouseOver:function(){return i({name:e,user_name:t.source.name,x:f[0],y:t.sources[e].display.y,time:t.source.time,layer:t.source.layer,value:u(b),data:m})},onMouseLeave:function(){return o()},className:c&&c.el.name!==e?"fade":""},p?a.a.createElement("linearGradient",{id:t._id+"__"+e,gradientUnits:"userSpaceOnUse",x1:t.source.x1,x2:t.target.x0},a.a.createElement("stop",{offset:"0%",stopColor:_}),a.a.createElement("stop",{offset:"100%",stopColor:"black"})):"",a.a.createElement("path",{fill:p?"url(#".concat(t._id+"__"+e,")"):_,strokeWidth:.1,d:dt([f[0],f[1]+y-k],[l[0],t.sources[e].display.y],d,k)}))})))}(t,r.props.lineaScale,r.props.maxPerUnit,r.getColorScale.bind(r),r.onMouseOverJob.bind(r),r.onReleaseJob.bind(r),r.getValue.bind(r),g))})):"")}))),m&&!g?a.a.createElement("g",{transform:"translate(".concat(m.el.target.x0+5,",").concat(m.el.y1+5,")"),stroke:"black",fill:"white",style:{pointerEvents:"none"}},a.a.createElement("text",{strokeWidth:1,paintOrder:"stroke"},m.el.source.name),a.a.createElement("text",{strokeWidth:1,y:14,paintOrder:"stroke"},"#","core"===this.props.mode?"Cores":"Nodes","=",+s.format(".2f")(m.el.source.value)),a.a.createElement("text",{strokeWidth:1,y:28,paintOrder:"stroke"},this.props.getMetric(m.el.value))):"",g?a.a.createElement("g",{transform:"translate(".concat(g.el.x+5,",").concat(g.el.y+5,")"),stroke:"black",fill:"white",style:{pointerEvents:"none"}},a.a.createElement("text",{strokeWidth:1,y:-14,paintOrder:"stroke"},"User: ",g.el.user_name),a.a.createElement("text",{strokeWidth:1,paintOrder:"stroke"},"JobId: ",g.el.name),a.a.createElement("text",{strokeWidth:1,y:14,paintOrder:"stroke"},"Compute: ",g.el.data.node_list.length>5?g.el.data.node_list.slice(0,5).join(", ")+" + ".concat(g.el.data.node_list.length-5):g.el.data.node_list.join(", ")),a.a.createElement("text",{strokeWidth:1,y:28,paintOrder:"stroke"},"Start: ",new Date(g.el.data.start_time).toLocaleString()),a.a.createElement("text",{strokeWidth:1,y:42,paintOrder:"stroke"},"End ",g.el.data.finish_time?new Date(g.el.data.finish_time).toLocaleString():"-"),a.a.createElement("text",{strokeWidth:1,y:56,paintOrder:"stroke"},this.props.getMetric(g.el.value))):""),a.a.createElement("g",{className:"axis"},a.a.createElement("g",{className:"axisx",transform:"translate(0,".concat(this.heightG(),")")},x.ticks(10).map((function(t){return a.a.createElement("g",{className:"ticks",transform:"translate(".concat(x(t),",",0,")")},a.a.createElement("text",{dy:"1.5rem",textAnchor:"middle",fill:r.props.theme.isDark?"white":"black"},(e=t,(s.timeSecond(e)<e?vt:s.timeMinute(e)<e?yt:s.timeHour(e)<e?mt:s.timeDay(e)<e?gt:s.timeMonth(e)<e?s.timeWeek(e)<e?bt:_t:s.timeYear(e)<e?kt:xt)(e))),a.a.createElement("line",{y2:5,vectorEffect:"non-scaling-stroke",style:{stroke:r.props.theme.isDark?"white":"black",strokeWidth:.2}}));var e})),a.a.createElement("line",{x2:x.range()[1],vectorEffect:"non-scaling-stroke",style:{stroke:this.props.theme.isDark?"white":"black",strokeWidth:.5}}))),a.a.createElement("g",{className:"",transform:"translate(".concat(x(w),",0)")},a.a.createElement("line",{className:"timeStick",y2:this.heightG(),stroke:c.colors.text.primary,strokeDasharray:"2 1"}),a.a.createElement("text",{y:this.heightG(),dy:"2.5rem",fill:this.props.theme.isDark?"white":"black"},w?new Date(+w).toLocaleString():""))):a.a.createElement("svg",{width:o,height:u,viewBox:"0 0 ".concat(o," ").concat(u),id:"timarc",style:{backgroundColor:"white"}})))}}])&&tt(e.prototype,n),r&&tt(e,r),o}(a.a.Component);function ut(t){return t&&t.length?t.map((function(t){return t.key})).join(","):"No user"}function st(t){return[t.source.x1,t.y0,t.width/2]}function ct(t){return[t.target.x0,t.y1,t.width/2]}function ft(t){return[t.source.x1,t.y0]}function lt(t){return[t.target.x0,t.y1]}function ht(t){return ot(t)}function dt(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return r+=i,"M ".concat(t[0]," ").concat(t[1]-r," C ").concat(t[0]+n," ").concat(t[1]-r,", ").concat(e[0]-n," ").concat(e[1]-r,", ").concat(e[0]," ").concat(e[1]-r,"\n            L ").concat(e[0]," ").concat(e[1]+r," C ").concat(e[0]-n," ").concat(e[1]+r,", ").concat(t[0]+n," ").concat(t[1]+r,", ").concat(t[0]," ").concat(t[1]+r," Z")}function pt(t){return"l"+t.replace(/ |,/g,"_")}var vt=s.timeFormat(".%L"),yt=s.timeFormat(":%S"),mt=s.timeFormat("%I:%M"),gt=s.timeFormat("%I %p"),bt=s.timeFormat("%a %d"),_t=s.timeFormat("%b %d"),kt=s.timeFormat("%B"),xt=s.timeFormat("%Y");var wt,Et,Ot=Object(W.stylesFactory)((function(t){return{svg:Object(l.css)(H||(e=["\n            & .fade \n            {opacity: 0.2;}\n             & .onhighlight .outer_node:not(.highlight) \n                  {opacity: 0.1;}\n              & .onhighlight .outer_node.highlight \n                  {opacity: 1;\n                  & path.main {opacity:0}\n                  }\n            "],n||(n=e.slice(0)),H=Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))))};var e,n}));function jt(t){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function St(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function Mt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function At(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Nt(t,e){return(Nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Pt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=It(t);if(e){var i=It(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ct(this,n)}}function Ct(t,e){return!e||"object"!==jt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function It(t){return(It=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Lt,Dt,Bt,Tt,zt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nt(t,e)}(o,t);var e,n,r,i=Pt(o);function o(){var t;return Mt(this,o),(t=i.apply(this,arguments)).svgRef=a.a.createRef(),t.state={margin:{top:0,bottom:0,left:50,right:50},dataViz:[],realTotal:0,refTotal:0,virtualTotal:0,seperate:void 0},t}return e=o,(n=[{key:"widthView",value:function(){var t;return this.props.width*(null!==(t=this.state.scalezoom)&&void 0!==t?t:1)}},{key:"heightView",value:function(){var t;return this.props.height*(null!==(t=this.state.scalezoom)&&void 0!==t?t:1)}},{key:"widthG",value:function(){var t,e;return this.widthView()-(null!==(t=this.state.margin)&&void 0!==t?t:{top:0,bottom:0,left:0,right:0}).left-(null!==(e=this.state.margin)&&void 0!==e?e:{top:0,bottom:0,left:0,right:0}).right}},{key:"heightG",value:function(){var t,e;return this.heightView()-(null!==(t=this.state.margin)&&void 0!==t?t:{top:0,bottom:0,left:0,right:0}).top-(null!==(e=this.state.margin)&&void 0!==e?e:{top:0,bottom:0,left:0,right:0}).bottom}},{key:"centerX",value:function(){return this.state.margin.left+this.widthG()/2}},{key:"centerY",value:function(){return this.state.margin.top+this.heightG()/2}},{key:"handleData",value:function(t){var e;t.sort((function(t,e){return e.value.totalCore-t.value.totalCore}));var n=s.sum(t,(function(t){return t.value.totalCore})),r=null!==(e=this.props.refValue)&&void 0!==e?e:n,i=n-r;t.forEach((function(t){if(t.value.value=t.value.totalCore/n*r,void 0!==t.value.totalCore_share&&void 0!==t.value.totalCore_notShare){var e=t.value.totalCore_share+t.value.totalCore_notShare;t.value.inside=[t.value.totalCore_notShare/e,t.value.totalCore_share/e]}})),t.push({key:"No User",value:{value:this.props.maxValue-r}});var o=s.pie().sort(null).value((function(t){return t.value.value}))(t);return o.forEach((function(t){if(t.data.value.inside){var e=(t.endAngle-t.startAngle)*t.data.value.inside[0]+t.startAngle;t.insideData=[{key:t.data.text,endAngle:e,padAngle:0,startAngle:t.startAngle},{key:"_share_",endAngle:t.endAngle,padAngle:0,startAngle:e}].filter((function(e,n){return t.data.value.inside[n]}))}})),{dataViz:o,realTotal:n,refTotal:r,virtualTotal:i}}},{key:"componentDidMount",value:function(){this.setState(this.handleData(this.props.data.slice()))}},{key:"componentDidUpdate",value:function(t,e,n){var r={};this.props.data!==t.data||this.props.refValue!==t.refValue||this.props.maxValue!==t.maxValue?((r=Object.assign({},this.handleData(this.props.data.slice()))).seperate=void 0,this.setState(r),this.updateOverlay(r)):this.props.overlay!==t.overlay&&this.updateOverlay()}},{key:"updateOverlay",value:function(){var t,e,n,r=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.props.overlay){var o=null!==(t=i.dataViz)&&void 0!==t?t:this.state.dataViz;if(o.length){var a=o.find((function(t){var e;return t.data.key===(null===(e=r.props.overlay)||void 0===e?void 0:e.parent)}));if(a){var u=(null===(e=this.props.overlay)||void 0===e?void 0:e.value)/(a.data.value.totalCore_share+a.data.value.totalCore_notShare),s=a.startAngle+(a.endAngle-a.startAngle)*u;this.setState({overlay:[{key:null===(n=this.props.overlay)||void 0===n?void 0:n.key,endAngle:s,padAngle:a.padAngle,color:"#ddd",startAngle:a.startAngle}]})}else this.setState({overlay:void 0})}}else this.setState({overlay:void 0})}},{key:"onClick",value:function(t){this.state.seperate?(this.props.onseperate(t.data.key,!1),this.setState({seperate:void 0})):(this.props.onseperate(t.data.key,!0),this.setState({seperate:t}))}},{key:"render",value:function(){var t,e=this,n=null!==(t=this.props.color)&&void 0!==t?t:s.scaleOrdinal(["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"]),r=this.props,i=r.width,o=r.height,u=r.maxValue,c=r.highlight,f=this.state,h=f.dataViz,d=f.refTotal,p=f.seperate,v=f.overlay,y=Rt(this.props.theme),m=Math.min(this.widthG(),this.heightG())/2,g=s.arc().outerRadius(.8*m).innerRadius(.4*m),b=s.arc().innerRadius(.9*m).outerRadius(.9*m),_=h[h.length-1],k=d/u*100,x=c?Object.keys(c.node).length:0,w=this.props.theme.isDark?"#696969":"black";return a.a.createElement("svg",{width:i,height:o,viewBox:"0 0 ".concat(i," ").concat(o),ref:this.svgRef},(null==c?void 0:c.time)?a.a.createElement("text",{x:this.centerX(),y:18,textAnchor:"middle",fill:this.props.theme.isDark?"white":"black"},new Date(+c.time).toLocaleString()):"",a.a.createElement("g",{className:c?Object(l.cx)("content",y.onHighlight):y.content,transform:"translate(".concat(this.centerX(),",").concat(this.centerY(),")")},a.a.createElement("g",{className:"slices"},h.map((function(t){var r;return a.a.createElement("g",{className:"slice"+(c&&c.node[t.data.key]?" highlight"+(1===x?" clickable":""):"")+(p&&p.insideData?" seperated":""),key:t.data.key,onClick:function(){return e.onClick(t)}},a.a.createElement("path",{className:"slice"+("No User"===t.data.key?" hide":""),opacity:.7,fill:n(t.data.key),d:null!==(r=g(t))&&void 0!==r?r:""}),a.a.createElement("title",null,t.data.key+" #Cores: "+t.value),a.a.createElement("text",{dy:".35em",key:t.data.key,transform:"translate(".concat(Ft(t,b,m),")"),textAnchor:Vt(t)<Math.PI?"start":"end",fill:n(t.data.key),className:"textLabel"+("No User"===t.data.key||t.endAngle-t.startAngle<Math.PI/10?" hide":"")},t.data.text),a.a.createElement("polyline",{key:t.data.key,stroke:e.props.theme.isDark?"white":"black",points:""+Gt(t,b,g,m),className:c?c.node[t.data.key]?"":"hide":"No User"===t.data.key||t.endAngle-t.startAngle<Math.PI/10?" hide":""}))}))),p&&p.insideData?a.a.createElement("g",{style:{pointerEvents:"none"}},p.insideData.map((function(t){return a.a.createElement("g",{fill:"_share_"==t.key?w:n(t.key)},a.a.createElement("path",{className:"slice",opacity:1,d:""+g(t)}),a.a.createElement("text",{dy:".35em",transform:"translate(".concat(Ft(t,b,m),")"),textAnchor:Vt(t)<Math.PI?"start":"end",className:"textLabel"},"_share_"===t.key?"Share":t.key),a.a.createElement("polyline",{fill:"none",stroke:e.props.theme.isDark?"white":"black",points:""+Gt(t,b,g,m)}))}))):"",v&&v?a.a.createElement("g",{style:{pointerEvents:"none"}},v.map((function(t){return a.a.createElement("g",{fill:t.color},a.a.createElement("path",{className:"slice",opacity:1,d:""+g(t)}),a.a.createElement("text",{dy:".35em",transform:"translate(".concat(Ft(t,b,m),")"),textAnchor:Vt(t)<Math.PI?"start":"end",className:"textLabel"},t.key),a.a.createElement("polyline",{fill:"none",stroke:e.props.theme.isDark?"white":"black",points:""+Gt(t,b,g,m)}))}))):"",_?a.a.createElement(a.a.Fragment,null,c&&a.a.createElement("text",{className:"sumLabels",textAnchor:"middle",fill:this.props.theme.isDark?"white":"black",style:{fontWeight:"bold",fontSize:"16px"}},s.format(".2f")(c.data.value/u*100)+"%"),a.a.createElement("text",{className:"sumLabels",textAnchor:"middle",fill:this.props.theme.isDark?"white":"black",y:c?18:0,style:{fontWeight:"bold",fontSize:c?"10px":"16px"}},s.format(".2f")(k)+"%")):""))}}])&&At(e.prototype,n),r&&At(e,r),o}(a.a.Component),Rt=Object(W.stylesFactory)((function(t){return{content:Object(l.css)(wt||(wt=St(["\n        & .slice\n        {pointer-events: none}\n    "]))),onHighlight:Object(l.css)(Et||(Et=St(["\n     & g.slice:not(.highlight)\n     {\n          pointer-events: none;\n          & path.slice\n         {opacity: 0.2;}\n         & .textLabel\n         {display: none;}\n         & polyline\n         {display: none;}\n     }\n    & g.slice.highlight\n     {\n          pointer-events: none;\n          &.clickable\n          {pointer-events: all;}\n          & path.slice\n         {opacity: 1;}\n         & .textLabel\n         {display: block;}\n         & polyline\n         {display: block;}\n         &.seperated\n         {\n              & path.slice\n             {opacity: 0;}\n             & .textLabel\n             {display: none;}\n             & polyline\n             {display: none;}\n         }\n     }\n    "])))}}));function Ft(t,e,n){return e.centroid(t)}function Gt(t,e,n,r){return n.centroid(t)[0]=.95*r*(Vt(t)<Math.PI?1:-1),[e.centroid(t),n.centroid(t)]}function Vt(t){return t.startAngle+(t.endAngle-t.startAngle)/2}function qt(t){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ut(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function Yt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ht(t,e){return(Ht=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Xt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Kt(t);if(e){var i=Kt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Wt(this,n)}}function Wt(t,e){return!e||"object"!==qt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Kt(t){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Jt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ht(t,e)}(o,t);var e,n,r,i=Xt(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).onOpen=function(){var t=!e.state.open;e.setState({open:t})},e.state={open:!!t.open},e}return e=o,(n=[{key:"render",value:function(){var t=$t(Object(W.getTheme)()),e=this.state.open;return a.a.createElement("div",{className:Object(u.cx)(this.props.className,t.wapper)},e?a.a.createElement(a.a.Fragment,null,this.props.title&&a.a.createElement("h5",null,this.props.title),a.a.createElement("div",{className:t.innerHolder,style:{height:this.props.title?"calc(100% - 20px)":"100%"}},this.props.children)):"",a.a.createElement(W.IconButton,{className:t.drawButton,name:e?"arrow-left":"arrow-right",size:"xl",onClick:this.onOpen}))}}])&&Yt(e.prototype,n),r&&Yt(e,r),o}(a.a.Component),$t=Object(W.stylesFactory)((function(t){var e=s.color(t.colors.bg1);return e&&(e.opacity=.8),{wapper:Object(u.css)(Lt||(Lt=Ut(["\n        background-color: ",";\n        padding: 10px;\n        "])),""+e),innerHolder:Object(u.css)(Dt||(Dt=Ut(["\n        overflow: auto;\n       \n        margin-right: 12px\n        "]))),tableCell:Object(u.css)(Bt||(Bt=Ut(["\n         padding-left: 5px;\n         padding-right: 5px;\n         "]))),drawButton:Object(u.css)(Tt||(Tt=Ut(["\n        position: absolute;\n        top: 50%;\n        right: 0;\n        // transform: translateX(50%)\n        "])))}})),Zt=s.timeFormat(".%L"),Qt=s.timeFormat(":%S"),te=s.timeFormat("%I:%M"),ee=s.timeFormat("%I %p"),ne=s.timeFormat("%a %d"),re=s.timeFormat("%b %d"),ie=s.timeFormat("%B"),oe=s.timeFormat("%Y");var ae={n:7,rainbow:["#000066","#4400ff","#00ddff","#00ddaa","#00dd00","#aadd00","#ffcc00","#ff8800","#ff0000","#660000"],soil:["#2244AA","#4A8FC2","#76A5B1","#9DBCA2","#C3D392","#F8E571","#F2B659","#eb6424","#D63128","#660000"],customschemeCategory:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#bcbd22","#17becf"],schemeCategory20:["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],customFunc:function(t,e,n){var r=null!=n?n:this.n,i=null!=e?e:this[t],o=i.length,a=s.range(0,o).map((function(t){return t/(o-1)})),u=s.scaleLinear().domain(a).range(i).interpolate(s.interpolateHcl);return s.range(0,r).map((function(t){return u(t/(r-1))}))},d3colorChosefunc:function(t,e){var n=null!=e?e:this.n,r=s["scheme".concat(t)],i=[];if(r)i="string"!=typeof r[0]?(r[n]||r[r.length-1]).slice():r.slice();else{var o=s["interpolate".concat(t)];i=[];for(var a=0;a<n;++a)i.push(s.rgb(o(a/(n-1))).hex())}return i=this.customFunc(void 0,i,n)}},ue=function(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n},se=ue("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),ce=ue("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),fe=ue("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),le=ue("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),he=ue("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),de=ue("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),pe=ue("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),ve=ue("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),ye=ue("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),me=ue("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),ge=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function be(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function _e(){}var ke="\\s*([+-]?\\d+)\\s*",xe="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",we="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ee=/^#([0-9a-f]{3,8})$/,Oe=new RegExp("^rgb\\("+[ke,ke,ke]+"\\)$"),je=new RegExp("^rgb\\("+[we,we,we]+"\\)$"),Se=new RegExp("^rgba\\("+[ke,ke,ke,xe]+"\\)$"),Me=new RegExp("^rgba\\("+[we,we,we,xe]+"\\)$"),Ae=new RegExp("^hsl\\("+[xe,we,we]+"\\)$"),Ne=new RegExp("^hsla\\("+[xe,we,we,xe]+"\\)$"),Pe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ce(){return this.rgb().formatHex()}function Ie(){return this.rgb().formatRgb()}function Le(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ee.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?De(e):3===n?new Re(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Be(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Be(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Oe.exec(t))?new Re(e[1],e[2],e[3],1):(e=je.exec(t))?new Re(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Se.exec(t))?Be(e[1],e[2],e[3],e[4]):(e=Me.exec(t))?Be(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Ae.exec(t))?qe(e[1],e[2]/100,e[3]/100,1):(e=Ne.exec(t))?qe(e[1],e[2]/100,e[3]/100,e[4]):Pe.hasOwnProperty(t)?De(Pe[t]):"transparent"===t?new Re(NaN,NaN,NaN,0):null}function De(t){return new Re(t>>16&255,t>>8&255,255&t,1)}function Be(t,e,n,r){return r<=0&&(t=e=n=NaN),new Re(t,e,n,r)}function Te(t){return t instanceof _e||(t=Le(t)),t?new Re((t=t.rgb()).r,t.g,t.b,t.opacity):new Re}function ze(t,e,n,r){return 1===arguments.length?Te(t):new Re(t,e,n,null==r?1:r)}function Re(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Fe(){return"#"+Ve(this.r)+Ve(this.g)+Ve(this.b)}function Ge(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Ve(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function qe(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ye(t,e,n,r)}function Ue(t){if(t instanceof Ye)return new Ye(t.h,t.s,t.l,t.opacity);if(t instanceof _e||(t=Le(t)),!t)return new Ye;if(t instanceof Ye)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,u=o-i,s=(o+i)/2;return u?(a=e===o?(n-r)/u+6*(n<r):n===o?(r-e)/u+2:(e-n)/u+4,u/=s<.5?o+i:2-o-i,a*=60):u=s>0&&s<1?0:a,new Ye(a,u,s,t.opacity)}function Ye(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function He(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Xe(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}ge(_e,Le,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Ce,formatHex:Ce,formatHsl:function(){return Ue(this).formatHsl()},formatRgb:Ie,toString:Ie}),ge(Re,ze,be(_e,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Re(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Re(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Fe,formatHex:Fe,formatRgb:Ge,toString:Ge})),ge(Ye,(function(t,e,n,r){return 1===arguments.length?Ue(t):new Ye(t,e,n,null==r?1:r)}),be(_e,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ye(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ye(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Re(He(t>=240?t-240:t+120,i,r),He(t,i,r),He(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var We=function(t){return function(){return t}};function Ke(t,e){return function(n){return t+n*e}}function Je(t){return 1==(t=+t)?$e:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):We(isNaN(e)?n:e)}}function $e(t,e){var n=e-t;return n?Ke(t,n):We(isNaN(t)?e:t)}(function t(e){var n=Je(e);function r(t,e){var r=n((t=ze(t)).r,(e=ze(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=$e(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r})(1);function Ze(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),u=new Array(i);for(n=0;n<i;++n)r=ze(e[n]),o[n]=r.r||0,a[n]=r.g||0,u[n]=r.b||0;return o=t(o),a=t(a),u=t(u),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=u(t),r+""}}}var Qe=Ze((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,u=r<e-1?t[r+2]:2*o-i;return Xe((n-r/e)*e,a,i,o,u)}})),tn=(Ze((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],u=t[(r+2)%e];return Xe((n-r/e)*e,i,o,a,u)}})),function(t){return Qe(t[t.length-1])}),en=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(ue),nn=tn(en),rn=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(ue),on=tn(rn),an=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(ue),un=tn(an),sn=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(ue),cn=tn(sn),fn=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(ue),ln=tn(fn),hn=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(ue),dn=tn(hn),pn=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(ue),vn=tn(pn),yn=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(ue),mn=tn(yn),gn=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(ue),bn=tn(gn),_n=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(ue),kn=tn(_n),xn=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(ue),wn=tn(xn),En=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(ue),On=tn(En),jn=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(ue),Sn=tn(jn),Mn=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(ue),An=tn(Mn),Nn=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(ue),Pn=tn(Nn),Cn=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(ue),In=tn(Cn),Ln=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(ue),Dn=tn(Ln),Bn=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(ue),Tn=tn(Bn),zn=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(ue),Rn=tn(zn),Fn=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(ue),Gn=tn(Fn),Vn=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(ue),qn=tn(Vn),Un=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(ue),Yn=tn(Un),Hn=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(ue),Xn=tn(Hn),Wn=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(ue),Kn=tn(Wn),Jn=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(ue),$n=tn(Jn),Zn=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(ue),Qn=tn(Zn),tr=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(ue),er=tn(tr),nr=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},rr=Math.PI/180,ir=180/Math.PI,or=-.14861,ar=1.78277,ur=-.29227,sr=-.90649,cr=1.97294,fr=cr*sr,lr=cr*ar,hr=ar*ur-sr*or;function dr(t){if(t instanceof vr)return new vr(t.h,t.s,t.l,t.opacity);t instanceof Re||(t=Te(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(hr*r+fr*e-lr*n)/(hr+fr-lr),o=r-i,a=(cr*(n-i)-ur*o)/sr,u=Math.sqrt(a*a+o*o)/(cr*i*(1-i)),s=u?Math.atan2(a,o)*ir-120:NaN;return new vr(s<0?s+360:s,u,i,t.opacity)}function pr(t,e,n,r){return 1===arguments.length?dr(t):new vr(t,e,n,null==r?1:r)}function vr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function yr(t){return function e(n){function r(e,r){var i=t((e=pr(e)).h,(r=pr(r)).h),o=$e(e.s,r.s),a=$e(e.l,r.l),u=$e(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=u(t),e+""}}return n=+n,r.gamma=e,r}(1)}ge(vr,pr,be(_e,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new vr(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new vr(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*rr,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Re(255*(e+n*(or*r+ar*i)),255*(e+n*(ur*r+sr*i)),255*(e+n*(cr*r)),this.opacity)}}));yr((function(t,e){var n=e-t;return n?Ke(t,n>180||n<-180?n-360*Math.round(n/360):n):We(isNaN(t)?e:t)}));var mr=yr($e),gr=mr(pr(300,.5,0),pr(-240,.5,1)),br=mr(pr(-100,.75,.35),pr(80,1.5,.8)),_r=mr(pr(260,.75,.35),pr(80,1.5,.8)),kr=pr(),xr=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return kr.h=360*t-100,kr.s=1.5-1.5*e,kr.l=.8-.9*e,kr+""},wr=ze(),Er=Math.PI/3,Or=2*Math.PI/3,jr=function(t){var e;return t=(.5-t)*Math.PI,wr.r=255*(e=Math.sin(t))*e,wr.g=255*(e=Math.sin(t+Er))*e,wr.b=255*(e=Math.sin(t+Or))*e,wr+""},Sr=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"};function Mr(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var Ar,Nr=Mr(ue("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Pr=Mr(ue("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Cr=Mr(ue("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Ir=Mr(ue("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),Lr={RdYlBu:!0,RdYlGn:!0,Spectral:!0,Greys:!0},Dr=function(t){var e,n,i,o,u="interpolate".concat(t.value),c=null!==(e=t.width)&&void 0!==e?e:400,f=null!==(n=t.height)&&void 0!==n?n:10,l=null!==(i=t.direction)&&void 0!==i?i:"vertical",h=null!==(o=t.domain)&&void 0!==o?o:[0,1],d=r[u];var p="vertical"===l?function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,r=v(1,n),i=r.getContext("2d"),o=(t.invert,s.scaleLinear().domain([0,n]).range(h));if(i)for(var a=0;a<n;++a)i.fillStyle=e(o(a)),i.fillRect(0,a,1,1);return r}:function(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,i=v(r,1),o=i.getContext("2d"),a=null!==(n=t.invert)&&void 0!==n?n:Lr[u];if(o)for(var s=0;s<r;++s)o.fillStyle=e(a?(r-s-1)/(r-1):s/(r-1)),o.fillRect(s,0,1,1);return i};function v(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n}return a.a.createElement("image",{preserveAspectRatio:"none",href:p(d).toDataURL(),width:c,height:f})};function Br(t){return(Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zr(t,e){return(zr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Rr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Vr(t);if(e){var i=Vr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Fr(this,n)}}function Fr(t,e){return!e||"object"!==Br(e)&&"function"!=typeof e?Gr(t):e}function Gr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vr(t){return(Vr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zr(t,e)}(o,t);var e,n,r,i=Rr(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).svgRef=a.a.createRef(),e.svg=s.select(null),e.g=s.select(null),e.zoom=s.zoom().scaleExtent([-5,5]).on("zoom",e.zoomed.bind(Gr(e))),e.y=s.scaleLinear(),e.x=s.scaleTime(),e.LineFunc=s.line().curve(s.curveMonotoneX).x((function(t){return e.x(t[0])})).y((function(t){return e.y(t[1])})).defined((function(t){return t&&t&&void 0!==t[1]})),e.state={zoomTransform:{x:0,y:0,k:1,rescaleX:function(t){return t},rescaleY:function(t){return t}},margin:{top:10,bottom:40,left:40,right:10},data:[]},e}return e=o,(n=[{key:"widthView",value:function(){return this.props.width}},{key:"heightView",value:function(){return this.props.height}},{key:"widthG",value:function(){var t,e;return this.widthView()-(null!==(t=this.state.margin)&&void 0!==t?t:{top:0,bottom:0,left:0,right:0}).left-(null!==(e=this.state.margin)&&void 0!==e?e:{top:0,bottom:0,left:0,right:0}).right}},{key:"heightG",value:function(){var t,e;return this.heightView()-(null!==(t=this.state.margin)&&void 0!==t?t:{top:0,bottom:0,left:0,right:0}).top-(null!==(e=this.state.margin)&&void 0!==e?e:{top:0,bottom:0,left:0,right:0}).bottom}},{key:"zoomed",value:function(){this.setState({zoomTransform:s.event.transform})}},{key:"componentDidMount",value:function(){if(this.svg=s.select(this.svgRef.current),this.svg.select("rect.pantarget").call(this.zoom.bind(this)),this.props.xRange)this.x.domain(this.props.xRange);else{var t=[s.min(this.props.data,(function(t){return s.min(t.value,(function(t){return t?t[0]:void 0}))})),s.max(this.props.data,(function(t){return s.max(t.value,(function(t){return t?t[0]:void 0}))}))];void 0!==t[0]&&void 0!==t[1]&&this.x.domain(t)}if(this.props.yRange)this.y.domain(this.props.yRange);else{var e=[s.min(this.props.data,(function(t){return s.min(t.value,(function(t){return t?t[1]:void 0}))})),s.max(this.props.data,(function(t){return s.max(t.value,(function(t){return t?t[1]:void 0}))}))];void 0!==e[0]&&void 0!==e[1]&&this.y.domain(e)}this.setState({data:this.props.data})}},{key:"componentDidUpdate",value:function(t,e,n){if(this.props.data!==t.data){if(this.props.xRange)this.x.domain(this.props.xRange);else{var r=[s.min(this.props.data,(function(t){return s.min(t.value,(function(t){return t?t[0]:void 0}))})),s.max(this.props.data,(function(t){return s.max(t.value,(function(t){return t?t[0]:void 0}))}))];void 0!==r[0]&&void 0!==r[1]&&this.x.domain(r)}if(this.props.yRange)this.y.domain(this.props.yRange);else{var i=[s.min(this.props.data,(function(t){return s.min(t.value,(function(t){return t?t[1]:void 0}))})),s.max(this.props.data,(function(t){return s.max(t.value,(function(t){return t?t[1]:void 0}))}))];void 0!==i[0]&&void 0!==i[1]&&this.y.domain(i)}this.setState({data:this.props.data})}}},{key:"render",value:function(){var t,e=this,n=Ur(this.props.theme),r=this.props,i=r.width,o=r.height,u=r.mark,c=null!==(t=this.props.color)&&void 0!==t?t:s.scaleOrdinal(["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"]);this.x.range([0,this.widthG()]),this.y.range([this.heightG(),0]),this.props.xRange&&this.x.domain(this.props.xRange),this.props.yRange&&this.y.domain(this.props.yRange);var f=this.state.zoomTransform.rescaleX(this.x),l=this.state.zoomTransform.rescaleY(this.y),h=this.widthG(),d=this.props.theme.isDark?"#696969":"black";return a.a.createElement("div",{style:{width:i+" px",height:o+" px",position:"relative"}},a.a.createElement("svg",{width:i,height:o,viewBox:"0 0 ".concat(i," ").concat(o),ref:this.svgRef,className:n.svg},a.a.createElement("rect",{className:"pantarget",width:i,height:o,opacity:"0"}),a.a.createElement("g",{className:"content",transform:"translate(".concat([this.state.margin.left+this.state.zoomTransform.x,this.state.margin.top+this.state.zoomTransform.y],")  scale(").concat(this.state.zoomTransform.k,")")},this.props.data.map((function(t){var n;return a.a.createElement("g",{className:"Line",key:t.key,fill:"none",strokeOpacity:1,strokeWidth:2},a.a.createElement("path",{d:""+e.LineFunc(t.value),stroke:"_share_"!==t.key?null!==(n=t.color)&&void 0!==n?n:c(t.key):d}))}))),a.a.createElement("g",{className:"axis",transform:"translate(".concat([this.state.margin.left,this.state.margin.top],")")},a.a.createElement("g",{className:"xaxis",transform:"translate(".concat([0,this.heightG()],")")},a.a.createElement("line",{x2:h,stroke:this.props.theme.isDark?"white":"black"}),f.ticks(h>400?10:5).map((function(t){return a.a.createElement("g",{className:"ticks"},a.a.createElement("line",{transform:"translate(".concat([f(t),0],")"),y2:5,stroke:e.props.theme.isDark?"white":"black"}),a.a.createElement("text",{x:f(t),textAnchor:"middle",y:5,dy:"1rem"},(n=t,(s.timeSecond(n)<n?Zt:s.timeMinute(n)<n?Qt:s.timeHour(n)<n?te:s.timeDay(n)<n?ee:s.timeMonth(n)<n?s.timeWeek(n)<n?ne:re:s.timeYear(n)<n?ie:oe)(n))));var n})),a.a.createElement("text",{y:5,dy:"2.5rem",x:this.widthG()/2,textAnchor:"middle",style:{fontWeight:"bold"}},"Time")),a.a.createElement("g",{className:"yaxis",transform:"translate(".concat([-8,0],")")},a.a.createElement("g",null,a.a.createElement(Dr,{width:8,height:this.heightG(),value:"Greys",domain:[0,.8]})),a.a.createElement("line",{x1:8,x2:8,y2:this.heightG(),stroke:this.props.theme.isDark?"white":"black"}),l.ticks(5).map((function(t){return a.a.createElement("g",{className:"ticks"},a.a.createElement("line",{transform:"translate(".concat([0,l(t)],")"),x2:-5,stroke:e.props.theme.isDark?"white":"black"}),a.a.createElement("text",{y:l(t),textAnchor:"end",x:-7,dy:6},t))}))),u?a.a.createElement("line",{transform:"translate(".concat(f(u),",0)"),y2:this.heightG(),strokeDasharray:"2 1",stroke:this.props.theme.isDark?"white":"black"}):"")))}}])&&Tr(e.prototype,n),r&&Tr(e,r),o}(a.a.Component),Ur=Object(W.stylesFactory)((function(t){return{svg:Object(l.css)(Ar||(e=["\n            & text\n            {fill: ","}\n            & .fade \n            {opacity: 0.2;}\n            & .onhighlight .outer_node:not(.highlight) \n                  {opacity: 0.1;}\n            & .onhighlight .outer_node.highlight \n                  {opacity: 1;}\n            "],n||(n=e.slice(0)),Ar=Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))),t.isDark?"white":"black")};var e,n})),Yr=n(23),Hr=n.n(Yr),Xr=n(24),Wr=n.n(Xr),Kr=n(25),Jr=n.n(Kr);function $r(t,e){var n=0;return t.forEach((function(t,r){n+=(t-e[r])*(t-e[r])})),Math.round(Math.sqrt(n)*Math.pow(10,10))/Math.pow(10,10)}function Zr(t,e){var n=0;return t.forEach((function(t,r){n+=Math.abs(t-e[r])})),Math.round(n*Math.pow(10,10))/Math.pow(10,10)}function Qr(t,e,n,r,i){var o,a=performance.now(),u="l1"===n.normMethod?Zr:$r,c=t.filter((function(t){return!t.outlier})),f=c,l=f.map((function(t,e){var n=t.map((function(t){return null!=t?t:-1}));return n.data={name:t.name,id:e,timestep:t.timestep},n.name=t.name,n.timestep=t.timestep,n})),h=[];if(f.length){switch(n.clusterMethod){case"leaderbin":var d=Math.max(2,Math.pow(n.bin.range[1],1/f[0].length));Wr.a,o=self.binnerN().startBinGridSize(d).isNormalized(!0).minNumOfBins(n.bin.range[0]).maxNumOfBins(n.bin.range[1]).distanceMethod(n.normMethod).coefficient({reduce_coefficient:.3,reduce_offset:0,increase_coefficient:2,increase_offset:0}).data([]);break;case"binarybin":o=Hr()([],{isNormalized:!0});break;default:Jr.a,o=self.kmeanCluster.k(n.bin.k).distanceMethod(n.normMethod).iterations(n.bin.iterations)}var p=50,v=25;o.callback((function(t){p+=v,v/=2,r({iteration:t,process:p})})),o.data(l).calculate();var y=o.binRadius,m=e.map((function(t){return t.text}));h=o.bins.map((function(t,n){var r;(r=o.normalizedFun?o.normalizedFun.scaleBackPoint(t.val).map((function(t,n){var r;return{axis:m[n],value:t<0?void 0:t,enable:e[n].enable,angle:null!==(r=e[n].angle)&&void 0!==r?r:0,minval:0,maxval:0,mean:0}})):t.val.map((function(t,n){var r;return{axis:m[n],value:t,minval:0,maxval:0,mean:0,enable:e[n].enable,angle:null!==(r=e[n].angle)&&void 0!==r?r:0}}))).bin={name:t.map((function(t){return t.data.name})),id:t.map((function(t){return t.data.id})),nameob:t.map((function(t){return{name:t.data.name,timestep:t.data.indexSamp}})),scaledval:t,distancefunc:function(t){return s.max(t.map((function(e){return u(t[0],e)})))},distance:0},o.normalizedFun?r.bin.val=o.normalizedFun.scaleBackPoints(t):r.bin.val=t.slice();var i={labels:n,radius:y||r.bin.distance,mse:r.bin.mse,index:n,__metrics:r,arr:[],total:r.bin.id.length};return r.forEach((function(t,n){return i[e[n].text]=t.value<0?void 0:e[n].scale.invert(t.value)})),i.index=n,i.__metrics=r.slice(),i.__metrics.normalize=i.__metrics.map((function(t,e){return t.value})),i}))}var g=function(t,e){var n={};return t.forEach((function(t,r){t.index=r,t.axis=[],t.labels=""+r,t.name="group_".concat(r+1);var i=t.__metrics.filter((function(t){return!t.value})),o="";if(i.length&&i.length<t.__metrics.normalize.length)t.axis=i.map((function(t){return{id:t.axis,description:"undefined"}})),o+="".concat(i.length," metric(s) undefined ");else if(i.length===t.__metrics.normalize.length)return t.text="undefined",n[t.name]||(n[t.name]={}),n[t.name].id=t.name,void(n[t.name].text=t.text);o=(o+=t.__metrics.filter((function(t){return t.value>.75})).map((function(e){return t.axis.push({id:e.axis,description:"high"}),"High "+e.axis})).join(", ")).trim(),t.text=""===o?"":"".concat(o),e&&n[t.name]||(n[t.name]||(n[t.name]={}),n[t.name].id=t.name,n[t.name].text=t.text)})),n}(h),b=function(t){var e=ae.customschemeCategory.slice();(t.length>9&&t.length<21||t.length>20)&&(e=ae.schemeCategory20);var n=s.scaleOrdinal().range(e),r=[],i=[];return t.filter((function(t){return"undefined"!==t.text})).forEach((function(t){r.push(n(t.name)),i.push(t.name)})),t.filter((function(t){return"undefined"===t.text})).forEach((function(t){r.push("gray"),i.push(t.name)})),r.push("gray"),i.push("outlier"),r.push("black"),i.push("missing"),s.scaleOrdinal().range(r).domain(i)}(h);l.forEach((function(t,e){ti(c[e],t,h,u)}));var _=0;h.forEach((function(t){var e;t.__metrics.forEach((function(e,n){var r;e.minval=s.min(t.arr,(function(t){return t[n]})),e.maxval=s.max(t.arr,(function(t){return t[n]})),e.mean=null!==(r=s.mean(t.arr,(function(t){return t[n]})))&&void 0!==r?r:0})),t.mse=null!==(e=s.sum(t.__metrics.map((function(t){return(t.maxval-t.minval)*(t.maxval-t.minval)})).filter((function(t){return void 0!==t}))))&&void 0!==e?e:0,_+=t.mse})),_/=h.length;var k=performance.now();return{cluster:h,clusterDescription:g,colorCluster:b,clusterInfo:{clusterCalTime:k-a,totalMSE:_,input:c.length,total:t.length}}}var ti=function(t,e,n,r){if(t.outlier)return void(t.cluster="missing");"cpu-23-43"===t.name&&t.timestep,e=e||t;var i=0,o=1/0;return n.find((function(t,n){var a=r(t.__metrics.normalize,e);return 0===a&&void 0===t.leadername&&(t.leadername={name:e.name,timestep:e.timestep}),o>a&&(i=n,o=a),!a})),n[i].arr.push(t),t.cluster=n[i].name,t.clusterIndex=i,n[i]};var ei=n(26),ni=n.n(ei);function ri(t){return(ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ii(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function oi(t,e){return(oi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ai(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=si(t);if(e){var i=si(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ui(this,n)}}function ui(t,e){return!e||"object"!==ri(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function si(t){return(si=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ci=[{label:"Leader Bin",index:0},{label:"K-mean",index:1}],fi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oi(t,e)}(o,t);var e,n,r,i=ai(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).state={selectedIndex:0,distance:"l1",lb_min:9,lb_max:10,k_g:8,k_i:10},e}return e=o,(n=[{key:"render",value:function(){var t=this,e=this.state,n=e.selectedIndex,r=e.lb_min,i=e.lb_max,o=e.k_g,u=e.k_i,s=e.distance;return a.a.createElement("div",null,a.a.createElement(W.TabsBar,null,ci.map((function(e){return a.a.createElement(W.Tab,{css:!0,key:e.index,label:e.label,active:e.index===n,onChangeTab:function(){return t.setState({selectedIndex:e.index})}})}))),a.a.createElement(W.TabContent,null,a.a.createElement(W.InlineField,{label:"Distance Function"},a.a.createElement(W.Select,{onChange:function(e){return t.setState({distance:""+e.value})},value:s,options:[{value:"l1",label:"L1 - Manhattan"},{value:"l2",label:"L2 - Euclidean"}]})),a.a.createElement("div",{style:{display:"flex",marginRight:6}},ci[0].index===n&&a.a.createElement(a.a.Fragment,null,a.a.createElement(W.InlineField,{label:"#Groups from",style:{width:150}},a.a.createElement(W.Input,{css:!0,type:"number",value:r,onChange:function(e){return t.setState({lb_min:+e.currentTarget.value})}})),a.a.createElement(W.InlineField,{label:"to",style:{width:80}},a.a.createElement(W.Input,{css:!0,type:"number",value:i,onChange:function(e){return t.setState({lb_max:+e.currentTarget.value})}}))),ci[1].index===n&&a.a.createElement(a.a.Fragment,null,a.a.createElement(W.InlineField,{label:"#Groups",style:{width:110}},a.a.createElement(W.Input,{css:!0,type:"number",value:o,onChange:function(e){return t.setState({k_g:+e.currentTarget.value})}})),a.a.createElement(W.InlineField,{label:"#Steps",style:{width:120}},a.a.createElement(W.Input,{css:!0,type:"number",value:u,onChange:function(e){return t.setState({k_i:+e.currentTarget.value})}}))),a.a.createElement(W.Button,{fullWidth:!0,onClick:function(){return t.props.onSubmit(0===n?{clusterMethod:"leaderbin",bin:{startBinGridSize:10,range:[r,i]},normMethod:s}:{clusterMethod:"kmean",bin:{k:o,iterations:u},normMethod:s})}},"Calculate cluster"))))}}])&&ii(e.prototype,n),r&&ii(e,r),o}(a.a.Component);function li(t){return(li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function di(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pi(t,e){return(pi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mi(t);if(e){var i=mi(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return yi(this,n)}}function yi(t,e){return!e||"object"!==li(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mi(t){return(mi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pi(t,e)}(o,t);var e,n,r,i=vi(o);function o(){var t;return hi(this,o),(t=i.apply(this,arguments)).rScale=s.scaleLinear().range([0,50]),t.innerKey="minval",t.outterKey="maxval",t.radarLine=s.radialLine().curve(s.curveCardinalClosed.tension(.7)).radius((function(e){return e.value<0||void 0===e.value?0:t.rScale(e.value)})).angle((function(t){return t.angle})),t.radarMeanLine=s.radialLine().curve(s.curveCardinalClosed.tension(.7)).radius((function(e){return e.mean<0||void 0===e.mean?0:t.rScale(e.mean)})).angle((function(t){return t.angle})),t.radialAreaGenerator=s.radialArea().curve(s.curveCardinalClosed.tension(.8)).angle((function(t,e){return t.angle})).innerRadius((function(e,n){return e[t.innerKey]<0||void 0===e[t.innerKey]?0:t.rScale(e[t.innerKey])})).outerRadius((function(e,n){return e[t.outterKey]<0||void 0===e[t.outterKey]?0:t.rScale(e[t.outterKey])})),t}return e=o,(n=[{key:"getColor",value:function(t,e){return f.a.isArray(this.props[t])?this.props[t][e]:this.props[t]}},{key:"render",value:function(){var t,e=this,n=this.props,r=n.margin,i=void 0===r?{l:0,b:0,t:0,r:0}:r,o=n.width,u=void 0===o?100:o,c=n.height,f=void 0===c?100:c,l=n.data,h=void 0===l?[]:l,d=(n.fill,n.stroke),p=void 0===d?"black":d,v=n.fillOpacity,y=void 0===v?.8:v,m=n.strokeWidth,g=void 0===m?.5:m,b=n.rings,_=void 0===b?5:b,k=n.area,x=void 0!==k&&k,w=n.mean,E=void 0!==w&&w,O=n.compact,j=void 0!==O&&O,S=n.meanColor,M=void 0===S?"black":S,A=n.showAxis,N=void 0!==A&&A,P=n.onMouseOver,C=void 0===P?function(){}:P,I=i.l,L=void 0===I?0:I,D=i.r,B=void 0===D?0:D,T=i.b,z=void 0===T?0:T,R=i.t,F=void 0===R?0:R,G=Math.min(u-L-B,f-F-z)/2;this.rScale.range([0,G]);var V=s.range(0,_).map((function(t){return e.rScale(t/_)})),q=null!==(t=h[0])&&void 0!==t?t:[],U=x?this.radialAreaGenerator:this.radarLine;return a.a.createElement("svg",{width:u,height:f,viewBox:"".concat(-u/2," ").concat(-f/2," ").concat(u," ").concat(f),onMouseOver:function(){C(h)},onMouseLeave:function(){C()}},a.a.createElement("defs",null,a.a.createElement("filter",{id:"glow"},a.a.createElement("feGaussianBlur",{stdDeviation:"2.5",result:"coloredBlur"}),a.a.createElement("feMerge",null,a.a.createElement("feMergeNode",{in:"coloredBlur"}),a.a.createElement("feMergeNode",{in:"SourceGraphic"})))),j?"":a.a.createElement("circle",{r:G,fill:"#ddd"}),!j&&V.map((function(t){return a.a.createElement("circle",{key:t,r:t,fill:"rgba(205, 205, 205,0.1)",filter:"#glow",strokeWidth:.15,stroke:"black"})})),!j&&q.map((function(t){return a.a.createElement("line",{key:t.axis,y1:-G,stroke:"white",strokeWidth:1,transform:"rotate(".concat(180*t.angle/Math.PI,")")})})),h.map((function(t,n){var r,i,o;return a.a.createElement("g",null,a.a.createElement("path",{key:"".concat(null!==(r=t.id)&&void 0!==r?r:t.name,"_").concat(n),d:null!==(i=U(t))&&void 0!==i?i:"",fill:e.getColor("fill",n),fillOpacity:y,stroke:"match"!==p?e.getColor("stroke",n):e.getColor("fill",n),strokeWidth:g}),E?a.a.createElement("path",{d:null!==(o=e.radarMeanLine(t))&&void 0!==o?o:"",fill:"none",strokeDasharray:"2 1",stroke:M}):"")})),N&&h[0]&&a.a.createElement("g",{className:"axis"},h[0].map((function(t,n){var r;return a.a.createElement("text",{key:"".concat(t.axis,"_").concat(n),textAnchor:t.angle>-1e-4&&t.angle<1e-4||t.angle>Math.PI-1e-4&&t.angle<Math.PI+1e-4?"middle":t.angle<Math.PI?"start":"end",transform:bi(t.angle,(null!==(r=e.rScale(1))&&void 0!==r?r:0)+10).toString()},t.axis)}))))}}])&&di(e.prototype,n),r&&di(e,r),o}(a.a.Component);function bi(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i={x:0,y:0,toString:function(){return""}};return i.x=Math.round(Math.cos(t-Math.PI/2)*e+n),i.y=Math.round(Math.sin(t-Math.PI/2)*e+r),i.toString=function(){return"translate(".concat(i.x,",").concat(i.y,")")},i}var _i;n(35);function ki(t){return(ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xi(t){return function(t){if(Array.isArray(t))return wi(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return wi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wi(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ei(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Oi(t,e){return(Oi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ji(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Mi(t);if(e){var i=Mi(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Si(this,n)}}function Si(t,e){return!e||"object"!==ki(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mi(t){return(Mi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ai=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oi(t,e)}(l,t);var e,n,r,o=ji(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=o.call(this,t)).svgRef=a.a.createRef(),e.state={data:[],datas:[],dataByTime:{},dimensions:[],selectedService:0,timeStamp:[],scheme:{computers:{},emptyMap:{},jobArr:{},jobs:{},minMaxData:{},timespan:[],tsnedata:{},userArr:{},users:{},_userarrdata:{}},drawThreshold:650/700,sankeyData:[],LineData:[],pieData:[],pieDataHighlight:void 0,pieChartSum:{total:0,usage:0,_usage:0},colorBy:"name",displayOpt:"compute_num",lineaScale:0,clusterOpt:{clusterMethod:"leaderbin",bin:{startBinGridSize:10,range:[8,9]}}},e.colorByName=s.scaleOrdinal(["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#bcbd22","#17becf","#aec7e8","#ffbb78","#98df8a","#ff9896","#c5b0d5","#c49c94","#f7b6d2","#dbdb8d","#9edae5"]),e.colorByVal=s.scaleSequential(s.interpolateGreys).domain([1,-.25]),e.color=e.colorByName,e}return e=l,(n=[{key:"widthView",value:function(){var t;return this.props.width*(null!==(t=this.state.scalezoom)&&void 0!==t?t:1)}},{key:"heightView",value:function(){var t;return this.props.height*(null!==(t=this.state.scalezoom)&&void 0!==t?t:1)}},{key:"widthG",value:function(){var t,e;return this.widthView()-(null!==(t=this.state.margin)&&void 0!==t?t:{top:0,bottom:0,left:0,right:0}).left-(null!==(e=this.state.margin)&&void 0!==e?e:{top:0,bottom:0,left:0,right:0}).right}},{key:"heightG",value:function(){var t,e;return this.heightView()-(null!==(t=this.state.margin)&&void 0!==t?t:{top:0,bottom:0,left:0,right:0}).top-(null!==(e=this.state.margin)&&void 0!==e?e:{top:0,bottom:0,left:0,right:0}).bottom}},{key:"centerX",value:function(){var t;return(null!==(t=this.state.margin)&&void 0!==t?t:{top:0,bottom:0,left:0,right:0}).left+this.widthG()/2}},{key:"centerY",value:function(){var t;return(null!==(t=this.state.margin)&&void 0!==t?t:{top:0,bottom:0,left:0,right:0}).top+this.heightG()/2}},{key:"r",value:function(){var t;return(null!==(t=s.min([this.props.width,this.props.height]))&&void 0!==t?t:0)/2-20}},{key:"componentDidMount",value:function(){var t=this.handleData();t.dimensions&&(t.selectedService=0),t.LineData=this.changeLineData(t),this.setState(t),ni.a.emit(i.AppEvents.alertSuccess,["Hello"])}},{key:"componentDidUpdate",value:function(t,e,n){if(this.props.data!==t.data){var r=this.handleData();r.dimensions&&(r.selectedService=0),r.LineData=this.changeLineData(r),this.setState(r)}}},{key:"handleData",value:function(){var t,e=this,n=this.props.data,r=this.props.options.userEncoded,i={},o=new Array,a=new Map,u=[],l={},h={},d=this.props.options.coreLimit,p={computers:{},emptyMap:{},jobArr:{},jobs:{},minMaxData:{},timespan:[],tsnedata:{},userArr:{},users:{},_userarrdata:{}};function v(t,e,n){var r=s.scaleLinear().domain(t);return{range:t,rangeMinMax:[t[0],t[1]],rangePredict:[t[0],t[1]],scale:r,order:e,text:n,active:new Array,tickFormat:void 0}}var y=void 0,m=void 0;n.series.forEach((function(t){var e=t.fields.find((function(t){return"time"===t.name.trim().toLowerCase()}));e?t.fields.find((function(t){return"jobs"===t.name}))&&t.fields.find((function(t){return"cpus"===t.name}))?m=t:(e.values.toArray().forEach((function(t){h[t]=t})),t.fields.find((function(t){return"name"===t.name}))?function(t){var e,n,r,s=null!==(e=t.refId)&&void 0!==e?e:"",c=t.fields.find((function(t){return"time"===t.name.trim().toLowerCase()})),f=t.fields.find((function(t){return"value"===t.name})),h=t.fields.find((function(t){return"name"===t.name})),d=l[s],p=d?[null!==(n=d.range[0])&&void 0!==n?n:1/0,null!==(r=d.range[1])&&void 0!==r?r:-1/0]:[1/0,-1/0];h&&h.values&&c&&c.values&&f&&f.values&&h.values.toArray().forEach((function(t,e){i.hasOwnProperty(t)||(i[t]={});var n=f.values.get(e);if(!i[t][c.values.get(e)]){var r={time:c.values.get(e),order:0,id:t};o.push(r),a.set(t,!0),i[t][c.values.get(e)]=r}i[t][c.values.get(e)][s]=n,n<p[0]&&(p[0]=n),n>p[1]&&(p[1]=n)})),d?(d.range=p,d.scale.domain(p)):(l[s]=v(p,u.length,s),u.push(l[s]))}(t):function(t){var e=t.fields.find((function(t){return"time"===t.name.trim().toLowerCase()}));function n(t,n,r){var s,c;i[t]||(i[t]={});var f=l[n],h=f?[null!==(s=f.range[0])&&void 0!==s?s:1/0,null!==(c=f.range[1])&&void 0!==c?c:-1/0]:[1/0,-1/0];r.values.toArray().forEach((function(r,u){if(!i[t][null==e?void 0:e.values.get(u)]){var s={time:null==e?void 0:e.values.get(u),order:0,id:t};o.push(s),a.set(t,!0),i[t][null==e?void 0:e.values.get(u)]=s}i[t][null==e?void 0:e.values.get(u)][n]=r,null!==r&&(r<h[0]&&(h[0]=r),r>h[1]&&(h[1]=r))})),f?(f.range=h,f.scale.domain(h)):(l[n]=v(h,u.length,n),u.push(l[n]))}e&&t.fields.filter((function(t){return"number"===t.type})).forEach((function(t){if(t.labels){var e=t.name,r="";if("value"===e){var i=Object.values(t.labels)[0].split("|").map((function(t){return t.trim()}));r=i[0].trim(),e=i[1].trim()}else r=Object.values(t.labels)[0].replace("|","").trim();n(r,e,t)}else if(2===t.name.split("|").length){var o=t.name.split("|");n(o[1].trim(),o[0].trim(),t)}}))}(t)):y=t}));var g=void 0;if(m){var b=function(t){var e=t.fields.find((function(t){return"time"===t.name.trim().toLowerCase()})),n=t.fields.find((function(t){return"jobs"===t.name})),r=t.fields.find((function(t){return"cpus"===t.name})),i=t.fields.find((function(t){return"name"===t.name})),o={},a={};if(e&&n&&r&&i){var u={},s=0;return e.values.toArray().map((function(t,e){u[t]||(u[t]=s,s++);var c=n.values.get(e).replace(/\{|\}/g,""),f=""===c?[]:c.split(",").map((function(t){return t.trim()})),l=r.values.get(e).replace(/\{|\}/g,""),h=""===l?[]:l.split(",").map((function(t){return t.trim()})),d=i.values.get(e);o[d]||(o[d]={cpus:[],job_id:[]}),o[d].job_id[s]=f,o[d].cpus[s]||(o[d].cpus[s]={}),f.forEach((function(t,e){o[d].cpus[s][t]=+h[e],a[t]||(a[t]={start_Index:s,finish_Index:s,node_list_obj:{}}),a[t].finish_Index=s,a[t].node_list_obj[d]=+h[e]}))})),{computes:o,jobs:a}}return{computes:void 0,jobs:void 0}}(m);b.computes&&function(t,e){var n,r,c="workLoad",f=l[c],h=f?[null!==(n=f.range[0])&&void 0!==n?n:1/0,null!==(r=f.range[1])&&void 0!==r?r:-1/0]:[1/0,-1/0];e&&Object.keys(t).forEach((function(n){i.hasOwnProperty(n)||(i[n]={}),e.forEach((function(r,u){var f=t[n].cpus&&t[n].cpus[u]?Math.min(s.sum(Object.values(t[n].cpus[u])),d)/d:0;if(!i[n][e[u]]){var l={time:e[u],order:0,id:n};o.push(l),a.set(n,!0),i[n][e[u]]=l}i[n][e[u]][c]=f,f<h[0]&&(h[0]=f),f>h[1]&&(h[1]=f)}))})),f?(f.range=h,f.scale.domain(h)):(l[c]=v(h,u.length,c),u.push(l[c]))}(b.computes,Object.values(h).map((function(t){return+t}))),g=b.jobs}y&&(p.jobs=function(t,e,n){var r=t.fields.find((function(t){return"job_id"===t.name})),i=t.fields.find((function(t){return"name"===t.name})),o=t.fields.find((function(t){return"nodes"===t.name})),a=t.fields.find((function(t){return"user_name"===t.name})),u=t.fields.find((function(t){return"start_time"===t.name})),s=t.fields.find((function(t){return"end_time"===t.name})),c=t.fields.find((function(t){return"cpus"===t.name})),f=t.fields.find((function(t){return"node_count"===t.name})),l={},h={};if(a)if(e){var d=1;a.values.toArray().forEach((function(t,e){h[t]||(h[t]="user"+d,d++)}))}else a.values.toArray().forEach((function(t,e){h[t]=t}));return r&&i&&o&&a&&u&&s&&c&&f&&r.values.toArray().map((function(t,e){var r=h[a.values.get(e)],d=i.values.get(e),p=1e3*u.values.get(e),v=1e3*s.values.get(e),y=o.values.get(e).replace(/\{|\}/g,""),m=""===y?[]:y.split(",").map((function(t){return t.trim()})),g=+c.values.get(e),b=g/+f.values.get(e),_={};n&&n[t]?_=n[t].node_list_obj:m.forEach((function(t){return _[t]=b})),m.length&&(l[t]={job_id:t,user_name:r,job_name:d,node_list:m,node_list_obj:_,_node_list:m.slice(),_node_list_obj:Object.assign({},_),cpus:g,cpu_cores:b,summary:[],start_time:p,finish_time:v})})),l}(y,r,g));var _=null!==(t=Object.values(h).sort((function(t,e){return+t-+e})))&&void 0!==t?t:[];u.sort((function(t,e){return t.order-e.order})).forEach((function(t,e){t.order=e,t.angle=e/u.length*2*Math.PI}));var k=p.jobs;Object.keys(k).forEach((function(t){var e=k[t];e._node_list=e.node_list.slice(),e._node_list.forEach((function(t){i[t]||(i[t]={},_.forEach((function(e){var n=""+e,r={time:n,order:0,id:t};o.push(r),a.set(t,!0),i[t][n]=r,u.forEach((function(e){i[t][n][e.text]=void 0}))})))}))}));var x=this.handleSmalldata(u,i,_),w=x.computers,E=x.tsnedata;p.computers=w,Object.keys(k).forEach((function(t){var e=k[t];e.node_list=[],e._node_list.forEach((function(t){w[t]?e.node_list.push(t):delete e.node_list_obj[t]})),0===e.node_list.length&&delete k[t]}));var O=this.handleCUJ(p,_).users,j=this.handleDataComputeByUser(w,k,_),S=j.data,M=j.noJobMap,A=this.handleDataComputeByJob({tsnedata:E,computers:w,jobs:k,users:O,timespan:_}),N=A.jobTimeline,P=A.jobarrdata,C=A.userarrdata,I=A._userarrdata,L=A.minMaxDataCompJob,D=A.minMaxDataUser;Object.values(k).forEach((function(t){t.summary=u.map((function(e,n){return{mean:P[t.job_id]?s.mean(P[t.job_id],(function(t){return t?t[n]:void 0})):null,min:L[t.job_id]?s.min(L[t.job_id],(function(t){return t?t[0][n]:void 0})):null,max:L[t.job_id]?s.max(L[t.job_id],(function(t){return t?t[1][n]:void 0})):null,num:P[t.job_id].filter((function(t){return void 0!==(t?t[n]:void 0)})).length}}))})),Object.keys(O).forEach((function(t){var n=O[t];e.colorByName(t),n.total_nodes=n.node.length,n.summary=u.map((function(e,n){return{mean:C[t]?s.mean(C[t],(function(t){return t?t[n]:void 0})):null,min:D[t]?s.min(D[t],(function(t){return t?t[0][n]:void 0})):null,max:D[t]?s.max(D[t],(function(t){return t?t[1][n]:void 0})):null,num:C[t].filter((function(t){return void 0!==(t?t[n]:void 0)})).length}}))}));var B=this.getpieSum.bind(this)(this.state.displayOpt,w,_.length);Object.keys(w).forEach((function(t){w[t].summary=u.map((function(e,n){return{mean:E[t]?s.mean(E[t],(function(t){return t?t[n]:void 0})):null,min:E[t]?s.min(E[t],(function(t){return t?t[n]:void 0})):null,max:E[t]?s.max(E[t],(function(t){return t?t[n]:void 0})):null,num:E[t]?E[t].filter((function(t){return void 0!==(t?t[n]:void 0)})).length:0}}))})),p.users=O,p.timespan=_,p.tsnedata=E,p.emptyMap=M,p.jobArr=P,p.userArr=C,p._userarrdata=I;var T=this.changeSankeyData(this.state.displayOpt,{scheme:p}),z=Object.keys(p.users).map((function(t){return{key:t,value:p.users[t],text:t}})),R=c.flatten(Object.values(p.tsnedata)),F=function(t,e){var n=[],r={};t.forEach((function(t){t.findIndex((function(t){return!f.a.isNumber(t)}))>-1?(t.outlier=2,t.cluster="missing",r[t.name+"_"+t.timestep]=t):(delete t.outlier,n.push(t))}));var i={startBinGridSize:Math.max(1,Math.pow(500,1/n[0].length)),outlyingCoefficient:1.5},o=[];return o.pointObject={},o.missingData=r,self.scagnosticsnd(n.map((function(t,e){var n=t.map((function(t){return null!=t?t:-1}));return n.data=t,delete t.outlier,n})),i).outlyingBins.map((function(t,n){var r={labels:-n-1,compObject:{}},i=t.map((function(t){var i=t.data;i.outlier=1,i.cluster="outlier",i.clusterIndex=-n-1;var a=e.map((function(t,e){return{axis:t.text,value:i[e],angle:t.angle}}));return a.name=i.name+"_"+i.timestep,a.nodeName=i.name,a.timestep=i.timestep,a.cluster="outlier",a.clusterIndex=-n-1,o.pointObject[a.name]=a,r.compObject[i.name]||(r.compObject[i.name]=[]),r.compObject[i.name].push(i),o.pointObject[a.name]}));t.site.forEach((function(t,n){return r[e[n].text]=e[n].scale.invert(t)})),r.index=-n-1,r.__metrics=e.map((function(e,n){return{axis:e.text,value:t.site[n],angle:e.angle}})),r.__metrics.normalize=t.site.slice(),r.arr=i,o.push(r)})),o}(R,u),G=Qr(R,u,this.state.clusterOpt,(function(){})),V=G.cluster,q=G.clusterDescription,U=G.colorCluster,Y=G.clusterInfo;return{dimensions:u,dataByTime:i,timeStamp:_,datas:o,jobCompTimeline:S,jobTimeline:N,sankeyData:T,pieData:z,pieDataHighlight:void 0,scheme:p,pieChartSum:B,cluster:V,clusterDescription:q,colorCluster:U,clusterInfo:Y,outlyingBins:F}}},{key:"getpieSum",value:function(t,e,n){var r=this,i={total:0,usage:0,_usage:0};return"core"===t?(Object.keys(e).forEach((function(t){var o=e[t];i._usage+=s.sum(o.cpus,(function(t){return Math.min(r.props.options.coreLimit,s.sum(Object.values(t)))}))/n})),i.total=this.props.options.coreLimit*Object.keys(e).length):(Object.keys(e).forEach((function(t){var r=e[t];i._usage+=s.sum(r.job_id,(function(t){return t.length?1:0}))/n})),i.total=Object.keys(e).length),i.usage=i._usage,i}},{key:"changeSankeyData",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null!==(e=n.scheme)&&void 0!==e?e:this.state.scheme,i=r.computers,o=r.jobs,a=r.timespan;return"core"===t?this.handleDataComputeByUser_core({computers:i,jobs:o,timespan:a}):this.handleDataComputeByUser_compute({computers:i,jobs:o,timespan:a})}},{key:"changePieInfo",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null!==(e=n.scheme)&&void 0!==e?e:this.state.scheme,i=r.computers,o=r.timespan,a=this.getpieSum.bind(this)(t,i,o.length);return a}},{key:"changeLineData",value:function(){var t,e,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,u=null!==(t=i.dimensions)&&void 0!==t?t:this.state.dimensions,s=null!==(n=null!==(e=i.selectedService)&&void 0!==e?e:this.state.selectedService)&&void 0!==n?n:0,c=null!==(r=i.scheme)&&void 0!==r?r:this.state.scheme,f=c.userArr,l=c.jobArr,h=c.timespan,d=(o=null!=o?o:Object.keys(f)).map((function(t){return{key:t,value:f[t].map((function(t){return[h[t.timestep],void 0!==t[s]?u[s].scale.invert(t[s]):void 0]}))}}));return a&&a.forEach((function(t){d.push({key:t,color:"gray",value:l[t].map((function(t){return[h[t.timestep],void 0!==t[s]?u[s].scale.invert(t[s]):void 0]}))})})),d}},{key:"onseparate",value:function(t,e){var n;if(e){var r=this.state.dimensions,i=null!==(n=this.state.selectedService)&&void 0!==n?n:0,o=this.state.scheme,a=this.state.scheme.computers,u=o._userarrdata,c=o.timespan;if(u[t]){var f=c.map((function(t,e){return[t,[]]})),l=c.map((function(t,e){return[t,[]]}));u[t].forEach((function(t){t.forEach((function(t){a[t.name]&&1===a[t.name].users[t.timestep].length?f[t.timestep][1].push(void 0!==t[i]?r[i].scale.invert(t[i]):void 0):l[t.timestep][1].push(void 0!==t[i]?r[i].scale.invert(t[i]):void 0)}))}));var h=[{key:t,value:f.map((function(t){return[t[0],s.mean(t[1])]}))},{key:"_share_",value:l.map((function(t){return[t[0],s.mean(t[1])]}))}];this.setState({LineData:h})}else this.setState({LineData:[]})}else{var d=this.changeLineData({},[t]);this.setState({LineData:d})}}},{key:"handleSmalldata",value:function(t,e,n){var r={},i={};return Object.keys(e).forEach((function(o){var a=e[o];r[o]=[],i[o]={job_id:[],key:o,user:[],drawData:[]},t.forEach((function(t){return i[o][t.text]=[]})),n.forEach((function(e,n){var u=a[""+e],s=t.map((function(t){if(u){i[o][t.text][n]=u[t.text];var e=u[t.text];return null!==e?t.scale(e):void 0}return null}));s.name=o,s.timestep=n,r[o][n]=s}))})),{computers:i,tsnedata:r}}},{key:"handleDataComputeByJob",value:function(t){var e,n,r,i,o,a=null!==(e=t.tsnedata)&&void 0!==e?e:{},u=null!==(n=t.computers)&&void 0!==n?n:{},c=null!==(r=t.jobs)&&void 0!==r?r:{},f=null!==(i=t.users)&&void 0!==i?i:{},l={},h={},d={},p={},v={},y={},m={},g={},b=null!==(o=t.timespan)&&void 0!==o?o:[];Object.keys(c).forEach((function(t){l[t]=c[t],p[t]=[],d[t]=[],m[t]=[],l[t].isJobarray?l[t].comp={}:(h[c[t].user_name]=f[c[t].user_name],v[c[t].user_name]=[],y[c[t].user_name]=[],g[c[t].user_name]=[])}));var _=[],k=function(t){var e={key:t,values:[],range:[1/0,-1/0],data:u[t]},n={};u[t].job_id.forEach((function(r,i){var o=r.map((function(t){return l[t]})).filter((function(e){if(e){if(!p[e.job_id][i]){var n=[];n.name="",n.timestep=0,p[e.job_id][i]=n}var r=a[t];if(r&&p[e.job_id][i].push(r[i]),!y[e.user_name][i]){var o=[];o.name="",o.timestep=0,o.cpus=0,y[e.user_name][i]=o}if(r&&y[e.user_name][i].push(r[i]),e.job_array_id){if(!p[e.job_array_id][i]){var u=[];u.name="",u.timestep=0,p[e.job_array_id][i]=u}l[e.job_array_id].comp[i]||(l[e.job_array_id].comp[i]={}),l[e.job_array_id].comp[i][t]||(l[e.job_array_id].comp[i][t]=1,p[e.job_array_id][i].push(a[t][i]))}return!0}return!1})),u=o.map((function(t){return t.job_id})).toString();if(n[u]?o=[]:n[u]=!0,o.length){var c=s.nest().key((function(t){return t.job_id})).rollup((function(e){return s.sum(e,(function(e){return e.node_list_obj[t]}))})).entries(o);c.sort((function(t,e){return s.ascending(t.key,e.key)})),e.values.push(c)}else e.values.push(null);e[""+b[i]]=e.values[i]})),_.push(e)};for(var x in u)k(x);return Object.keys(p).forEach((function(t){p[t].forEach((function(e,n){var r=p[t][n][0].timestep,i=[],o=[],a=p[t][n][0].map((function(e,r){var a=p[t][n].map((function(t){return t[r]}));i.push(s.min(a)),o.push(s.max(a));var c=0,f=0;return p[t][n].forEach((function(e){if(void 0!==e[r]){var i=u[e.name].cpus[n][t];c+=e[r]*i,f+=i}})),f?c/f:void 0}));a.name=t,i.name=t,o.name=t,a.timestep=r,i.timestep=r,o.timestep=r,m[t][n]=[i,o],d[t][n]=a}))})),Object.keys(y).forEach((function(t){y[t].forEach((function(e,n){var r=y[t][n][0].timestep,i=[],o=[],a=y[t][n][0].map((function(e,r){var a=y[t][n].map((function(t){return t[r]}));return i.push(s.min(a)),o.push(s.max(a)),s.mean(a)}));a.name=t,i.name=t,o.name=t,a.timestep=r,i.timestep=r,o.timestep=r,g[t][n]=[i,o],v[t][n]=a}))})),_.sort((function(t,e){return+t.range[0]-e.range[0]})),{jobTimeline:_,jobarrdata:d,userarrdata:v,_userarrdata:y,minMaxDataCompJob:m,minMaxDataUser:g}}},{key:"handleDataComputeByUser",value:function(t,e,n){var r=[],i={},o={};for(var a in e)i[a]={key:a,values:n.map((function(t){return null})),range:[1/0,-1/0],data:e[a],arr:[]},r.push(i[a]);var u=function(r){var a={};o[r]=[],t[r].job_id.forEach((function(t,u){t.length?t.forEach((function(t){var o;if(!a[t]){var s=i[t];s.values[u]||(s.values[u]=[],s.values[u].total=0);var c={key:r,type:"compute",value:1},f={key:e[t].user_name,type:"user",value:1},l=s.values[u];null!==l&&l.length&&(l.push(c),l.total=(null!==(o=l.total)&&void 0!==o?o:0)+e[t].node_list_obj[r],s.arr.push({time:n[u],value:[{key:t,type:"job",value:1},f]}),s.arr.push({time:n[u],value:[c,{key:t,type:"job",value:1}]}),e[t].job_array_id&&(s.arr.push({time:n[u],value:[c,{key:e[t].job_array_id,type:"job",value:1}]}),s.arr.push({time:n[u],value:[{key:e[t].job_array_id,type:"job",value:1},f]}))),a[t]=!0}})):o[r][u]=1}))};for(var s in t)u(s);return{data:r,noJobMap:o}}},{key:"handleCUJ",value:function(t,e){var n=t.computers,r=t.jobs,i={};Object.keys(n).forEach((function(t){var r=n[t];r.user=[],r.jobName=e.map((function(){return[]})),r.job_id=e.map((function(){return[]})),r.users=e.map((function(){return[]})),r.cpus=e.map((function(){return{}})),i[t]=e.map((function(){return{}}))})),s.entries(r).forEach((function(t){t.value.start_Index=e.findIndex((function(e){return e>t.value.start_time})),t.value.start_Index>0?t.value.start_Index--:-1===t.value.start_Index&&(t.value.start_Index=e.length-1),t.value.finish_Index=t.value.finish_time?e.findIndex((function(e){return e>t.value.finish_time})):-1,t.value.finish_Index>0?t.value.finish_Index--:-1===t.value.finish_Index&&(t.value.finish_Index=e.length-1),t.value.node_list.forEach((function(e){if(n[e])for(var r=t.value.start_Index;r<=t.value.finish_Index;r++)n[e].job_id[r].push(t.key),n[e].cpus[r][t.key]=t.value.node_list_obj[e],i[e][r][t.value.user_name]||(i[e][r][t.value.user_name]=!0,n[e].users[r].push(t.value.user_name))}))}));var o="core"===this.state.displayOpt?this.getUsers_core(r,n,e.length):this.getUsers_compute(r,n,e.length);return Object.keys(o).forEach((function(t,e){o[t].node.forEach((function(e){return n[e]?n[e].user.push(t):""}))})),{users:o}}},{key:"handleDataComputeByUser_compute",value:function(t){var e=t.computers,n=t.jobs,r=t.timespan,i=[],o=function(t){var o={key:t,data:e[t]};e[t].job_id.forEach((function(t,e){if(t.length){var i=t.map((function(t){return n[t]})),a=s.nest().key((function(t){return t.user_name})).rollup((function(t){return 1})).entries(i);a.total=s.sum(a,(function(t){return t.value})),a.jobs=[t,i],o[""+r[e]]=a.sort((function(t,e){return s.ascending(t.key,e.key)}))}else o[""+r[e]]=null})),i.push(o)};for(var a in e)o(a);return i}},{key:"handleDataComputeByUser_core",value:function(t){var e=t.computers,n=t.jobs,r=t.timespan,i=[],o=function(t){var o={key:t,data:e[t]};e[t].job_id.forEach((function(e,i){if(e.length){var a=e.map((function(t){return n[t]})),u=s.nest().key((function(t){return t.user_name})).rollup((function(e){return s.sum(e,(function(e){var n;return null!==(n=e.node_list_obj[t])&&void 0!==n?n:0}))})).entries(a);u.total=s.sum(u,(function(t){return t.value})),u.jobs=[e,a],o[""+r[i]]=u.sort((function(t,e){return s.ascending(t.key,e.key)}))}else o[""+r[i]]=null})),i.push(o)};for(var a in e)o(a);return i}},{key:"onMouseOverSankey",value:function(t,e){var n=this,r=this.state,i=r.sankeyData,o=r.pieChartSum,a=r.scheme,u=r.dimensions,c=e?e.layer:t.source.layer,f=e?e.time:t.source.time,l={};o.usage=0;var h=[];i.forEach((function(e){if(e[f]){var r=e[f];if(r.jobs[0].forEach((function(t,e){l[t]=Object.assign(Object.assign({},r.jobs[1][e]),{start_Index:c,finish_Index:c})})),o.usage+="core"===n.state.displayOpt?Math.min(r.total,n.props.options.coreLimit):r?1:0,t.byComp_t&&t.byComp_t[e.key]){var i=u.map((function(t,n){return{axis:t.text,value:a.tsnedata[e.key][c][n],angle:t.angle}}));i.id="tooltipRadarcurrent"+e.key,i.cluster=a.tsnedata[e.key][c].cluster,h.push(i)}}})),s.select("#pieChartTime").text(f.toLocaleString());var d="core"===this.state.displayOpt?this.getUsers_core(l,this.state.scheme.computers):this.getUsers_compute(l,this.state.scheme.computers),p=this.changeLineData({},t._source.map((function(t){return t.key})),e?[e.name]:void 0),v={};t.source.element.forEach((function(t){return v[t.key]=1}));var y=void 0;if(e){var m="core"===this.state.displayOpt?s.sum(Object.values(this.state.scheme.jobs[e.name].node_list_obj)):Object.keys(this.state.scheme.jobs[e.name].node_list_obj).length;y={key:e.name,value:m,parent:this.state.scheme.jobs[e.name].user_name}}this.setState({pieData:Object.keys(d).map((function(t){return{key:t,value:d[t],text:t}})),pieDataHighlight:{node:v,time:f,data:t},pieChartSum:o,LineData:p,LineTime:f,pieOverlay:y,radarDataTip:h})}},{key:"onMouseLeaveSankey",value:function(t){var e=this.state,n=e.scheme,r=e.pieChartSum;r.usage=r._usage;var i=this.changeLineData();this.setState({pieData:Object.keys(n.users).map((function(t){return{key:t,value:n.users[t],text:t}})),pieDataHighlight:void 0,pieChartSum:r,LineData:i,LineTime:void 0,pieOverlay:void 0,radarDataTip:void 0})}},{key:"getUsers_core",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=s.nest().key((function(t){return t.value.user_name})).key((function(t){return t.key.split(".")[0].trim()})).object(s.entries(t)),i={};return Object.keys(r).forEach((function(t,o){var a=r[t],u=[],s=0,f=0,l=0,h=c.uniq(c.flattenDeep(c.values(a).map((function(t){return t.map((function(t){u.push(t.key);var n=t.value.cpus*(t.value.finish_Index-t.value.start_Index+1);return s+=n,t.value.finish_Index===t.value.start_Index&&t.value.node_list.forEach((function(n){1===e[n].users[t.value.start_Index].length?l+=t.value.node_list_obj[n]:f+=t.value.node_list_obj[n]})),t.value.node_list}))}))));s/=n,l/=n,f/=n,i[t]={node:h,job:u,totalCore:s,totalCore_notShare:l,totalCore_share:f}})),i}},{key:"getUsers_compute",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=s.nest().key((function(t){return t.value.user_name})).key((function(t){return t.key.split(".")[0].trim()})).object(s.entries(t)),i={};return Object.keys(r).forEach((function(t,o){var a,u=r[t],f=[],l={},h=c.uniq(c.flattenDeep(c.values(u).map((function(t){return t.map((function(t){return f.push(t.key),t.value.node_list.forEach((function(n){l[n]?(l[n].start>t.value.start_Index&&(l[n].start=t.value.start_Index),l[n].end<t.value.finish_Index&&(l[n].end=t.value.finish_Index)):l[n]={start:t.value.start_Index,end:t.value.finish_Index,share:0,notShare:0},t.value.finish_Index===t.value.start_Index&&(1===e[n].users[t.value.start_Index].length?l[n].notShare=1:l[n].share=1)})),t.value.node_list}))}))));a=s.sum(Object.values(l),(function(t){return t.end-t.start+1}))/n;var d=s.sum(Object.values(l),(function(t){return t.share}))/n,p=s.sum(Object.values(l),(function(t){return t.notShare}))/n;i[t]={node:h,job:f,totalCore:a,totalCore_share:d,totalCore_notShare:p}})),i}},{key:"onColorModeChange",value:function(t){var e={};"name"===t?this.color=this.colorByName:(this.color=this.colorByVal,e.selectedService=+t,this.state.pieDataHighlight?e.LineData=this.changeLineData({selectedService:+t},this.state.pieDataHighlight.data._source.map((function(t){return t.key}))):e.LineData=this.changeLineData({selectedService:+t})),e.colorBy=t,this.setState(e)}},{key:"onComputeSelected",value:function(t,e){if(t){var n=this.state.scheme,r={},i={},o={};t.forEach((function(t){var e,a=(e=n.computers[t.nodeName].users[t.timestep])&&e.length?e.join(","):"No user";r[a+"_"+t.timestep]||(r[a+"_"+t.timestep]={user:a,timestep:t.timestep,comp:[],value:0}),r[a+"_"+t.timestep].comp.push(t.nodeName),r[a+"_"+t.timestep].value++,i[a]||(i[a]={}),i[a][t.timestep]=r[a+"_"+t.timestep],o[t.nodeName]||(o[t.nodeName]=[]),o[t.nodeName].push(r[a+"_"+t.timestep])}));var a=[];Object.values(o).forEach((function(t){t.length>1&&a.push(t)})),this.setState({sankeyComputeSelected:{nodes:i,links:a,group:e}})}else this.setState({sankeyComputeSelected:void 0})}},{key:"render",value:function(){var t,e=this,n=this.props,r=n.width,i=n.height,o=this.state,f=o.dimensions,l=o.LineData,h=o.LineTime,d=o.colorBy,p=o.displayOpt,v=o.colorCluster,y=o.cluster,m=o.scheme,g=o.clusterDescription,b=o.outlyingBins,_=o.radarDataTip,k=o.zoomH,x=void 0===k?1:k,w=o.sankeyComputeSelected,E=null!==(t=this.state.selectedService)&&void 0!==t?t:0,O=this.state.scheme.timespan,j=[O[0],O[O.length-1]],S=function(t){var e;return"name"!==d?"cluster"!==d?"".concat(f[E].text,": ").concat(+s.format(".2f")(f[E].scale.invert(t))):g?null!==(e=g[t])&&void 0!==e?e:"mixed":"":""};return a.a.createElement(W.ThemeContext.Consumer,null,(function(t){var n,o,g,k,O,M,A,N,P;return f[0]?a.a.createElement("div",{style:{width:r+" px",height:i+" px",position:"relative"}},a.a.createElement(at,{width:r,height:i*x,data:e.state.sankeyData,lineaScale:e.state.lineaScale,timespan:e.state.scheme.timespan,mode:e.state.displayOpt,maxPerUnit:"core"===e.state.displayOpt?e.props.options.coreLimit:1,color:e.color,colorByName:e.colorByName,colorCluster:v,colorBy:d,getMetric:S,metrics:e.state.scheme.tsnedata,mouseOver:e.onMouseOverSankey.bind(e),mouseLeave:e.onMouseLeaveSankey.bind(e),sankeyComputeSelected:w,theme:t}),a.a.createElement(Jt,{open:!0,className:Object(u.css)(_i||(N=["\n      position: absolute;\n      top: 0;\n      left: 0;\n      height: ","px;\n      max-width: 450px;\n    "],P||(P=N.slice(0)),_i=Object.freeze(Object.defineProperties(N,{raw:{value:Object.freeze(P)}}))),i)},a.a.createElement(W.InlineField,{label:"Visualizing"},a.a.createElement(W.Select,{onChange:function(t){var n,r=null!==(n=t.value)&&void 0!==n?n:"core";e.setState({displayOpt:r,sankeyData:e.changeSankeyData(r),pieChartSum:e.changePieInfo.bind(e)(r,{})})},value:p,options:[{value:"core",label:"#Cores"},{value:"compute_num",label:"#Computes"}]})),a.a.createElement(W.InlineField,{label:"Color Sankey by:"},a.a.createElement(W.Select,{onChange:function(t){var n;return e.onColorModeChange(null!==(n=t.value)&&void 0!==n?n:"name")},value:d,options:[{value:"name",label:"User name"},{value:"cluster",label:"Dataset cluster"}].concat(xi(f.map((function(t){return{value:"".concat(t.order),label:t.text}}))))})),a.a.createElement(W.InlineField,{label:"Sankey thickness"},a.a.createElement(W.Slider,{min:0,step:.1,max:4,value:e.state.lineaScale,onChange:function(t){e.setState({lineaScale:t})}})),a.a.createElement(W.InlineField,{label:"Zoom vertical"},a.a.createElement(W.Slider,{min:1,step:.1,max:10,value:x,onChange:function(t){e.setState({zoomH:t})}})),a.a.createElement("h5",{style:{textAlign:"center"}},"core"===p?"Core":"Compute"," usage"),a.a.createElement("h6",{style:{textAlign:"center"}},"100% = ",Math.round(e.state.pieChartSum.total)," ","core"===e.state.displayOpt?"cores":"computes"," | Current usage: ",Math.round(e.state.pieChartSum.usage)),a.a.createElement(zt,{width:400,height:250,theme:t,color:e.colorByName,data:e.state.pieData,overlay:e.state.pieOverlay,onseperate:function(t,n){e.onseparate(t,n)},highlight:e.state.pieDataHighlight,refValue:e.state.pieChartSum.usage,maxValue:e.state.pieChartSum.total}),a.a.createElement("br",null),f[E]?a.a.createElement(a.a.Fragment,null,a.a.createElement("h6",{style:{textAlign:"center"}},f[E].text),a.a.createElement(qr,{width:400,height:150,theme:t,xRange:j,yRange:f[E].range,data:l,color:e.colorByName,mark:h})):"",_?a.a.createElement("div",{style:{background:"white"}},a.a.createElement(gi,{width:400,height:160,margin:{l:50,b:20,t:20,r:50},data:_,showAxis:!0,fill:"none",strokeWith:1,stroke:v?_.map((function(t){return v(t.cluster)})):"#fff"})):"","cluster"===d&&a.a.createElement(a.a.Fragment,null,a.a.createElement(fi,{onSubmit:function(t){var n=Qr(c.flatten(Object.values(m.tsnedata)),f,t,(function(){}));n.clusterOpt=t,e.setState(n)}}),a.a.createElement("p",null,"Cluster inputdata: ",null===(n=e.state.clusterInfo)||void 0===n?void 0:n.input," (",s.format(",.1%")((null===(o=e.state.clusterInfo)||void 0===o?void 0:o.input)/(null===(g=e.state.clusterInfo)||void 0===g?void 0:g.total)),")",a.a.createElement("br",null),"Cluster calculation time: ",Math.round(null!==(O=null===(k=e.state.clusterInfo)||void 0===k?void 0:k.clusterCalTime)&&void 0!==O?O:0)," ms ",a.a.createElement("br",null),"Total MSE: ",s.format(".2f")(null!==(A=null===(M=e.state.clusterInfo)||void 0===M?void 0:M.totalMSE)&&void 0!==A?A:0)),y&&y.map((function(t,e){return a.a.createElement("div",{key:t.labels,style:{display:"inline-block"}},a.a.createElement("div",{style:{position:"relative"}},a.a.createElement(gi,{width:120,height:120,data:[t.__metrics],area:!0,mean:!0,meanColor:"rgba(0,0,0,0.52)",fill:v?v(t.name):"#fff",stroke:"match"}),a.a.createElement("div",{style:{position:"absolute",top:0,left:0}},a.a.createElement(gi,{width:120,height:120,data:[t.__metrics],compact:!0,fill:"none",stroke:"black",strokeWidth:2})),a.a.createElement("p",{style:{position:"absolute",top:10,left:0,width:"100%",textAlign:"center",color:"black",fontSize:12}},t.arr.length,a.a.createElement("br",null),e?"":" temporal instances"))," ")})),y?a.a.createElement("div",{style:{backgroundColor:t.isDark?"rgba(255,255,255,0.12)":"rgba(0,0,0,0.12)",padding:5,borderRadius:10,border:"1px dashed gray"}},a.a.createElement("h5",null,"Other color for cluster:"),a.a.createElement("div",{style:{display:"flex",alignItems:"center",padding:3}},a.a.createElement("div",{style:{marginRight:5,width:20,height:20,borderRadius:10,backgroundColor:v?v("outlier"):"#fff"}})," Outlier"),a.a.createElement("div",{style:{display:"flex",alignItems:"center",padding:3}},a.a.createElement("div",{style:{marginRight:5,width:20,height:20,borderRadius:10,backgroundColor:v?v("missing"):"#fff"}})," Missing dimension data"),a.a.createElement("div",{style:{display:"flex",alignItems:"center",padding:3}},a.a.createElement("div",{style:{marginRight:5,width:20,height:20,borderRadius:10,backgroundColor:"white"}})," Multiple Clusters")):"",a.a.createElement("div",{style:{width:"100%",borderTop:"gray 1px solid",marginTop:10,marginBottom:5}}),a.a.createElement("h5",null,"Outliers: ",b?Object.keys(b.pointObject).length:0," temporal instances"),b&&b.map((function(t,n){return a.a.createElement("div",{key:t.labels,style:{display:"inline-block"}},a.a.createElement("div",{style:{position:"relative",opacity:w?w.group===t.labels?1:.5:1}},a.a.createElement(gi,{width:120,height:120,data:t.arr.map((function(t){return b.pointObject[t.name]})),fill:"none",stroke:v?v("outlier"):"#fff",onMouseOver:function(n){return e.onComputeSelected(n,t.labels)},onMouseLeave:e.onComputeSelected.bind(e)}),a.a.createElement("p",{style:{position:"absolute",top:10,left:0,width:"100%",textAlign:"center",color:"black",fontSize:12}},t.arr.length,a.a.createElement("br",null),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return t.length>e?t.slice(0,e).join(",")+", +".concat(t.length-e," more"):t.join(",")}(Object.keys(t.compObject))))," ")})),a.a.createElement("div",{style:{width:"100%",borderTop:"gray 1px solid",marginTop:10,marginBottom:5}}),a.a.createElement("h5",null,"Missing dimension data: ",b?Object.keys(b.missingData).length:0," temporal instances")))):"No data"}))}}])&&Ei(e.prototype,n),r&&Ei(e,r),l}(a.a.Component);Ai.defaultProps={width:100,height:100,margin:{top:0,bottom:0,left:0,right:0},scalezoom:1},n.d(e,"plugin",(function(){return Ni}));var Ni=new i.PanelPlugin(Ai).setPanelOptions((function(t){return t.addBooleanSwitch({path:"userEncoded",name:"Encoded username",defaultValue:!0}).addNumberInput({path:"coreLimit",name:"Core limit",defaultValue:256})}))}])}));
//# sourceMappingURL=module.js.map